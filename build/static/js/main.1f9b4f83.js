/*! For license information please see main.1f9b4f83.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:E.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+_(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(S,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(j(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+_(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+_(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!p)if(null!==r(c))p=!0,R(N);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function N(e,n){p=!1,g&&(g=!1,v(j),j=-1),m=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,I=null,j=-1,S=5,_=-1;function T(){return!(t.unstable_now()-_<S)}function C(){if(null!==I){var e=t.unstable_now();_=e;var n=!0;try{n=I(!0,e)}finally{n?E():(k=!1,I=null)}}else k=!1}if("function"===typeof x)E=function(){x(C)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=C,E=function(){D.postMessage(null)}}else E=function(){y(C,0)};function R(e){I=e,k||(k=!0,E())}function P(e,n){j=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(j),j=-1):g=!0,P(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,R(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},403:(e,t,n)=>{var r;n.d(t,{E_:()=>l,F3:()=>o,Ii:()=>a}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class s extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const i=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},i=n.Plugins=n.Plugins||{},a=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),o=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=a,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==a(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(a()))||!!o(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),u.proxy;const d=a(),h=o(e);let f;const m=i=>{let a;const o=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];const m=(async()=>(!f&&d in c?f=f="function"===typeof c[d]?await c[d]():c[d]:null!==t&&!f&&"web"in c&&(f=f="function"===typeof c.web?await c.web():c.web),f))().then(t=>{const o=((t,i)=>{var a,o;if(!h){if(t)return null===(o=t[i])||void 0===o?void 0:o.bind(t);throw new s('"'.concat(e,'" plugin is not implemented on ').concat(d),r.Unimplemented)}{const r=null===h||void 0===h?void 0:h.methods.find(e=>i===e.name);if(r)return"promise"===r.rtype?t=>n.nativePromise(e,i.toString(),t):(t,r)=>n.nativeCallback(e,i.toString(),t,r);if(t)return null===(a=t[i])||void 0===a?void 0:a.bind(t)}})(t,i);if(o){const e=o(...l);return a=null===e||void 0===e?void 0:e.remove,e}throw new s('"'.concat(e,".").concat(i,'()" is not implemented on ').concat(d),r.Unimplemented)});return"addListener"===i&&(m.remove=async()=>a()),m};return o.toString=()=>"".concat(i.toString(),"() { [capacitor code] }"),Object.defineProperty(o,"name",{value:i,writable:!1,configurable:!1}),o},p=m("addListener"),g=m("removeListener"),y=(e,t)=>{const n=p({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},s=new Promise(e=>n.then(()=>e({remove:r})));return s.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},s},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return h?y:p;case"removeListener":return g;default:return m(t)}}});return i[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(c),...h?[d]:[]])}),v},n.Exception=s,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},a=(e=>e.Capacitor=i(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),o=a.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new a.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new a.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),s=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(s,"; ").concat(i,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}o("CapacitorCookies",{web:()=>new d});const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),n=Object.keys(e).map(e=>e.toLocaleLowerCase());return n.reduce((n,r,s)=>(n[r]=e[t[s]],n),{})}(e.headers),s=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(s.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class f extends l{async request(e){const t=h(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,n)=>{const[r,s]=n;let i,a;return Array.isArray(s)?(a="",s.forEach(e=>{i=t?encodeURIComponent(e):e,a+="".concat(r,"=").concat(i,"&")}),a.slice(0,-1)):(i=t?encodeURIComponent(s):s,a="".concat(r,"=").concat(i)),"".concat(e,"&").concat(a)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,s=await fetch(r,t),i=s.headers.get("content-type")||"";let a,o,{responseType:l="text"}=s.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await s.blob(),a=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(o);break;case"json":a=await s.json();break;default:a=await s.text()}const c={};return s.headers.forEach((e,t)=>{c[t]=e}),{data:a,headers:c,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}o("CapacitorHttp",{web:()=>new f})},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(Ze){var t=Ze.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Je){var r=Je}Reflect.construct(e,[],t)}else{try{t.call()}catch(Je){r=Je}e.call(t.prototype)}else{try{throw Error()}catch(Je){r=Je}e()}}catch(Je){if(Je&&r&&"string"===typeof Je.stack){for(var s=Je.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case N:return"Portal";case I:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case j:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(Ze){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,Ee=null;function ke(e){if(e=_s(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=Cs(t),we(e.stateNode,e.type,t))}}function Ie(e){Ne?Ee?Ee.push(e):Ee=[e]:Ne=e}function je(){if(Ne){var e=Ne,t=Ee;if(Ee=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Se(e,t){return e(t)}function _e(){}var Te=!1;function Ce(e,t,n){if(Te)return e(t,n);Te=!0;try{return Se(e,t,n)}finally{Te=!1,(null!==Ne||null!==Ee)&&(_e(),je())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=Cs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(Ye){De=!1}function Pe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Me=!1,Ue=null,Fe={onError:function(e){Oe=!0,Le=e}};function Ve(e,t,n,r,s,i,a,o,l){Oe=!1,Le=null,Pe.apply(Fe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(i(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===r)return qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=s.unstable_scheduleCallback,Xe=s.unstable_cancelCallback,$e=s.unstable_shouldYield,et=s.unstable_requestPaint,tt=s.unstable_now,nt=s.unstable_getCurrentPriorityLevel,it=s.unstable_ImmediatePriority,ot=s.unstable_UserBlockingPriority,lt=s.unstable_NormalPriority,ct=s.unstable_LowPriority,ut=s.unstable_IdlePriority,dt=null,ht=null;var ft=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(mt(e)/pt|0)|0},mt=Math.log,pt=Math.LN2;var gt=64,yt=4194304;function vt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=vt(o):0!==(i&=a)&&(r=vt(i))}else 0!==(a=n&~s)?r=vt(a):0!==i&&(r=vt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ft(t)),r|=e[n],t&=~s;return r}function bt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function wt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Nt(){var e=gt;return 0===(4194240&(gt<<=1))&&(gt=64),e}function Et(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ft(t)]=n}function It(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ft(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var jt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Tt,Ct,At,Dt,Rt,Pt=!1,Ot=[],Lt=null,Mt=null,Ut=null,Ft=new Map,Vt=new Map,zt=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(t.pointerId)}}function Kt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=_s(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ht(e){var t=Ss(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Rt(e.priority,function(){At(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_s(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Qt(e,t,n){Gt(e)&&n.delete(t)}function Jt(){Pt=!1,null!==Lt&&Gt(Lt)&&(Lt=null),null!==Mt&&Gt(Mt)&&(Mt=null),null!==Ut&&Gt(Ut)&&(Ut=null),Ft.forEach(Qt),Vt.forEach(Qt)}function Yt(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jt)))}function Xt(e){function t(t){return Yt(t,e)}if(0<Ot.length){Yt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Lt&&Yt(Lt,e),null!==Mt&&Yt(Mt,e),null!==Ut&&Yt(Ut,e),Ft.forEach(t),Vt.forEach(t),n=0;n<zt.length;n++)(r=zt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Ht(n),null===n.blockedOn&&zt.shift()}var $t=b.ReactCurrentBatchConfig,Zt=!0;function en(e,t,n,r){var s=jt,i=$t.transition;$t.transition=null;try{jt=1,nn(e,t,n,r)}finally{jt=s,$t.transition=i}}function tn(e,t,n,r){var s=jt,i=$t.transition;$t.transition=null;try{jt=4,nn(e,t,n,r)}finally{jt=s,$t.transition=i}}function nn(e,t,n,r){if(Zt){var s=sn(e,t,n,r);if(null===s)Zr(e,t,r,rn,n),qt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Lt=Kt(Lt,e,t,n,r,s),!0;case"dragenter":return Mt=Kt(Mt,e,t,n,r,s),!0;case"mouseover":return Ut=Kt(Ut,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ft.set(i,Kt(Ft.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vt.set(i,Kt(Vt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(qt(e,r),4&t&&-1<Bt.indexOf(e)){for(;null!==s;){var i=_s(s);if(null!==i&&Tt(i),null===(i=sn(e,t,n,r))&&Zr(e,t,r,rn,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var rn=null;function sn(e,t,n,r){if(rn=null,null!==(e=Ss(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rn=e,null}function an(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case it:return 1;case ot:return 4;case lt:case ct:return 16;case ut:return 536870912;default:return 16}default:return 16}}var on=null,ln=null,cn=null;function un(){if(cn)return cn;var e,t,n=ln,r=n.length,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return cn=s.slice(e,1<t?1-t:void 0)}function dn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function hn(){return!0}function fn(){return!1}function mn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?hn:fn,this.isPropagationStopped=fn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hn)},persist:function(){},isPersistent:hn}),t}var pn,gn,yn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=mn(vn),bn=M({},vn,{view:0,detail:0}),wn=mn(bn),Nn=M({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&"mousemove"===e.type?(pn=e.screenX-yn.screenX,gn=e.screenY-yn.screenY):gn=pn=0,yn=e),pn)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),En=mn(Nn),kn=mn(M({},Nn,{dataTransfer:0})),In=mn(M({},bn,{relatedTarget:0})),jn=mn(M({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),Sn=M({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=mn(Sn),Tn=mn(M({},vn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Dn[e])&&!!t[e]}function Pn(){return Rn}var On=M({},bn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?dn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=mn(On),Mn=mn(M({},Nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Un=mn(M({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),Fn=mn(M({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=M({},Nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=mn(Vn),Bn=[9,13,27,32],qn=u&&"CompositionEvent"in window,Wn=null;u&&"documentMode"in document&&(Wn=document.documentMode);var Kn=u&&"TextEvent"in window&&!Wn,Hn=u&&(!qn||Wn&&8<Wn&&11>=Wn),Gn=String.fromCharCode(32),Qn=!1;function Jn(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function er(e,t,n,r){Ie(r),0<(t=ts(t,"onChange")).length&&(n=new xn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Gr(e,0)}function sr(e){if(G(Ts(e)))return e}function ir(e,t){if("change"===e)return t}var ar=!1;if(u){var or;if(u){var lr="oninput"in document;if(!lr){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),lr="function"===typeof cr.oninput}or=lr}else or=!1;ar=or&&(!document.documentMode||9<document.documentMode)}function ur(){tr&&(tr.detachEvent("onpropertychange",dr),nr=tr=null)}function dr(e){if("value"===e.propertyName&&sr(nr)){var t=[];er(t,nr,e,be(e)),Ce(rr,t)}}function hr(e,t,n){"focusin"===e?(ur(),nr=n,(tr=t).attachEvent("onpropertychange",dr)):"focusout"===e&&ur()}function fr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return sr(nr)}function mr(e,t){if("click"===e)return sr(t)}function pr(e,t){if("input"===e||"change"===e)return sr(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function yr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!gr(e[s],t[s]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xr(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function br(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?br(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function wr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(rt){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Er(e){var t=wr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&br(n.ownerDocument.documentElement,n)){if(null!==r&&Nr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=xr(n,i);var a=xr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kr=u&&"documentMode"in document&&11>=document.documentMode,Ir=null,jr=null,Sr=null,_r=!1;function Tr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==Ir||Ir!==Q(r)||("selectionStart"in(r=Ir)&&Nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Sr&&yr(Sr,r)||(Sr=r,0<(r=ts(jr,"onSelect")).length&&(t=new xn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ir)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Dr={},Rr={};function Pr(e){if(Dr[e])return Dr[e];if(!Ar[e])return e;var t,n=Ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rr)return Dr[e]=n[t];return e}u&&(Rr=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);var Or=Pr("animationend"),Lr=Pr("animationiteration"),Mr=Pr("animationstart"),Ur=Pr("transitionend"),Fr=new Map,Vr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Fr.set(e,t),l(t,[e])}for(var Br=0;Br<Vr.length;Br++){var qr=Vr[Br];zr(qr.toLowerCase(),"on"+(qr[0].toUpperCase()+qr.slice(1)))}zr(Or,"onAnimationEnd"),zr(Lr,"onAnimationIteration"),zr(Mr,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Ur,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Hr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Le;Oe=!1,Le=null,Me||(Me=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Gr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Hr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Hr(s,o,c),i=l}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Qr(e,t){var n=t[ks];void 0===n&&(n=t[ks]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Jr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){if(!e[Yr]){e[Yr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Kr.has(t)||Jr(t,!1,e),Jr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Yr]||(t[Yr]=!0,Jr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(an(t)){case 1:var s=en;break;case 4:s=tn;break;default:s=nn}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=Ss(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ce(function(){var r=i,s=be(n),a=[];e:{var o=Fr.get(e);if(void 0!==o){var l=xn,c=e;switch(e){case"keypress":if(0===dn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":c="focus",l=In;break;case"focusout":c="blur",l=In;break;case"beforeblur":case"afterblur":l=In;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Un;break;case Or:case Lr:case Mr:l=jn;break;case Ur:l=Fn;break;case"scroll":l=wn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Ae(m,h))&&u.push(es(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!Ss(c)&&!c[Es])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ss(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=En,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:Ts(l),f=null==c?o:Ts(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,Ss(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=ns(f))m++;for(f=0,p=h;p;p=ns(p))f++;for(;0<m-f;)u=ns(u),m--;for(;0<f-m;)h=ns(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=ns(u),h=ns(h)}u=null}else u=null;null!==l&&rs(a,o,l,u,!1),null!==c&&null!==d&&rs(a,d,c,u,!0)}if("select"===(l=(o=r?Ts(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=ir;else if(Zn(o))if(ar)g=pr;else{g=fr;var y=hr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=mr);switch(g&&(g=g(e,r))?er(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Ts(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(Ir=y,jr=r,Sr=null);break;case"focusout":Sr=jr=Ir=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Tr(a,n,s);break;case"selectionchange":if(kr)break;case"keydown":case"keyup":Tr(a,n,s)}var v;if(qn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Xn?Jn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Hn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Xn&&(v=un()):(ln="value"in(on=s)?on.value:on.textContent,Xn=!0)),0<(y=ts(r,x)).length&&(x=new Tn(x,e,null,n,s),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Yn(n))&&(x.data=v))),(v=Kn?function(e,t){switch(e){case"compositionend":return Yn(t);case"keypress":return 32!==t.which?null:(Qn=!0,Gn);case"textInput":return(e=t.data)===Gn&&Qn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!qn&&Jn(e,t)?(e=un(),cn=ln=on=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ts(r,"onBeforeInput")).length&&(s=new Tn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Gr(a,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ts(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ae(e,n))&&r.unshift(es(e,i,s)),null!=(i=Ae(e,t))&&r.push(es(e,i,s))),e=e.return}return r}function ns(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rs(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,i))&&a.unshift(es(n,l,o)):s||null!=(l=Ae(n,i))&&a.push(es(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ss=/\r\n?/g,is=/\u0000|\uFFFD/g;function as(e){return("string"===typeof e?e:""+e).replace(ss,"\n").replace(is,"")}function os(e,t,n){if(t=as(t),as(e)!==t&&n)throw Error(i(425))}function ls(){}var cs=null,us=null;function ds(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hs="function"===typeof setTimeout?setTimeout:void 0,fs="function"===typeof clearTimeout?clearTimeout:void 0,ms="function"===typeof Promise?Promise:void 0,ps="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ms?function(e){return ms.resolve(null).then(e).catch(gs)}:hs;function gs(e){setTimeout(function(){throw e})}function ys(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Xt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Xt(t)}function vs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function xs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),ws="__reactFiber$"+bs,Ns="__reactProps$"+bs,Es="__reactContainer$"+bs,ks="__reactEvents$"+bs,Is="__reactListeners$"+bs,js="__reactHandles$"+bs;function Ss(e){var t=e[ws];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Es]||n[ws]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xs(e);null!==e;){if(n=e[ws])return n;e=xs(e)}return t}n=(e=n).parentNode}return null}function _s(e){return!(e=e[ws]||e[Es])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ts(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Cs(e){return e[Ns]||null}var As=[],Ds=-1;function Rs(e){return{current:e}}function Ps(e){0>Ds||(e.current=As[Ds],As[Ds]=null,Ds--)}function Os(e,t){Ds++,As[Ds]=e.current,e.current=t}var Ls={},Ms=Rs(Ls),Us=Rs(!1),Fs=Ls;function Vs(e,t){var n=e.type.contextTypes;if(!n)return Ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function zs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bs(){Ps(Us),Ps(Ms)}function qs(e,t,n){if(Ms.current!==Ls)throw Error(i(168));Os(Ms,t),Os(Us,n)}function Ws(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Ks(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Fs=Ms.current,Os(Ms,e),Os(Us,Us.current),!0}function Hs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ws(e,t,Fs),r.__reactInternalMemoizedMergedChildContext=e,Ps(Us),Ps(Ms),Os(Ms,e)):Ps(Us),Os(Us,n)}var Gs=null,Qs=!1,Js=!1;function Ys(e){null===Gs?Gs=[e]:Gs.push(e)}function Xs(){if(!Js&&null!==Gs){Js=!0;var e=0,t=jt;try{var n=Gs;for(jt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Gs=null,Qs=!1}catch(Ge){throw null!==Gs&&(Gs=Gs.slice(e+1)),He(it,Xs),Ge}finally{jt=t,Js=!1}}return null}var $s=[],Zs=0,ei=null,ti=0,ni=[],ri=0,si=null,ii=1,ai="";function oi(e,t){$s[Zs++]=ti,$s[Zs++]=ei,ei=e,ti=t}function li(e,t,n){ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,si=e;var r=ii;e=ai;var s=32-ft(r)-1;r&=~(1<<s),n+=1;var i=32-ft(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ii=1<<32-ft(t)+s|n<<s|r,ai=i+e}else ii=1<<i|n<<s|r,ai=e}function ci(e){null!==e.return&&(oi(e,1),li(e,1,0))}function ui(e){for(;e===ei;)ei=$s[--Zs],$s[Zs]=null,ti=$s[--Zs],$s[Zs]=null;for(;e===si;)si=ni[--ri],ni[ri]=null,ai=ni[--ri],ni[ri]=null,ii=ni[--ri],ni[ri]=null}var di=null,hi=null,fi=!1,mi=null;function pi(e,t){var n=Vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,di=e,hi=vs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,di=e,hi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==si?{id:ii,overflow:ai}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Vc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,di=e,hi=null,!0);default:return!1}}function yi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vi(e){if(fi){var t=hi;if(t){var n=t;if(!gi(e,t)){if(yi(e))throw Error(i(418));t=vs(n.nextSibling);var r=di;t&&gi(e,t)?pi(r,n):(e.flags=-4097&e.flags|2,fi=!1,di=e)}}else{if(yi(e))throw Error(i(418));e.flags=-4097&e.flags|2,fi=!1,di=e}}}function xi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;di=e}function bi(e){if(e!==di)return!1;if(!fi)return xi(e),fi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ds(e.type,e.memoizedProps)),t&&(t=hi)){if(yi(e))throw wi(),Error(i(418));for(;t;)pi(e,t),t=vs(t.nextSibling)}if(xi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){hi=vs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}hi=null}}else hi=di?vs(e.stateNode.nextSibling):null;return!0}function wi(){for(var e=hi;e;)e=vs(e.nextSibling)}function Ni(){hi=di=null,fi=!1}function Ei(e){null===mi?mi=[e]:mi.push(e)}var ki=b.ReactCurrentBatchConfig;function Ii(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function ji(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Si(e){return(0,e._init)(e._payload)}function _i(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Si(i)===t.type)?((r=s(t,n.props)).ref=Ii(e,t,n),r.return=e,r):((r=qc(n.type,n.key,n.props,null,e.mode,r)).ref=Ii(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Wc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Hc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qc(t.type,t.key,t.props,null,e.mode,n)).ref=Ii(e,null,t),n.return=e,n;case N:return(t=Gc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Wc(t,e.mode,n,null)).return=e,t;ji(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);ji(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);ji(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),fi&&oi(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return fi&&oi(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),fi&&oi(s,p),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var x=f(s,p,v.value,c);if(null===x){null===p&&(p=y);break}e&&p&&null===x.alternate&&t(s,p),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,p=y}if(v.done)return n(s,p),fi&&oi(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return fi&&oi(s,g),u}for(p=r(s,p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),fi&&oi(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Si(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=Ii(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Wc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=qc(a.type,a.key,a.props,null,r.mode,l)).ref=Ii(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Gc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(O(a))return g(r,i,a,l);ji(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Hc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ti=_i(!0),Ci=_i(!1),Ai=Rs(null),Di=null,Ri=null,Pi=null;function Oi(){Pi=Ri=Di=null}function Li(e){var t=Ai.current;Ps(Ai),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ui(e,t){Di=e,Pi=Ri=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Fi(e){var t=e._currentValue;if(Pi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ri){if(null===Di)throw Error(i(308));Ri=e,Di.dependencies={lanes:0,firstContext:e}}else Ri=Ri.next=e;return t}var Vi=null;function zi(e){null===Vi?Vi=[e]:Vi.push(e)}function Bi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,zi(t)):(n.next=s.next,s.next=n),t.interleaved=n,qi(e,r)}function qi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Wi=!1;function Ki(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,qi(e,n)}return null===(s=r.interleaved)?(t.next=t,zi(r)):(t.next=s.next,s.next=t),r.interleaved=t,qi(e,n)}function Ji(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}function Yi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xi(e,t,n,r){var s=e.updateQueue;Wi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Wi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Kl|=a,e.lanes=a,e.memoizedState=d}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Zi={},ea=Rs(Zi),ta=Rs(Zi),na=Rs(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function sa(e,t){switch(Os(na,t),Os(ta,e),Os(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ps(ea),Os(ea,t)}function ia(){Ps(ea),Ps(ta),Ps(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Os(ta,e),Os(ea,n))}function oa(e){ta.current===e&&(Ps(ea),Ps(ta))}var la=Rs(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=b.ReactCurrentDispatcher,fa=b.ReactCurrentBatchConfig,ma=0,pa=null,ga=null,ya=null,va=!1,xa=!1,ba=0,wa=0;function Na(){throw Error(i(321))}function Ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function ka(e,t,n,r,s,a){if(ma=a,pa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?oo:lo,e=n(r,s),xa){a=0;do{if(xa=!1,ba=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,ha.current=co,e=n(r,s)}while(xa)}if(ha.current=ao,t=null!==ga&&null!==ga.next,ma=0,ya=ga=pa=null,va=!1,t)throw Error(i(300));return e}function Ia(){var e=0!==ba;return ba=0,e}function ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?pa.memoizedState=ya=e:ya=ya.next=e,ya}function Sa(){if(null===ga){var e=pa.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?pa.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?pa.memoizedState=ya=e:ya=ya.next=e}return ya}function _a(e,t){return"function"===typeof t?t(e):t}function Ta(e){var t=Sa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ma&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,pa.lanes|=d,Kl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,gr(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,pa.lanes|=a,Kl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ca(e){var t=Sa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);gr(a,t.memoizedState)||(_o=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Da(e,t){var n=pa,r=Sa(),s=t(),a=!gr(r.memoizedState,s);if(a&&(r.memoizedState=s,_o=!0),r=r.queue,Wa(Oa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Fa(9,Pa.bind(null,n,r,s,t),void 0,null),null===Ul)throw Error(i(349));0!==(30&ma)||Ra(n,t,s)}return s}function Ra(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function Oa(e,t,n){return n(function(){La(t)&&Ma(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(rt){return!0}}function Ma(e){var t=qi(e,1);null!==t&&dc(t,e,1,-1)}function Ua(e){var t=ja();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=no.bind(null,pa,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return Sa().memoizedState}function za(e,t,n,r){var s=ja();pa.flags|=e,s.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function Ba(e,t,n,r){var s=Sa();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&Ea(r,a.deps))return void(s.memoizedState=Fa(t,n,i,r))}pa.flags|=e,s.memoizedState=Fa(1|t,n,i,r)}function qa(e,t){return za(8390656,8,e,t)}function Wa(e,t){return Ba(2048,8,e,t)}function Ka(e,t){return Ba(4,2,e,t)}function Ha(e,t){return Ba(4,4,e,t)}function Ga(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,Ga.bind(null,t,e),n)}function Ja(){}function Ya(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&ma)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(gr(n,t)||(n=Nt(),pa.lanes|=n,Kl|=n,e.baseState=!0),t)}function Za(e,t){var n=jt;jt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{jt=n,fa.transition=r}}function eo(){return Sa().memoizedState}function to(e,t,n){var r=uc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ro(e))so(t,n);else if(null!==(n=Bi(e,t,n,r))){dc(n,e,r,cc()),io(n,t,r)}}function no(e,t,n){var r=uc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ro(e))so(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,gr(o,a)){var l=t.interleaved;return null===l?(s.next=s,zi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Je){}null!==(n=Bi(e,t,s,r))&&(dc(n,e,r,s=cc()),io(n,t,r))}}function ro(e){var t=e.alternate;return e===pa||null!==t&&t===pa}function so(e,t){xa=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}var ao={readContext:Fi,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},oo={readContext:Fi,useCallback:function(e,t){return ja().memoizedState=[e,void 0===t?null:t],e},useContext:Fi,useEffect:qa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=ja();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ja();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=to.bind(null,pa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ja().memoizedState=e},useState:Ua,useDebugValue:Ja,useDeferredValue:function(e){return ja().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=Za.bind(null,e[1]),ja().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pa,s=ja();if(fi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ul)throw Error(i(349));0!==(30&ma)||Ra(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,qa(Oa.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Pa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ja(),t=Ul.identifierPrefix;if(fi){var n=ai;t=":"+t+"R"+(n=(ii&~(1<<32-ft(ii)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lo={readContext:Fi,useCallback:Ya,useContext:Fi,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ka,useLayoutEffect:Ha,useMemo:Xa,useReducer:Ta,useRef:Va,useState:function(){return Ta(_a)},useDebugValue:Ja,useDeferredValue:function(e){return $a(Sa(),ga.memoizedState,e)},useTransition:function(){return[Ta(_a)[0],Sa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Da,useId:eo,unstable_isNewReconciler:!1},co={readContext:Fi,useCallback:Ya,useContext:Fi,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ka,useLayoutEffect:Ha,useMemo:Xa,useReducer:Ca,useRef:Va,useState:function(){return Ca(_a)},useDebugValue:Ja,useDeferredValue:function(e){var t=Sa();return null===ga?t.memoizedState=e:$a(t,ga.memoizedState,e)},useTransition:function(){return[Ca(_a)[0],Sa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Da,useId:eo,unstable_isNewReconciler:!1};function uo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Gi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Qi(e,i,s))&&(dc(t,e,s,r),Ji(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Gi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Qi(e,i,s))&&(dc(t,e,s,r),Ji(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cc(),r=uc(e),s=Gi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Qi(e,s,r))&&(dc(t,e,r,n),Ji(t,e,r))}};function mo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!yr(n,r)||!yr(s,i))}function po(e,t,n){var r=!1,s=Ls,i=t.contextType;return"object"===typeof i&&null!==i?i=Fi(i):(s=zs(t)?Fs:Ms.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Vs(e,s):Ls),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ki(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Fi(i):(i=zs(t)?Fs:Ms.current,s.context=Vs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ho(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&fo.enqueueReplaceState(s,s.state,null),Xi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(st){s="\nError generating stack: "+st.message+"\n"+st.stack}return{value:e,source:t,stack:s,digest:null}}function xo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function bo(e,t){try{console.error(t.value)}catch(Ze){setTimeout(function(){throw Ze})}}var wo="function"===typeof WeakMap?WeakMap:Map;function No(e,t,n){(n=Gi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ec=r),bo(0,t)},n}function Eo(e,t,n){(n=Gi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){bo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){bo(0,t),"function"!==typeof r&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ko(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Pc.bind(null,e,t,n),t.then(e,e))}function Io(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function jo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Gi(-1,1)).tag=2,Qi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var So=b.ReactCurrentOwner,_o=!1;function To(e,t,n,r){t.child=null===e?Ci(t,null,n,r):Ti(t,e.child,n,r)}function Co(e,t,n,r,s){n=n.render;var i=t.ref;return Ui(t,s),r=ka(e,t,n,r,i,s),n=Ia(),null===e||_o?(fi&&n&&ci(t),t.flags|=1,To(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||zc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Do(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:yr)(a,r)&&e.ref===t.ref)return Zo(e,t,s)}return t.flags|=1,(e=Bc(i,r)).ref=t.ref,e.return=t,t.child=e}function Do(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(yr(i,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Zo(e,t,s);0!==(131072&e.flags)&&(_o=!0)}}return Oo(e,t,n,r,s)}function Ro(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(Bl,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Os(Bl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Os(Bl,zl),zl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Os(Bl,zl),zl|=r;return To(e,t,s,n),t.child}function Po(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,n,r,s){var i=zs(n)?Fs:Ms.current;return i=Vs(t,i),Ui(t,s),n=ka(e,t,n,r,i,s),r=Ia(),null===e||_o?(fi&&r&&ci(t),t.flags|=1,To(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Lo(e,t,n,r,s){if(zs(n)){var i=!0;Ks(t)}else i=!1;if(Ui(t,s),null===t.stateNode)$o(e,t),po(t,n,r),yo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Fi(c):c=Vs(t,c=zs(n)?Fs:Ms.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&go(t,a,r,c),Wi=!1;var h=t.memoizedState;a.state=h,Xi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Us.current||Wi?("function"===typeof u&&(ho(t,n,u,r),l=t.memoizedState),(o=Wi||mo(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Hi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:uo(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fi(l):l=Vs(t,l=zs(n)?Fs:Ms.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&go(t,a,r,l),Wi=!1,h=t.memoizedState,a.state=h,Xi(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||Us.current||Wi?("function"===typeof f&&(ho(t,n,f,r),m=t.memoizedState),(c=Wi||mo(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,i,s)}function Mo(e,t,n,r,s,i){Po(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Hs(t,n,!1),Zo(e,t,i);r=t.stateNode,So.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ti(t,e.child,null,i),t.child=Ti(t,null,o,i)):To(e,t,o,i),t.memoizedState=r.state,s&&Hs(t,n,!0),t.child}function Uo(e){var t=e.stateNode;t.pendingContext?qs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&qs(0,t.context,!1),sa(e,t.containerInfo)}function Fo(e,t,n,r,s){return Ni(),Ei(s),t.flags|=256,To(e,t,n,r),t.child}var Vo,zo,Bo,qo,Wo={dehydrated:null,treeContext:null,retryLane:0};function Ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ho(e,t,n){var r,s=t.pendingProps,a=la.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Os(la,1&a),null===e)return vi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Kc(l,s,0,null),e=Wc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ko(n),t.memoizedState=Wo,e):Go(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Qo(e,t,o,r=xo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Kc({mode:"visible",children:r.children},s,0,null),(a=Wc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ti(t,e.child,null,o),t.child.memoizedState=Ko(o),t.memoizedState=Wo,a);if(0===(1&t.mode))return Qo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Qo(e,t,o,r=xo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Ul)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,qi(e,s),dc(r,e,s,-1))}return kc(),Qo(e,t,o,r=xo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,hi=vs(s.nextSibling),di=t,fi=!0,mi=null,null!==e&&(ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,ii=e.id,ai=e.overflow,si=t),t=Go(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Bc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Bc(r,o):(o=Wc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ko(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Wo,s}return e=(o=e.child).sibling,s=Bc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Go(e,t){return(t=Kc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qo(e,t,n,r){return null!==r&&Ei(r),Ti(t,e.child,null,n),(e=Go(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function Yo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(To(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n,t);else if(19===e.tag)Jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Os(la,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ca(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,i);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Kl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){if(!fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:case 17:return zs(t.type)&&Bs(),tl(t),null;case 3:return r=t.stateNode,ia(),Ps(Us),Ps(Ms),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==mi&&(pc(mi),mi=null))),zo(e,t),tl(t),null;case 5:oa(t);var s=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return tl(t),null}if(e=ra(ea.current),bi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ws]=t,r[Ns]=a,e=0!==(1&t.mode),n){case"dialog":Qr("cancel",r),Qr("close",r);break;case"iframe":case"object":case"embed":Qr("load",r);break;case"video":case"audio":for(s=0;s<Wr.length;s++)Qr(Wr[s],r);break;case"source":Qr("error",r);break;case"img":case"image":case"link":Qr("error",r),Qr("load",r);break;case"details":Qr("toggle",r);break;case"input":Y(r,a),Qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qr("invalid",r);break;case"textarea":se(r,a),Qr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Qr("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ls)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ws]=t,e[Ns]=r,Vo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Qr("cancel",e),Qr("close",e),s=r;break;case"iframe":case"object":case"embed":Qr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Wr.length;s++)Qr(Wr[s],e);s=r;break;case"source":Qr("error",e),s=r;break;case"img":case"image":case"link":Qr("error",e),Qr("load",e),s=r;break;case"details":Qr("toggle",e),s=r;break;case"input":Y(e,r),s=J(e,r),Qr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Qr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Qr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?pe(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Qr("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return tl(t),null;case 6:if(e&&null!=t.stateNode)qo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ws]=t,(a=r.nodeValue!==n)&&null!==(e=di))switch(e.tag){case 3:os(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&os(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ws]=t,t.stateNode=r}return tl(t),null;case 13:if(Ps(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fi&&null!==hi&&0!==(1&t.mode)&&0===(128&t.flags))wi(),Ni(),t.flags|=98560,a=!1;else if(a=bi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ws]=t}else Ni(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else null!==mi&&(pc(mi),mi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===ql&&(ql=3):kc())),null!==t.updateQueue&&(t.flags|=4),tl(t),null);case 4:return ia(),zo(e,t),null===e&&Xr(t.stateNode.containerInfo),tl(t),null;case 10:return Li(t.type._context),tl(t),null;case 19:if(Ps(la),null===(a=t.memoizedState))return tl(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)el(a,!1);else{if(0!==ql||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,el(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Os(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&tt()>Xl&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fi)return tl(t),null}else 2*tt()-a.renderingStartTime>Xl&&1073741824!==n&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=tt(),t.sibling=null,n=la.current,Os(la,r?1&n|2:1&n),t):(tl(t),null);case 22:case 23:return bc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&zl)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function rl(e,t){switch(ui(t),t.tag){case 1:return zs(t.type)&&Bs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Ps(Us),Ps(Ms),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oa(t),null;case 13:if(Ps(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Ni()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ps(la),null;case 4:return ia(),null;case 10:return Li(t.type._context),null;case 22:case 23:return bc(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zo=function(){},Bo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":s=J(e,s),r=J(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ls)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Qr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var sl=!1,il=!1,al="function"===typeof WeakSet?WeakSet:Set,ol=null;function ll(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(rt){Rc(e,t,rt)}else n.current=null}function cl(e,t,n){try{n()}catch(rt){Rc(e,t,rt)}}var ul=!1;function dl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&cl(t,n,i)}s=s.next}while(s!==r)}}function hl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ml(e){var t=e.alternate;null!==t&&(e.alternate=null,ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ws],delete t[Ns],delete t[ks],delete t[Is],delete t[js])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pl(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ls));else if(4!==r&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}var xl=null,bl=!1;function wl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(ht&&"function"===typeof ht.onCommitFiberUnmount)try{ht.onCommitFiberUnmount(dt,n)}catch(at){}switch(n.tag){case 5:il||ll(n,t);case 6:var r=xl,s=bl;xl=null,wl(e,t,n),bl=s,null!==(xl=r)&&(bl?(e=xl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):xl.removeChild(n.stateNode));break;case 18:null!==xl&&(bl?(e=xl,n=n.stateNode,8===e.nodeType?ys(e.parentNode,n):1===e.nodeType&&ys(e,n),Xt(e)):ys(xl,n.stateNode));break;case 4:r=xl,s=bl,xl=n.stateNode.containerInfo,bl=!0,wl(e,t,n),xl=r,bl=s;break;case 0:case 11:case 14:case 15:if(!il&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&cl(n,t,a),s=s.next}while(s!==r)}wl(e,t,n);break;case 1:if(!il&&(ll(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(at){Rc(n,t,at)}wl(e,t,n);break;case 21:wl(e,t,n);break;case 22:1&n.mode?(il=(r=il)||null!==n.memoizedState,wl(e,t,n),il=r):wl(e,t,n);break;default:wl(e,t,n)}}function El(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new al),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function kl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:xl=l.stateNode,bl=!1;break e;case 3:case 4:xl=l.stateNode.containerInfo,bl=!0;break e}l=l.return}if(null===xl)throw Error(i(160));Nl(a,o,s),xl=null,bl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Je){Rc(s,t,Je)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kl(t,e),jl(e),4&r){try{dl(3,e,e.return),hl(3,e)}catch(Qe){Rc(e,e.return,Qe)}try{dl(5,e,e.return)}catch(Qe){Rc(e,e.return,Qe)}}break;case 1:kl(t,e),jl(e),512&r&&null!==n&&ll(n,n.return);break;case 5:if(kl(t,e),jl(e),512&r&&null!==n&&ll(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(Qe){Rc(e,e.return,Qe)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?pe(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):x(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ns]=a}catch(Qe){Rc(e,e.return,Qe)}}break;case 6:if(kl(t,e),jl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(Qe){Rc(e,e.return,Qe)}}break;case 3:if(kl(t,e),jl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Xt(t.containerInfo)}catch(Qe){Rc(e,e.return,Qe)}break;case 4:default:kl(t,e),jl(e);break;case 13:kl(t,e),jl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Yl=tt())),4&r&&El(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(il=(u=il)||d,kl(t,e),il=u):kl(t,e),jl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ol=e,d=e.child;null!==d;){for(h=ol=d;null!==ol;){switch(m=(f=ol).child,f.tag){case 0:case 11:case 14:case 15:dl(4,f,f.return);break;case 1:ll(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Qe){Rc(r,n,Qe)}}break;case 5:ll(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==m?(m.return=f,ol=m):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(Qe){Rc(e,e.return,Qe)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Qe){Rc(e,e.return,Qe)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:kl(t,e),jl(e),4&r&&El(e);case 21:}}function jl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(pl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(i(161))}}catch(St){Rc(e,e.return,St)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){ol=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==ol;){var s=ol,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||sl;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||il;o=sl;var c=il;if(sl=a,(il=l)&&!c)for(ol=s;null!==ol;)l=(a=ol).child,22===a.tag&&null!==a.memoizedState?Al(s):null!==l?(l.return=a,ol=l):Al(s);for(;null!==i;)ol=i,_l(i,t,n),i=i.sibling;ol=s,sl=o,il=c}Tl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,ol=i):Tl(e)}}function Tl(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:il||hl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!il)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:uo(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$i(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Xt(h)}}}break;default:throw Error(i(163))}il||512&t.flags&&fl(t)}catch(f){Rc(t,t.return,f)}}if(t===e){ol=null;break}if(null!==(n=t.sibling)){n.return=t.return,ol=n;break}ol=t.return}}function Cl(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ol=n;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hl(4,t)}catch(St){Rc(t,n,St)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(St){Rc(t,s,St)}}var i=t.return;try{fl(t)}catch(St){Rc(t,i,St)}break;case 5:var a=t.return;try{fl(t)}catch(St){Rc(t,a,St)}}}catch(St){Rc(t,t.return,St)}if(t===e){ol=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ol=o;break}ol=t.return}}var Dl,Rl=Math.ceil,Pl=b.ReactCurrentDispatcher,Ol=b.ReactCurrentOwner,Ll=b.ReactCurrentBatchConfig,Ml=0,Ul=null,Fl=null,Vl=0,zl=0,Bl=Rs(0),ql=0,Wl=null,Kl=0,Hl=0,Gl=0,Ql=null,Jl=null,Yl=0,Xl=1/0,$l=null,Zl=!1,ec=null,tc=null,nc=!1,rc=null,sc=0,ic=0,ac=null,oc=-1,lc=0;function cc(){return 0!==(6&Ml)?tt():-1!==oc?oc:oc=tt()}function uc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Vl?Vl&-Vl:null!==ki.transition?(0===lc&&(lc=Nt()),lc):0!==(e=jt)?e:e=void 0===(e=window.event)?16:an(e.type)}function dc(e,t,n,r){if(50<ic)throw ic=0,ac=null,Error(i(185));kt(e,n,r),0!==(2&Ml)&&e===Ul||(e===Ul&&(0===(2&Ml)&&(Hl|=n),4===ql&&gc(e,Vl)),hc(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Xl=tt()+500,Qs&&Xs()))}function hc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-ft(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=bt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=xt(e,e===Ul?Vl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Qs=!0,Ys(e)}(yc.bind(null,e)):Ys(yc.bind(null,e)),ps(function(){0===(6&Ml)&&Xs()}),n=null;else{switch(_t(r)){case 1:n=it;break;case 4:n=ot;break;case 16:default:n=lt;break;case 536870912:n=ut}n=Uc(n,fc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fc(e,t){if(oc=-1,lc=0,0!==(6&Ml))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=xt(e,e===Ul?Vl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Ic(e,r);else{t=r;var s=Ml;Ml|=2;var a=Ec();for(Ul===e&&Vl===t||($l=null,Xl=tt()+500,wc(e,t));;)try{Sc();break}catch(at){Nc(e,at)}Oi(),Pl.current=a,Ml=s,null!==Fl?t=0:(Ul=null,Vl=0,t=ql)}if(0!==t){if(2===t&&(0!==(s=wt(e))&&(r=s,t=mc(e,s))),1===t)throw n=Wl,wc(e,0),gc(e,r),hc(e,tt()),n;if(6===t)gc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=Ic(e,r))&&(0!==(a=wt(e))&&(r=a,t=mc(e,a))),1===t))throw n=Wl,wc(e,0),gc(e,r),hc(e,tt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cc(e,Jl,$l);break;case 3:if(gc(e,r),(130023424&r)===r&&10<(t=Yl+500-tt())){if(0!==xt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){cc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hs(Cc.bind(null,e,Jl,$l),t);break}Cc(e,Jl,$l);break;case 4:if(gc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ft(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=tt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rl(r/1960))-r)){e.timeoutHandle=hs(Cc.bind(null,e,Jl,$l),r);break}Cc(e,Jl,$l);break;default:throw Error(i(329))}}}return hc(e,tt()),e.callbackNode===n?fc.bind(null,e):null}function mc(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(wc(e,t).flags|=256),2!==(e=Ic(e,t))&&(t=Jl,Jl=n,null!==t&&pc(t)),e}function pc(e){null===Jl?Jl=e:Jl.push.apply(Jl,e)}function gc(e,t){for(t&=~Gl,t&=~Hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ft(t),r=1<<n;e[n]=-1,t&=~r}}function yc(e){if(0!==(6&Ml))throw Error(i(327));Ac();var t=xt(e,0);if(0===(1&t))return hc(e,tt()),null;var n=Ic(e,t);if(0!==e.tag&&2===n){var r=wt(e);0!==r&&(t=r,n=mc(e,r))}if(1===n)throw n=Wl,wc(e,0),gc(e,t),hc(e,tt()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Jl,$l),hc(e,tt()),null}function vc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Xl=tt()+500,Qs&&Xs())}}function xc(e){null!==rc&&0===rc.tag&&0===(6&Ml)&&Ac();var t=Ml;Ml|=1;var n=Ll.transition,r=jt;try{if(Ll.transition=null,jt=1,e)return e()}finally{jt=r,Ll.transition=n,0===(6&(Ml=t))&&Xs()}}function bc(){zl=Bl.current,Ps(Bl)}function wc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,fs(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(ui(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Bs();break;case 3:ia(),Ps(Us),Ps(Ms),da();break;case 5:oa(r);break;case 4:ia();break;case 13:case 19:Ps(la);break;case 10:Li(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Ul=e,Fl=e=Bc(e.current,null),Vl=zl=t,ql=0,Wl=null,Gl=Hl=Kl=0,Jl=Ql=null,null!==Vi){for(t=0;t<Vi.length;t++)if(null!==(r=(n=Vi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Vi=null}return e}function Nc(e,t){for(;;){var n=Fl;try{if(Oi(),ha.current=ao,va){for(var r=pa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}va=!1}if(ma=0,ya=ga=pa=null,xa=!1,ba=0,Ol.current=null,null===n||null===n.return){ql=1,Wl=t,Fl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Vl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Io(o);if(null!==m){m.flags&=-257,jo(m,o,l,0,t),1&m.mode&&ko(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){ko(a,u,t),kc();break e}c=Error(i(426))}else if(fi&&1&l.mode){var y=Io(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),jo(y,o,l,0,t),Ei(vo(c,l));break e}}a=c=vo(c,l),4!==ql&&(ql=2),null===Ql?Ql=[a]:Ql.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,No(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===tc||!tc.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,Eo(a,l,t));break e}}a=a.return}while(null!==a)}Tc(n)}catch(b){t=b,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function Ec(){var e=Pl.current;return Pl.current=ao,null===e?ao:e}function kc(){0!==ql&&3!==ql&&2!==ql||(ql=4),null===Ul||0===(268435455&Kl)&&0===(268435455&Hl)||gc(Ul,Vl)}function Ic(e,t){var n=Ml;Ml|=2;var r=Ec();for(Ul===e&&Vl===t||($l=null,wc(e,t));;)try{jc();break}catch(Ge){Nc(e,Ge)}if(Oi(),Ml=n,Pl.current=r,null!==Fl)throw Error(i(261));return Ul=null,Vl=0,ql}function jc(){for(;null!==Fl;)_c(Fl)}function Sc(){for(;null!==Fl&&!$e();)_c(Fl)}function _c(e){var t=Dl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?Tc(e):Fl=t,Ol.current=null}function Tc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=nl(n,t,zl)))return void(Fl=n)}else{if(null!==(n=rl(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return ql=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===ql&&(ql=5)}function Cc(e,t,n){var r=jt,s=Ll.transition;try{Ll.transition=null,jt=1,function(e,t,n,r){do{Ac()}while(null!==rc);if(0!==(6&Ml))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ft(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Ul&&(Fl=Ul=null,Vl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||nc||(nc=!0,Uc(lt,function(){return Ac(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var o=jt;jt=1;var l=Ml;Ml|=4,Ol.current=null,function(e,t){if(cs=Zt,Nr(e=wr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Wt){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(us={focusedElem:e,selectionRange:n},Zt=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:uo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(Wt){Rc(t,t.return,Wt)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}p=ul,ul=!1}(e,n),Il(n,e),Er(us),Zt=!!cs,us=cs=null,e.current=n,Sl(n,e,s),et(),Ml=l,jt=o,Ll.transition=a}else e.current=n;if(nc&&(nc=!1,rc=e,sc=s),a=e.pendingLanes,0===a&&(tc=null),function(e){if(ht&&"function"===typeof ht.onCommitFiberRoot)try{ht.onCommitFiberRoot(dt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),hc(e,tt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=ec,ec=null,e;0!==(1&sc)&&0!==e.tag&&Ac(),a=e.pendingLanes,0!==(1&a)?e===ac?ic++:(ic=0,ac=e):ic=0,Xs()}(e,t,n,r)}finally{Ll.transition=s,jt=r}return null}function Ac(){if(null!==rc){var e=_t(sc),t=Ll.transition,n=jt;try{if(Ll.transition=null,jt=16>e?16:e,null===rc)var r=!1;else{if(e=rc,rc=null,sc=0,0!==(6&Ml))throw Error(i(331));var s=Ml;for(Ml|=4,ol=e.current;null!==ol;){var a=ol,o=a.child;if(0!==(16&ol.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ol=u;null!==ol;){var d=ol;switch(d.tag){case 0:case 11:case 15:dl(8,d,a)}var h=d.child;if(null!==h)h.return=d,ol=h;else for(;null!==ol;){var f=(d=ol).sibling,m=d.return;if(ml(d),d===u){ol=null;break}if(null!==f){f.return=m,ol=f;break}ol=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ol=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ol=o;else e:for(;null!==ol;){if(0!==(2048&(a=ol).flags))switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ol=v;break e}ol=a.return}}var x=e.current;for(ol=x;null!==ol;){var b=(o=ol).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,ol=b;else e:for(o=x;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(N){Rc(l,l.return,N)}if(l===o){ol=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ol=w;break e}ol=l.return}}if(Ml=s,Xs(),ht&&"function"===typeof ht.onPostCommitFiberRoot)try{ht.onPostCommitFiberRoot(dt,e)}catch(N){}r=!0}return r}finally{jt=n,Ll.transition=t}}return!1}function Dc(e,t,n){e=Qi(e,t=No(0,t=vo(n,t),1),1),t=cc(),null!==e&&(kt(e,1,t),hc(e,t))}function Rc(e,t,n){if(3===e.tag)Dc(e,e,n);else for(;null!==t;){if(3===t.tag){Dc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tc||!tc.has(r))){t=Qi(t,e=Eo(t,e=vo(n,e),1),1),e=cc(),null!==t&&(kt(t,1,e),hc(t,e));break}}t=t.return}}function Pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&n,Ul===e&&(Vl&n)===n&&(4===ql||3===ql&&(130023424&Vl)===Vl&&500>tt()-Yl?wc(e,0):Gl|=n),hc(e,t)}function Oc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=yt,0===(130023424&(yt<<=1))&&(yt=4194304)));var n=cc();null!==(e=qi(e,t))&&(kt(e,t,n),hc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Oc(e,n)}function Uc(e,t){return He(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vc(e,t,n,r){return new Fc(e,t,n,r)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)zc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Wc(n.children,s,a,t);case k:o=8,s|=8;break;case I:return(e=Vc(12,n,t,2|s)).elementType=I,e.lanes=a,e;case T:return(e=Vc(13,n,t,s)).elementType=T,e.lanes=a,e;case C:return(e=Vc(19,n,t,s)).elementType=C,e.lanes=a,e;case R:return Kc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:o=10;break e;case S:o=9;break e;case _:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Vc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Wc(e,t,n,r){return(e=Vc(7,e,r,t)).lanes=n,e}function Kc(e,t,n,r){return(e=Vc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return(e=Vc(6,e,null,t)).lanes=n,e}function Gc(e,t,n){return(t=Vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Et(0),this.expirationTimes=Et(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jc(e,t,n,r,s,i,a,o,l){return e=new Qc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Vc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ki(i),e}function Yc(e){if(!e)return Ls;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(zs(n))return Ws(e,n,t)}return t}function Xc(e,t,n,r,s,i,a,o,l){return(e=Jc(n,r,!0,e,0,i,0,o,l)).context=Yc(null),n=e.current,(i=Gi(r=cc(),s=uc(n))).callback=void 0!==t&&null!==t?t:null,Qi(n,i,s),e.current.lanes=s,kt(e,s,r),hc(e,r),e}function $c(e,t,n,r){var s=t.current,i=cc(),a=uc(s);return n=Yc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Gi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Qi(s,t,a))&&(dc(e,s,a,i),Ji(e,s,a)),a}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function eu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tu(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}Dl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Us.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:Uo(t),Ni();break;case 5:aa(t);break;case 1:zs(t.type)&&Ks(t);break;case 4:sa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Os(Ai,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Os(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(Os(la,1&la.current),null!==(e=Zo(e,t,n))?e.sibling:null);Os(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Os(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n)}return Zo(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,fi&&0!==(1048576&t.flags)&&li(t,ti,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$o(e,t),e=t.pendingProps;var s=Vs(t,Ms.current);Ui(t,n),s=ka(null,t,r,e,s,n);var a=Ia();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zs(r)?(a=!0,Ks(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ki(t),s.updater=fo,t.stateNode=s,s._reactInternals=t,yo(t,r,e,n),t=Mo(null,t,r,!0,a,n)):(t.tag=0,fi&&a&&ci(t),To(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(r),e=uo(r,e),s){case 0:t=Oo(null,t,r,e,n);break e;case 1:t=Lo(null,t,r,e,n);break e;case 11:t=Co(null,t,r,e,n);break e;case 14:t=Ao(null,t,r,uo(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Oo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 1:return r=t.type,s=t.pendingProps,Lo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 3:e:{if(Uo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Hi(e,t),Xi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Fo(e,t,r,n,s=vo(Error(i(423)),t));break e}if(r!==s){t=Fo(e,t,r,n,s=vo(Error(i(424)),t));break e}for(hi=vs(t.stateNode.containerInfo.firstChild),di=t,fi=!0,mi=null,n=Ci(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ni(),r===s){t=Zo(e,t,n);break e}To(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&vi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ds(r,s)?o=null:null!==a&&ds(r,a)&&(t.flags|=32),Po(e,t),To(e,t,o,n),t.child;case 6:return null===e&&vi(t),null;case 13:return Ho(e,t,n);case 4:return sa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ti(t,null,r,n):To(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Os(Ai,r._currentValue),r._currentValue=o,null!==a)if(gr(a.value,o)){if(a.children===s.children&&!Us.current){t=Zo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Gi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Mi(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}To(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ui(t,n),r=r(s=Fi(s)),t.flags|=1,To(e,t,r,n),t.child;case 14:return s=uo(r=t.type,t.pendingProps),Ao(e,t,r,s=uo(r.type,s),n);case 15:return Do(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:uo(r,s),$o(e,t),t.tag=1,zs(r)?(e=!0,Ks(t)):e=!1,Ui(t,n),po(t,r,s),yo(t,r,s,n),Mo(null,t,r,!0,e,n);case 19:return Xo(e,t,n);case 22:return Ro(e,t,n)}throw Error(i(156,t.tag))};var nu="function"===typeof reportError?reportError:function(e){console.error(e)};function ru(e){this._internalRoot=e}function su(e){this._internalRoot=e}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(){}function lu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Zc(a);o.call(e)}}$c(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Zc(a);i.call(e)}}var a=Xc(t,r,e,0,null,!1,0,"",ou);return e._reactRootContainer=a,e[Es]=a.current,Xr(8===e.nodeType?e.parentNode:e),xc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Zc(l);o.call(e)}}var l=Jc(e,0,!1,null,0,!1,0,"",ou);return e._reactRootContainer=l,e[Es]=l.current,Xr(8===e.nodeType?e.parentNode:e),xc(function(){$c(t,l,n,r)}),l}(n,t,e,s,r);return Zc(a)}su.prototype.render=ru.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$c(e,t,null,null)},su.prototype.unmount=ru.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;xc(function(){$c(null,e,null,null)}),t[Es]=null}},su.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Ht(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vt(t.pendingLanes);0!==n&&(It(t,1|n),hc(t,tt()),0===(6&Ml)&&(Xl=tt()+500,Xs()))}break;case 13:xc(function(){var t=qi(e,1);if(null!==t){var n=cc();dc(t,e,1,n)}}),tu(e,1)}},Ct=function(e){if(13===e.tag){var t=qi(e,134217728);if(null!==t)dc(t,e,134217728,cc());tu(e,134217728)}},At=function(e){if(13===e.tag){var t=uc(e),n=qi(e,t);if(null!==n)dc(n,e,t,cc());tu(e,t)}},Dt=function(){return jt},Rt=function(e,t){var n=jt;try{return jt=e,t()}finally{jt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Cs(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=vc,_e=xc;var cu={usingClientEntryPoint:!1,Events:[_s,Ts,Cs,Ie,je,vc]},uu={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},du={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{dt=hu.inject(du),ht=hu}catch(Ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!iu(e))throw Error(i(299));var n=!1,r="",s=nu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Jc(e,1,!1,null,0,n,0,r,s),e[Es]=t.current,Xr(8===e.nodeType?e.parentNode:e),new ru(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return xc(e)},t.hydrate=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!iu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=nu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Xc(t,null,e,1,null!=n?n:null,s,0,a,o),e[Es]=t.current,Xr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new su(t)},t.render=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!au(e))throw Error(i(40));return!!e._reactRootContainer&&(xc(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0)},t.unstable_batchedUpdates=vc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!au(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return lu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{205:"cdceed8a",484:"870e9290",551:"68202c19"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Ge){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="refer-earn-platform:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkrefer_earn_platform=self.webpackChunkrefer_earn_platform||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ge){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,m=r.Pop,p=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){m=r.Pop;let e=y(),t=null==e?null:e-g;g=e,p&&p({action:m,location:b.location,delta:t})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let b={get action(){return m},get location(){return e(i,u)},listen(e){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),p=e,()=>{i.removeEventListener(l,v),p=null}},createHref:e=>t(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){m=r.Push;let s=h(b.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=b.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&p&&p({action:m,location:b.location,delta:1})},replace:function(e,t){m=r.Replace;let s=h(b.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=b.createHref(s);u.replaceState(i,"",o),a&&p&&p({action:m,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=T(i[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=V([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:_(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))s(e,t,r);else s(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=b(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,E=2,k=1,I=10,j=-2,S=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(S)&&(r+=j),t&&(r+=E),n.filter(e=>!S(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?k:I),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:V([i,u.pathname]),pathnameBase:z(V([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=V([i,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function P(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?m(e):e;if(r)if(a=r,R.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?O(r.substring(1),"/"):O(r,t)}else n=t;var a;return{pathname:n,search:B(s),hash:q(i)}}function O(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=m(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),L("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),L("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),L("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=P(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],H=(new Set(K),["get",...K]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Q=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const X=s.createContext(null);const $=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(X)}function te(){return ee()||c(!1),s.useContext(X).location}function ne(e){s.useContext(Y).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext($);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=pe(he.UseNavigateStable),n=s.useRef(!1);return ne(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},s)))},[e,t])}():function(){ee()||c(!1);let e=s.useContext(Q),{basename:t,future:n,navigator:r}=s.useContext(Y),{matches:i}=s.useContext($),{pathname:a}=te(),o=JSON.stringify(U(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return ne(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:V([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(Y),{matches:i}=s.useContext($),{pathname:a}=te(),o=JSON.stringify(U(i,r.v7_relativeSplatPath));return s.useMemo(()=>F(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,i){ee()||c(!1);let{navigator:a}=s.useContext(Y),{matches:o}=s.useContext($),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var p;let e="string"===typeof t?m(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=y(e,{pathname:v});let b=ue(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&b?s.createElement(X.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},b):b}function ae(){let e=function(){var e;let t=s.useContext(Z),n=me(he.UseRouteError),r=pe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ae,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement($.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement($.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var m;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,u&&(d<0&&0===i?(m="route-fallback",!1||ge[m]||(ge[m]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(Q);return t||c(!1),t}function me(e){let t=s.useContext(J);return t||c(!1),t}function pe(e){let t=function(){let e=s.useContext($);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||c(!1);let{future:a,static:o}=s.useContext(Y),{matches:l}=s.useContext($),{pathname:u}=te(),d=re(),h=F(t,U(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function xe(e){c(!1)}function be(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;ee()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=m(i));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=i,x=s.useMemo(()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:a}},[d,f,p,g,y,v,a]);return null==x?null:s.createElement(Y.Provider,{value:h},s.createElement(X.Provider,{children:n,value:x}))}function we(e){let{children:t,location:n}=e;return ie(Ne(t),n)}new Promise(()=>{});s.Component;function Ne(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Ne(e.props.children,i));e.type!==xe&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,i)),n.push(a)}),n}var Ee=n(950),ke=n.t(Ee,2);function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function Se(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Te=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Ge){}const Ce=s.createContext({isTransitioning:!1});new Map;const Ae=i.startTransition;ke.flushSync,i.useId;function De(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),p(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,d]=s.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},y=s.useCallback(e=>{g&&Ae?Ae(()=>d(e)):d(e)},[d,g]);return s.useLayoutEffect(()=>l.listen(y),[l,y]),s.useEffect(()=>ye(r),[r]),s.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Re="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=je(e,_e),{basename:g}=s.useContext(Y),y=!1;if("string"===typeof d&&Pe.test(d)&&(n=d,Re))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Ge){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||c(!1);let{basename:r,navigator:i}=s.useContext(Y),{hash:a,pathname:o,search:l}=se(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:V([r,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),x=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=se(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});return s.createElement("a",Ie({},p,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:u}))});const Le=s.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=e,h=je(e,Te),f=se(l,{relative:h.relative}),m=te(),p=s.useContext(J),{navigator:g,basename:y}=s.useContext(Y),v=null!=p&&function(e,t){void 0===t&&(t={});let n=s.useContext(Ce);null==n&&c(!1);let{basename:r}=Fe(Me.useViewTransitionState),i=se(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=D(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=D(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=C(i.pathname,o)||null!=C(i.pathname,a)}(f)&&!0===u,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=m.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&y&&(w=D(w,y)||w);const N="/"!==x&&x.endsWith("/")?x.length-1:x.length;let E,k=b===x||!a&&b.startsWith(x)&&"/"===b.charAt(N),I=null!=w&&(w===x||!a&&w.startsWith(x)&&"/"===w.charAt(x.length)),j={isActive:k,isPending:I,isTransitioning:v},S=k?n:void 0;E="function"===typeof i?i(j):[i,k?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof o?o(j):o;return s.createElement(Oe,Ie({},h,{"aria-current":S,className:E,ref:t,style:_,to:l,viewTransition:u}),"function"===typeof d?d(j):d)});var Me,Ue;function Fe(e){let t=s.useContext(Q);return t||c(!1),t}function Ve(e){let t=s.useRef(Se(e)),n=s.useRef(!1),r=te(),i=s.useMemo(()=>function(e,t){let n=Se(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=re(),o=s.useCallback((e,t)=>{const r=Se("function"===typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Me||(Me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ue||(Ue={}));function ze(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function qe(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Be(t)?t:t+""}function We(e,t,n){return(t=qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Ge={data:""},Qe=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Ge},Je=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ye=/\/\*[^]*?\*\/|  +/g,Xe=/\n+/g,$e=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?$e(a,i):i+"{"+$e(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=$e(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=$e.p?$e.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Ze={},et=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+et(e[n]);return t}return e},tt=(e,t,n,r,s)=>{let i=et(e),a=Ze[i]||(Ze[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Ze[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=Je.exec(e.replace(Ye,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Xe," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Xe," ").trim();return r[0]})(e);Ze[a]=$e(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Ze.g?Ze.g:null;return n&&(Ze.g=Ze[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Ze[a],t,r,o),a};function nt(e){let t=this||{},n=e.call?e(t.p):e;return tt(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":$e(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Qe(t.target),t.g,t.o,t.k)}nt.bind({g:1});let rt,st,it,at=nt.bind({k:1});function ot(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:st&&st()},o),n.o=/ *go\d+/.test(l),o.className=nt.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),it&&c[0]&&it(o),rt(c,o)}return t?t(s):s}}var lt,ct,ut,dt,ht,ft,mt,pt,gt,yt,vt,xt,bt,wt,Nt,Et,kt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,It=(()=>{let e=0;return()=>(++e).toString()})(),jt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),St="default",_t=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return He(He({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return He(He({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?He(He({},e),t.toast):e)});case 2:let{toast:r}=t;return _t(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return He(He({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?He(He({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?He(He({},e),{},{toasts:[]}):He(He({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return He(He({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return He(He({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>He(He({},e),{},{pauseDuration:e.pauseDuration+i}))})}},Tt=[],Ct={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},At={},Dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;At[t]=_t(At[t]||Ct,e),Tt.forEach(e=>{let[n,r]=e;n===t&&r(At[t])})},Rt=e=>Object.keys(At).forEach(t=>Dt(e,t)),Pt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St;return t=>{Dt(t,e)}},Ot={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Lt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return He(He({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||It()})}(t,e,n);return Pt(r.toasterId||(e=>Object.keys(At).find(t=>At[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},Mt=(e,t)=>Lt("blank")(e,t);Mt.error=Lt("error"),Mt.success=Lt("success"),Mt.loading=Lt("loading"),Mt.custom=Lt("custom"),Mt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Pt(t)(n):Rt(n)},Mt.dismissAll=e=>Mt.dismiss(void 0,e),Mt.remove=(e,t)=>{let n={type:4,toastId:e};t?Pt(t)(n):Rt(n)},Mt.removeAll=e=>Mt.remove(void 0,e),Mt.promise=(e,t,n)=>{let r=Mt.loading(t.loading,He(He({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?kt(t.success,e):void 0;return s?Mt.success(s,He(He({id:r},n),null==n?void 0:n.success)):Mt.dismiss(r),e}).catch(e=>{let s=t.error?kt(t.error,e):void 0;s?Mt.error(s,He(He({id:r},n),null==n?void 0:n.error)):Mt.dismiss(r)}),e};var Ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St,[n,r]=(0,s.useState)(At[t]||Ct),i=(0,s.useRef)(At[t]);(0,s.useEffect)(()=>(i.current!==At[t]&&r(At[t]),Tt.push([t,r]),()=>{let e=Tt.findIndex(e=>{let[n]=e;return n===t});e>-1&&Tt.splice(e,1)}),[t]);let a=n.toasts.map(t=>{var n,r,s;return He(He(He(He({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ot[t.type],style:He(He(He({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return He(He({},n),{},{toasts:a})}(e,t),i=(0,s.useRef)(new Map).current,a=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,n)},[]);(0,s.useEffect)(()=>{if(r)return;let e=Date.now(),s=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>Mt.dismiss(n.id,t),r);n.visible&&Mt.dismiss(n.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let o=(0,s.useCallback)(Pt(t),[t]),l=(0,s.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,s.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,s.useCallback)(()=>{r&&o({type:6,time:Date.now()})},[r,o]),d=(0,s.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=t||{},a=n.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[n]);return(0,s.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},Ft=at(lt||(lt=ze(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Vt=at(ct||(ct=ze(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),zt=at(ut||(ut=ze(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Bt=ot("div")(dt||(dt=ze(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Ft,Vt,e=>e.secondary||"#fff",zt),qt=at(ht||(ht=ze(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Wt=ot("div")(ft||(ft=ze(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",qt),Kt=at(mt||(mt=ze(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ht=at(pt||(pt=ze(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Gt=ot("div")(gt||(gt=ze(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Kt,Ht,e=>e.secondary||"#fff"),Qt=ot("div")(yt||(yt=ze(["\n  position: absolute;\n"]))),Jt=ot("div")(vt||(vt=ze(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Yt=at(xt||(xt=ze(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Xt=ot("div")(bt||(bt=ze(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Yt),$t=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?s.createElement(Xt,null,n):n:"blank"===r?null:s.createElement(Jt,null,s.createElement(Wt,He({},i)),"loading"!==r&&s.createElement(Qt,null,"error"===r?s.createElement(Bt,He({},i)):s.createElement(Gt,He({},i))))},Zt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),en=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),tn=ot("div")(wt||(wt=ze(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),nn=ot("div")(Nt||(Nt=ze(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),rn=s.memo(e=>{let{toast:t,position:n,style:r,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=jt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Zt(n),en(n)];return{animation:t?"".concat(at(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(at(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=s.createElement($t,{toast:t}),l=s.createElement(nn,He({},t.ariaProps),kt(t.message,t));return s.createElement(tn,{className:t.className,style:He(He(He({},a),r),t.style)},"function"==typeof i?i({icon:o,message:l}):s.createElement(s.Fragment,null,o,l))});!function(e,t,n,r){$e.p=t,rt=e,st=n,it=r}(s.createElement);var sn=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:a}=e,o=s.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return s.createElement("div",{ref:o,className:n,style:r},a)},an=nt(Et||(Et=ze(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),on=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:i,children:a,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:u,handlers:d}=Ut(r,o);return s.createElement("div",{"data-rht-toaster":o||"",style:He({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return He(He({left:0,right:0,display:"flex",position:"absolute",transition:jt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(r,d.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return s.createElement(sn,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?an:"",style:o},"custom"===e.type?kt(e.message,e):a?a(e):s.createElement(rn,{toast:e,position:r}))}))},ln=Mt;const cn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(cn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new dn;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hn=function(e){return function(e){const t=cn(e);return un.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fn=function(e){try{return un.decodeString(e,!0)}catch(Ge){console.error("base64Decode failed: ",Ge)}return null};const mn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,pn=()=>{try{return mn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDOSPy-XiyeO6U5msKuzINnqvFqnD8C0e0",REACT_APP_FIREBASE_AUTH_DOMAIN:"refer-earn-platform.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"refer-earn-platform",REACT_APP_FIREBASE_STORAGE_BUCKET:"refer-earn-platform.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"886797203704",REACT_APP_FIREBASE_APP_ID:"1:886797203704:web:13a9b346c92d9fa0f2e30d",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-NV1ER35PM6",REACT_APP_ADMIN_UPI_ID:"referanearn@ptaxis",REACT_APP_ADMIN_EMAIL:"admin@refernearn.com",REACT_APP_API_URL:"http://localhost:3000"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Ge){return}const t=e&&fn(e[1]);return t&&JSON.parse(t)})()}catch(Ge){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Ge))}},gn=e=>{var t,n;return null===(n=null===(t=pn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},yn=e=>{const t=gn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},vn=()=>{var e;return null===(e=pn())||void 0===e?void 0:e.config},xn=e=>{var t;return null===(t=pn())||void 0===t?void 0:t["_".concat(e)]};class bn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function wn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Nn(){return!function(){var e;const t=null===(e=pn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Ge){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function En(){try{return"object"===typeof indexedDB}catch(Ge){return!1}}class kn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,In.prototype.create)}}class In{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(jn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new kn(n,i,t)}}const jn=/\{\$([^}]+)}/g;function Sn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(_n(n)&&_n(i)){if(!Sn(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _n(e){return null!==e&&"object"===typeof e}function Tn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function An(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Dn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Rn),void 0===r.error&&(r.error=Rn),void 0===r.complete&&(r.complete=Rn);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Ge){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Ge){"undefined"!==typeof console&&console.error&&console.error(Ge)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Pn(e){return e&&e._delegate?e._delegate:e}class On{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ln="[DEFAULT]";class Mn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new bn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Ge){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Ge){if(r)return null;throw Ge}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch(Ge){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Ge){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Ln?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln;return this.component?this.component.multipleInstances?e:Ln:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Un{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Fn=[];var Vn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vn||(Vn={}));const zn={debug:Vn.DEBUG,verbose:Vn.VERBOSE,info:Vn.INFO,warn:Vn.WARN,error:Vn.ERROR,silent:Vn.SILENT},Bn=Vn.INFO,qn={[Vn.DEBUG]:"log",[Vn.VERBOSE]:"log",[Vn.INFO]:"info",[Vn.WARN]:"warn",[Vn.ERROR]:"error"},Wn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=qn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Kn{constructor(e){this.name=e,this._logLevel=Bn,this._logHandler=Wn,this._userLogHandler=null,Fn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?zn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vn.DEBUG,...t),this._logHandler(this,Vn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vn.VERBOSE,...t),this._logHandler(this,Vn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vn.INFO,...t),this._logHandler(this,Vn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vn.WARN,...t),this._logHandler(this,Vn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vn.ERROR,...t),this._logHandler(this,Vn.ERROR,...t)}}let Hn,Gn;const Qn=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,Xn=new WeakMap,$n=new WeakMap;let Zn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Jn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function er(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gn||(Gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(rr(this),n),nr(Qn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nr(e.apply(rr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(rr(this),t,...r);return Yn.set(i,t.sort?t.sort():[t]),nr(i)}}function tr(e){return"function"===typeof e?er(e):(e instanceof IDBTransaction&&function(e){if(Jn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Jn.set(e,t)}(e),t=e,(Hn||(Hn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Zn):e);var t}function nr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(nr(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Qn.set(t,e)}).catch(()=>{}),$n.set(t,e),t}(e);if(Xn.has(e))return Xn.get(e);const t=tr(e);return t!==e&&(Xn.set(e,t),$n.set(t,e)),t}const rr=e=>$n.get(e);const sr=["get","getKey","getAll","getAllKeys","count"],ir=["put","add","delete","clear"],ar=new Map;function or(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ar.get(t))return ar.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=ir.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!sr.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return ar.set(t,i),i}Zn=(e=>He(He({},e),{},{get:(t,n,r)=>or(t,n)||e.get(t,n,r),has:(t,n)=>!!or(t,n)||e.has(t,n)}))(Zn);class lr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const cr="@firebase/app",ur="0.10.13",dr=new Kn("@firebase/app"),hr="@firebase/app-compat",fr="@firebase/analytics-compat",mr="@firebase/analytics",pr="@firebase/app-check-compat",gr="@firebase/app-check",yr="@firebase/auth",vr="@firebase/auth-compat",xr="@firebase/database",br="@firebase/data-connect",wr="@firebase/database-compat",Nr="@firebase/functions",Er="@firebase/functions-compat",kr="@firebase/installations",Ir="@firebase/installations-compat",jr="@firebase/messaging",Sr="@firebase/messaging-compat",_r="@firebase/performance",Tr="@firebase/performance-compat",Cr="@firebase/remote-config",Ar="@firebase/remote-config-compat",Dr="@firebase/storage",Rr="@firebase/storage-compat",Pr="@firebase/firestore",Or="@firebase/vertexai-preview",Lr="@firebase/firestore-compat",Mr="firebase",Ur="[DEFAULT]",Fr={[cr]:"fire-core",[hr]:"fire-core-compat",[mr]:"fire-analytics",[fr]:"fire-analytics-compat",[gr]:"fire-app-check",[pr]:"fire-app-check-compat",[yr]:"fire-auth",[vr]:"fire-auth-compat",[xr]:"fire-rtdb",[br]:"fire-data-connect",[wr]:"fire-rtdb-compat",[Nr]:"fire-fn",[Er]:"fire-fn-compat",[kr]:"fire-iid",[Ir]:"fire-iid-compat",[jr]:"fire-fcm",[Sr]:"fire-fcm-compat",[_r]:"fire-perf",[Tr]:"fire-perf-compat",[Cr]:"fire-rc",[Ar]:"fire-rc-compat",[Dr]:"fire-gcs",[Rr]:"fire-gcs-compat",[Pr]:"fire-fst",[Lr]:"fire-fst-compat",[Or]:"fire-vertex","fire-js":"fire-js",[Mr]:"fire-js-all"},Vr=new Map,zr=new Map,Br=new Map;function qr(e,t){try{e.container.addComponent(t)}catch(Ge){dr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Ge)}}function Wr(e){const t=e.name;if(Br.has(t))return dr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Br.set(t,e);for(const n of Vr.values())qr(n,e);for(const n of zr.values())qr(n,e);return!0}function Kr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Hr(e){return void 0!==e.settings}const Gr=new In("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Qr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new On("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}const Jr="10.14.1";function Yr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Gr.create("bad-app-name",{appName:String(s)});if(n||(n=vn()),!n)throw Gr.create("no-options");const i=Vr.get(s);if(i){if(Sn(n,i.options)&&Sn(r,i.config))return i;throw Gr.create("duplicate-app",{appName:s})}const a=new Un(s);for(const l of Br.values())a.addComponent(l);const o=new Qr(n,r,a);return Vr.set(s,o),o}function Xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur;const t=Vr.get(e);if(!t&&e===Ur&&vn())return Yr();if(!t)throw Gr.create("no-app",{appName:e});return t}function $r(e,t,n){var r;let s=null!==(r=Fr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void dr.warn(e.join(" "))}Wr(new On("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Zr="firebase-heartbeat-store";let es=null;function ts(){return es||(es=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=nr(a);return r&&a.addEventListener("upgradeneeded",e=>{r(nr(a.result),e.oldVersion,e.newVersion,nr(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zr)}catch(Ge){console.warn(Ge)}}}).catch(e=>{throw Gr.create("idb-open",{originalErrorMessage:e.message})})),es}async function ns(e,t){try{const n=(await ts()).transaction(Zr,"readwrite"),r=n.objectStore(Zr);await r.put(t,rs(e)),await n.done}catch(Ge){if(Ge instanceof kn)dr.warn(Ge.message);else{const t=Gr.create("idb-set",{originalErrorMessage:null===Ge||void 0===Ge?void 0:Ge.message});dr.warn(t.message)}}}function rs(e){return"".concat(e.name,"!").concat(e.options.appId)}class ss{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new as(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=is();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Ge){dr.warn(Ge)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=is(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),os(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),os(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=hn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Ge){return dr.warn(Ge),""}}}function is(){return(new Date).toISOString().substring(0,10)}class as{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!En()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ts()).transaction(Zr),n=await t.objectStore(Zr).get(rs(e));return await t.done,n}catch(Ge){if(Ge instanceof kn)dr.warn(Ge.message);else{const t=Gr.create("idb-get",{originalErrorMessage:null===Ge||void 0===Ge?void 0:Ge.message});dr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ns(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ns(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function os(e){return hn(JSON.stringify({version:2,heartbeats:e})).length}var ls;ls="",Wr(new On("platform-logger",e=>new lr(e),"PRIVATE")),Wr(new On("heartbeat",e=>new ss(e),"PRIVATE")),$r(cr,ur,ls),$r(cr,ur,"esm2017"),$r("fire-js","");$r("firebase","10.14.1","app");function cs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function us(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ds=us,hs=new In("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fs=new Kn("@firebase/auth");function ms(e){if(fs.logLevel<=Vn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fs.error("Auth (".concat(Jr,"): ").concat(e),...n)}}function ps(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xs(e,...n)}function gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xs(e,...n)}function ys(e,t,n){const r=Object.assign(Object.assign({},ds()),{[t]:n});return new In("auth","Firebase",r).create(t,{appName:e.name})}function vs(e){return ys(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return hs.create(e,...n)}function bs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw xs(t,...r)}}function ws(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ms(t),new Error(t)}function Ns(e,t){e||ws(t)}function Es(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ks(){return"http:"===Is()||"https:"===Is()}function Is(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function js(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ks()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ss{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ns(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return js()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _s(e,t){Ns(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ts{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},As=new Ss(3e4,6e4);function Ds(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Rs(e,t,n,r){return Ps(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Tn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ts.fetch()(Ls(e,e.config.apiHost,n,a),l)})}async function Ps(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Cs),t);try{const t=new Us(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Fs(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Fs(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Fs(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Fs(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ys(e,o,a);ps(e,o)}}catch(Ge){if(Ge instanceof kn)throw Ge;ps(e,"network-request-failed",{message:String(Ge)})}}async function Os(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Rs(e,t,n,r,s);return"mfaPendingCredential"in i&&ps(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Ls(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_s(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function Ms(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Us{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(gs(this.auth,"network-request-failed")),As.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gs(e,t,r);return s.customData._tokenResponse=n,s}function Vs(e){return void 0!==e&&void 0!==e.enterprise}class zs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ms(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Bs(e,t){return Rs(e,"GET","/v2/recaptchaConfig",Ds(e,t))}async function qs(e,t){return Rs(e,"POST","/v1/accounts:lookup",t)}function Ws(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Ge){}}function Ks(e){return 1e3*Number(e)}function Hs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ms("JWT malformed, contained fewer than 3 sections"),null;try{const e=fn(n);return e?JSON.parse(e):(ms("Failed to decode base64 JWT payload"),null)}catch(Ge){return ms("Caught error parsing JWT payload as JSON",null===Ge||void 0===Ge?void 0:Ge.toString()),null}}function Gs(e){const t=Hs(e);return bs(t,"internal-error"),bs("undefined"!==typeof t.exp,"internal-error"),bs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Qs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Ge){throw Ge instanceof kn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Ge)&&e.auth.currentUser===e&&await e.auth.signOut(),Ge}}class Js{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Ge){return void((null===Ge||void 0===Ge?void 0:Ge.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ys{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Qs(e,qs(n,{idToken:r}));bs(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?$s(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ys(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function $s(e){return e.map(e=>{var{providerId:t}=e,n=cs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bs(e.idToken,"internal-error"),bs("undefined"!==typeof e.idToken,"internal-error"),bs("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Gs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){bs(0!==e.length,"internal-error");const t=Gs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(bs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Ps(e,{},async()=>{const n=Tn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Ls(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ts.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Zs;return n&&(bs("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(bs("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(bs("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return ws("not implemented")}}function ei(e,t){bs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ti{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=cs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Js(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ys(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qs(this,this.stsTokenManager.getToken(this.auth,e));return bs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Pn(e),r=await n.getIdToken(t),s=Hs(r);bs(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ws(Ks(s.auth_time)),issuedAtTime:Ws(Ks(s.iat)),expirationTime:Ws(Ks(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Pn(e);await Xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(bs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){bs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await Qs(this,async function(e,t){return Rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:N}=t;bs(v&&N,e,"internal-error");const E=Zs.fromJSON(this.name,N);bs("string"===typeof v,e,"internal-error"),ei(u,e.name),ei(d,e.name),bs("boolean"===typeof x,e,"internal-error"),bs("boolean"===typeof b,e,"internal-error"),ei(h,e.name),ei(f,e.name),ei(m,e.name),ei(p,e.name),ei(g,e.name),ei(y,e.name);const k=new ti({uid:v,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(k.providerData=w.map(e=>Object.assign({},e))),p&&(k._redirectEventId=p),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zs;r.updateFromServerResponse(t);const s=new ti({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];bs(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?$s(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Zs;a.updateFromIdToken(n);const o=new ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ys(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const ni=new Map;function ri(e){Ns(e instanceof Function,"Expected a class definition");let t=ni.get(e);return t?(Ns(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ni.set(e,t),t)}class si{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}si.type="NONE";const ii=si;function ai(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ai(this.userKey,r.apiKey,s),this.fullPersistenceKey=ai("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oi(ri(ii),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ri(ii);const i=ai(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=ti._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new oi(s,e,n)):new oi(s,e,n)}}function li(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ci(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mi(t))return"Blackberry";if(pi(t))return"Webos";if(ui(t))return"Safari";if((t.includes("chrome/")||di(t))&&!t.includes("edge/"))return"Chrome";if(fi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/firefox\//i.test(e)}function ui(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/crios\//i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/iemobile/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/android/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/blackberry/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/webos/i.test(e)}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yi(){return function(){const e=wn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn();return gi(e)||fi(e)||pi(e)||mi(e)||/windows phone/i.test(e)||hi(e)}function xi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=li(wn());break;case"Worker":t="".concat(li(wn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Jr,"/").concat(r)}class bi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Ge){r(Ge)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Ge){t.reverse();for(const n of t)try{n()}catch(Rt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Ge||void 0===Ge?void 0:Ge.message})}}}class wi{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Ni{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new bi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hs,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Ge){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qs(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Ge){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Ge))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Ge){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xs(e)}catch(Ge){if((null===Ge||void 0===Ge?void 0:Ge.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(vs(this));const t=e?Pn(e):null;return t&&bs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&bs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rs(e,"GET","/v2/passwordPolicy",Ds(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new In("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rs(e,"POST","/v2/accounts:revokeToken",Ds(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ri(e)||this._popupRedirectResolver;bs(t,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(bs(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(fs.logLevel<=Vn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fs.warn("Auth (".concat(Jr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ei(e){return Pn(e)}class ki{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Dn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return bs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ii={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ji(e){return Ii.loadJS(e)}function Si(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class _i{constructor(e){this.type="recaptcha-enterprise",this.auth=Ei(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Vs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Bs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new zs(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Vs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ii.recaptchaEnterpriseScript;0!==t.length&&(t+=s),ji(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ti(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new _i(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ci(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ti(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Ti(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Ai(e,t,n){const r=Ei(e);bs(r._canInitEmulator,r,"emulator-config-failed"),bs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Di(t),{host:a,port:o}=function(e){const t=Di(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ri(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ri(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Di(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ri(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function Oi(e,t){return Rs(e,"POST","/v1/accounts:signUp",t)}async function Li(e,t){return Os(e,"POST","/v1/accounts:signInWithPassword",Ds(e,t))}class Mi extends Pi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Mi(e,t,"password")}static _fromEmailAndCode(e,t){return new Mi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ci(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Li);case"emailLink":return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithEmailLink",Ds(e,t))}(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ci(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oi);case"emailLink":return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithEmailLink",Ds(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ui(e,t){return Os(e,"POST","/v1/accounts:signInWithIdp",Ds(e,t))}class Fi extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=cs(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Fi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ui(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ui(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tn(t)}return e}}const Vi={USER_NOT_FOUND:"user-not-found"};class zi extends Pi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new zi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new zi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Ds(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Ds(e,t));if(n.temporaryProof)throw Fs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Ds(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Vi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new zi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Bi{constructor(e){var t,n,r,s,i,a;const o=Cn(An(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);bs(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Cn(An(e)).link,n=t?Cn(An(t)).deep_link_id:null,r=Cn(An(e)).deep_link_id;return(r?Cn(An(r)).link:null)||r||n||t||e}(e);try{return new Bi(t)}catch(n){return null}}}class qi{constructor(){this.providerId=qi.PROVIDER_ID}static credential(e,t){return Mi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Bi.parseLink(t);return bs(n,"argument-error"),Mi._fromEmailAndCode(e,n.code,n.tenantId)}}qi.PROVIDER_ID="password",qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ki extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hi extends Ki{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hi.credential(t.oauthAccessToken)}catch(n){return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hi.PROVIDER_ID="facebook.com";class Gi extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gi.credential(n,r)}catch(s){return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com",Gi.PROVIDER_ID="google.com";class Qi extends Ki{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qi.credential(t.oauthAccessToken)}catch(n){return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com",Qi.PROVIDER_ID="github.com";class Ji extends Ki{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ji.credential(n,r)}catch(s){return null}}}async function Yi(e,t){return Os(e,"POST","/v1/accounts:signUp",Ds(e,t))}Ji.TWITTER_SIGN_IN_METHOD="twitter.com",Ji.PROVIDER_ID="twitter.com";class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ti._fromIdTokenResponse(e,n,r),i=$i(n);return new Xi({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=$i(n);return new Xi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function $i(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Zi extends kn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Zi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Zi(e,t,n,r)}}function ea(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Zi._fromErrorAndOperation(e,n,t,r);throw n})}async function ta(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xi._forOperation(e,"link",r)}async function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Hr(r.app))return Promise.reject(vs(r));const s="reauthenticate";try{const i=await Qs(e,ea(r,s,t,e),n);bs(i.idToken,r,"internal-error");const a=Hs(i.idToken);bs(a,r,"internal-error");const{sub:o}=a;return bs(e.uid===o,r,"user-mismatch"),Xi._forOperation(e,s,i)}catch(Ge){throw(null===Ge||void 0===Ge?void 0:Ge.code)==="auth/".concat("user-not-found")&&ps(r,"user-mismatch"),Ge}}async function ra(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Hr(e.app))return Promise.reject(vs(e));const r="signIn",s=await ea(e,r,t),i=await Xi._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function sa(e,t){return ra(Ei(e),t)}async function ia(e){const t=Ei(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const aa="__sak";class oa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class la extends oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);yi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}la.type="LOCAL";const ca=la;class ua extends oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ua.type="SESSION";const da=ua;class ha{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ha(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ha.receivers=[];class ma{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=fa("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function pa(){return window}function ga(){return"undefined"!==typeof pa().WorkerGlobalScope&&"function"===typeof pa().importScripts}const ya="firebaseLocalStorageDb",va="firebaseLocalStorage",xa="fbase_key";class ba{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wa(e,t){return e.transaction([va],t?"readwrite":"readonly").objectStore(va)}function Na(){const e=indexedDB.open(ya,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(va,{keyPath:xa})}catch(Ge){n(Ge)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(va)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ya);return new ba(e).toPromise()}(),t(await Na()))})})}async function Ea(e,t,n){const r=wa(e,!0).put({[xa]:t,value:n});return new ba(r).toPromise()}function ka(e,t){const n=wa(e,!0).delete(t);return new ba(n).toPromise()}class Ia{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Na()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Ge){if(t++>3)throw Ge;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ga()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ha._getInstance(ga()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ma(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Na();return await Ea(e,aa,"1"),await ka(e,aa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ea(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=wa(e,!1).get(t),r=await new ba(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ka(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=wa(e,!1).getAll();return new ba(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ia.type="LOCAL";const ja=Ia;Si("rcb"),new Ss(3e4,6e4);const Sa="recaptcha";async function _a(e,t,n){var r;const s=await n.verify();try{let i;if(bs("string"===typeof s,e,"argument-error"),bs(n.type===Sa,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){bs("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Rs(e,"POST","/v2/accounts/mfaEnrollment:start",Ds(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{bs("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;bs(n,e,"missing-multi-factor-info");const a=await function(e,t){return Rs(e,"POST","/v2/accounts/mfaSignIn:start",Ds(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Rs(e,"POST","/v1/accounts:sendVerificationCode",Ds(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Ta{constructor(e){this.providerId=Ta.PROVIDER_ID,this.auth=Ei(e)}verifyPhoneNumber(e,t){return _a(this.auth,e,Pn(t))}static credential(e,t){return zi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ta.credentialFromTaggedObject(t)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?zi._fromTokenResponse(n,r):null}}function Ca(e,t){return t?ri(t):(bs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ta.PROVIDER_ID="phone",Ta.PHONE_SIGN_IN_METHOD="phone";class Aa extends Pi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ui(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Da(e){return ra(e.auth,new Aa(e),e.bypassAuthState)}function Ra(e){const{auth:t,user:n}=e;return bs(n,t,"internal-error"),na(n,new Aa(e),e.bypassAuthState)}async function Pa(e){const{auth:t,user:n}=e;return bs(n,t,"internal-error"),ta(n,new Aa(e),e.bypassAuthState)}class Oa{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Ge){this.reject(Ge)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Ge){this.reject(Ge)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Da;case"linkViaPopup":case"linkViaRedirect":return Pa;case"reauthViaPopup":case"reauthViaRedirect":return Ra;default:ps(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const La=new Ss(2e3,1e4);class Ma extends Oa{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bs(e,this.auth,"internal-error"),e}async onExecution(){Ns(1===this.filter.length,"Popup operations only handle one event");const e=fa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gs(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,La.get())};e()}}Ma.currentPopupAction=null;const Ua=new Map;class Fa extends Oa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ua.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ba(t),r=za(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Ge){e=()=>Promise.reject(Ge)}Ua.set(this.auth._key(),e)}return this.bypassAuthState||Ua.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Va(e,t){Ua.set(e._key(),t)}function za(e){return ri(e._redirectPersistence)}function Ba(e){return ai("pendingRedirect",e.config.apiKey,e.name)}async function qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Hr(e.app))return Promise.reject(vs(e));const r=Ei(e),s=Ca(r,t),i=new Fa(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Wa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ha(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ha(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(gs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ka(e))}saveEventToCache(e){this.cachedEventUids.add(Ka(e)),this.lastProcessedEventTime=Date.now()}}function Ka(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ha(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qa=/^https?/;async function Ja(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Rs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ya(r))return}catch(n){}ps(e,"unauthorized-domain")}function Ya(e){const t=Es(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Qa.test(n))return!1;if(Ga.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Xa=new Ss(3e4,6e4);function $a(){const e=pa().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Za(e){return new Promise((t,n)=>{var r,s,i;function a(){$a(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$a(),n(gs(e,"network-request-failed"))},timeout:Xa.get()})}if(null===(s=null===(r=pa().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=pa().gapi)||void 0===i?void 0:i.load)){const t=Si("iframefcb");return pa()[t]=()=>{gapi.load?a():n(gs(e,"network-request-failed"))},ji("".concat(Ii.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw eo=null,e})}let eo=null;const to=new Ss(5e3,15e3),no={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ro=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function so(e){const t=e.config;bs(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_s(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Jr},s=ro.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Tn(r).slice(1))}async function io(e){const t=await function(e){return eo=eo||Za(e),eo}(e),n=pa().gapi;return bs(n,e,"internal-error"),t.open({where:document.body,url:so(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:no,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=gs(e,"network-request-failed"),i=pa().setTimeout(()=>{r(s)},to.get());function a(){pa().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const ao={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Ge){}}}function lo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ao),{width:r.toString(),height:s.toString(),top:i,left:a}),c=wn().toLowerCase();n&&(o=di(c)?"_blank":n),ci(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return gi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new oo(null);const d=window.open(t||"",o,u);bs(d,e,"popup-blocked");try{d.focus()}catch(Ge){}return new oo(d)}const co="__/auth/handler",uo="emulator/auth/handler",ho=encodeURIComponent("fac");async function fo(e,t,n,r,s,i){bs(e.config.authDomain,e,"auth-domain-config-required"),bs(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Jr,eventId:s};if(t instanceof Wi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Ki){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ho,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(co);return _s(t,uo)}(e),"?").concat(Tn(o).slice(1)).concat(c)}const mo="webStorageSupport";const po=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=da,this._completeRedirectFn=qa,this._overrideRedirectResult=Va}async _openPopup(e,t,n,r){var s;Ns(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return lo(e,await fo(e,t,n,Es(),r),fa())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){pa().location.href=e}(await fo(e,t,n,Es(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ns(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await io(e),n=new Wa(e);return t.register("authEvent",t=>{bs(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mo,{type:mo},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[mo];void 0!==s&&t(!!s),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ja(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vi()||ui()||gi()}};var go="@firebase/auth",yo="1.7.9";class vo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xo=xn("authIdTokenMaxAge")||300;let bo=null;var wo;!function(e){Ii=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=gs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),wo="Browser",Wr(new On("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;bs(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:wo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xi(wo)},c=new Ni(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ri);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Wr(new On("auth-internal",e=>(e=>new vo(e))(Ei(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),$r(go,yo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wo)),$r(go,yo,"esm2017");var No,Eo,ko="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Io={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Eo=Io.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},No=Io.Integer=r}).apply("undefined"!==typeof ko?ko:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var jo,So,_o,To,Co,Ao,Do,Ro,Po="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Oo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Po&&Po];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){s.setTimeout(()=>{throw e},0)}function k(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new j,e=>e.reset());class j{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,_=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},C=()=>{const e=s.Promise.resolve(void 0);S=()=>{e.then(A)}};var A=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(Ze){E(Ze)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function D(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Ze){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(st){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),K={};function H(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)H(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function J(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)J(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;w(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,D),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}d(le,D);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function xe(){R.call(this,"c")}d(ve,R),d(xe,R);var be={},we=null;function Ne(){return we=we||new ne}function Ee(e){R.call(this,be.La,e)}function ke(e){const t=Ne();re(t,new Ee(t))}function Ie(e,t){R.call(this,be.STAT_EVENT,e),this.stat=t}function je(e){const t=Ne();re(t,new Ie(t,e))}function Se(e,t){R.call(this,be.Ma,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ce(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Ee,R),be.STAT_EVENT="statevent",d(Ie,R),be.Ma="timingevent",d(Se,R),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Pe,me),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ae=new Pe;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=vt(ft(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ft(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=H(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_e(c(e.ba,e),t)}function Ke(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||mn(e.j,e)}function Qe(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Je){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fn(n),nn(n)}un(n),je(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=_e(c(n.Za,n),6e3));if(1>=nt(n.h)&&n.ca){try{n.ca()}catch(Je){}n.ca=void 0}}else gn(n,11)}else if((e.K||n.g==e)&&fn(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,yt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=vn(r,r.J?r.ia:null,r.W),a.K){lt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Ke(o),qe(o)),r.g=a}else cn(r);0<n.i.length&&sn(n)}else"stop"!=c[0]&&"close"!=c[0]||gn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gn(n,7):tn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(Je){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Xt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Xt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=h||7==t||ke(),Ke(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=$t(this.g);e="";var i=r.length,a=4==Xt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qe(this),He(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,je(12),Qe(this),He(this);break e}Ce(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Ue){4==h&&(this.s=4,je(14),n=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,je(15),Ce(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ce(this.i,this.l,e,null),Xe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,je(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),dn(d),d.M=!0,je(11))}}else Ce(this.i,this.l,o,"[Invalid Chunked Response]"),Qe(this),He(this)}else Ce(this.i,this.l,o,null),Xe(this,o);4==h&&Qe(this),this.o&&!this.J&&(4==h?mn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Xt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Qe(this),He(this)}}}catch(ot){}},Oe.prototype.cancel=function(){this.J=!0,Qe(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),je(17)),Qe(this),this.s=2,He(this)):We(this,this.S-e)};var $e=class{constructor(e,t){this.g=e,this.map=t}};function et(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function nt(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function ut(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}et.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ht){this.h=e.h,mt(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new St;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gt(this,n),this.m=e.m}else e&&(t=String(e).match(dt))?(this.h=!1,mt(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),pt(this,t[4]),this.l=xt(t[5]||"",!0),gt(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new St(null,this.h))}function ft(e){return new ht(e)}function mt(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function gt(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),At(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=bt(t,It)),e.i=new St(t,e.h))}function yt(e,t,n){e.i.set(t,n)}function vt(e){return yt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ht.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bt(t,Nt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,Nt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?kt:Et,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,jt)),e.join("")};var Nt=/[#\/\?@]/g,Et=/[#\?:]/g,kt=/[#\?]/g,It=/[#\?@]/g,jt=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){_t(e),t=Dt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return _t(e),t=Dt(e,t),e.g.has(t)}function At(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(Dt(e,t),h(n)),e.h+=n.length)}function Dt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(st){}}function Pt(){this.g=new fe}function Ot(e,t,n){const r=n||"";try{ut(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Ge){throw t.push(r+"type="+encodeURIComponent("_badmap")),Ge}}function Lt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Mt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ut(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Vt(e)}function Vt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function zt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Bt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yt(e,t,n))}function qt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=St.prototype).add=function(e,t){_t(this),this.i=null,e=Dt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(Dt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,Ct(this,e=Dt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Lt,me),Lt.prototype.g=function(){return new Mt(this.l,this.j)},Lt.prototype.i=function(e){return function(){return e}}({}),d(Mt,ne),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Vt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vt(this)),this.g&&(this.readyState=3,Vt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ut(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Vt(this),3==this.readyState&&Ut(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(qt,ne);var Wt=/^https?$/i,Kt=["POST","PUT"];function Ht(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Gt(e),Jt(e)}function Gt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Xt(e)||2!=e.Z()))if(e.u&&4==Xt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(dt)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Wt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Xt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Gt(e)}}finally{Jt(e)}}}function Jt(e,t){if(e.g){Yt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Ge){}}}function Yt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Xt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function en(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zt("baseRetryDelayMs",5e3,e),this.cb=Zt("retryDelaySeedMs",1e4,e),this.Wa=Zt("forwardChannelMaxRetries",2,e),this.wa=Zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new et(e&&e.concurrentRequestLimit),this.Da=new Pt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tn(e){if(rn(e),3==e.G){var t=e.U++,n=ft(e.I);if(yt(n,"SID",e.K),yt(n,"RID",t),yt(n,"TYPE","terminate"),on(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=vt(ft(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(rt){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}yn(e)}function nn(e){e.g&&(dn(e),e.g.cancel(),e.g=null)}function rn(e){nn(e),e.u&&(s.clearTimeout(e.u),e.u=null),fn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function sn(e){if(!tt(e.h)&&!e.s){e.s=!0;var t=e.Ga;S||C(),_||(S(),_=!0),T.add(t,e),e.B=0}}function an(e,t){var n;n=t?t.l:e.U++;const r=ft(e.I);yt(r,"SID",e.K),yt(r,"RID",n),yt(r,"AID",e.T),on(e,r),e.m&&e.o&&Bt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=ln(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),Fe(n,r,t)}function on(e,t){e.H&&v(e.H,function(e,n){yt(t,n,e)}),e.l&&ut({},function(e,n){yt(t,n,e)})}function ln(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Ot(o,e,"req"+n+"_")}catch(ot){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function cn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;S||C(),_||(S(),_=!0),T.add(t,e),e.v=0}}function un(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=_e(c(e.Fa,e),pn(e,e.v)),e.v++,!0)}function dn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function hn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ft(e.qa);yt(t,"RID","rpc"),yt(t,"SID",e.K),yt(t,"AID",e.T),yt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&yt(t,"TO",e.ja),yt(t,"TYPE","xmlhttp"),on(e,t),e.m&&e.o&&Bt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=vt(ft(t)),n.m=null,n.P=!0,Ve(n,e)}function fn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function mn(e,t){var n=null;if(e.g==t){fn(e),dn(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,lt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Se(r,n)),sn(e)}else cn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(nt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=_e(c(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:gn(e,5);break;case 4:gn(e,10);break;case 3:gn(e,6);break;default:gn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function gn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ht(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||mt(r,"https"),vt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Rt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else je(2);e.G=0,e.l&&e.l.sa(t),yn(e),rn(e)}function yn(e){if(e.G=0,e.ka=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function vn(e,t,n){var r=n instanceof ht?ft(n):new ht(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ht(null);r&&mt(a,r),t&&(a.g=t),i&&pt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&yt(r,n,t),yt(r,"VER",e.la),on(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new qt(new Lt({eb:n})):new qt(e.pa)).Ha(e.J),t}function bn(){}function wn(){}function Nn(e,t){ne.call(this),this.g=new en(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function En(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){xe.call(this),this.status=1}function In(e){this.g=e}(e=qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(st){return void Ht(this,st)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Kt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yt(this),this.u=!0,this.g.send(e),this.u=!1}catch(st){Ht(this,st)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jt(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Qt(this):this.bb())},e.bb=function(){Qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch(Ye){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ye){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=en.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){je(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=vn(this,null,this.W),sn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ln(this,s,t),yt(n=ft(this.I),"RID",e),yt(n,"CVER",22),this.D&&yt(n,"X-HTTP-Session-Id",this.D),on(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(zt(i)))+"&"+t:this.m&&Bt(n,this.m,i)),at(this.h,s),this.Ua&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",t),yt(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?an(this,e):0==this.i.length||tt(this.h)||an(this))},e.Fa=function(){if(this.u=null,hn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=_e(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),nn(this),hn(this))},e.Za=function(){null!=this.C&&(this.C=null,nn(this),un(this),je(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},wn.prototype.g=function(e,t){return new Nn(e,t)},d(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){tn(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new $e(t.Ya++,e)),3==t.G&&sn(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,Nn.aa.N.call(this)},d(En,ve),d(kn,xe),d(In,bn),In.prototype.ua=function(){re(this.g,"a")},In.prototype.ta=function(e){re(this.g,new En(e))},In.prototype.sa=function(e){re(this.g,new kn)},In.prototype.ra=function(){re(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Ro=Oo.createWebChannelTransport=function(){return new wn},Do=Oo.getStatEventTarget=function(){return Ne()},Ao=Oo.Event=be,Co=Oo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,To=Oo.ErrorCode=De,Re.COMPLETE="complete",_o=Oo.EventType=Re,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,So=Oo.WebChannel=ge,Oo.FetchXmlHttpFactory=Lt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,jo=Oo.XhrIo=qt}).apply("undefined"!==typeof Po?Po:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Lo="@firebase/firestore";class Mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mo.UNAUTHENTICATED=new Mo(null),Mo.GOOGLE_CREDENTIALS=new Mo("google-credentials-uid"),Mo.FIRST_PARTY=new Mo("first-party-uid"),Mo.MOCK_USER=new Mo("mock-user");let Uo="10.14.0";const Fo=new Kn("@firebase/firestore");function Vo(){return Fo.logLevel}function zo(e){if(Fo.logLevel<=Vn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.debug("Firestore (".concat(Uo,"): ").concat(e),...s)}}function Bo(e){if(Fo.logLevel<=Vn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.error("Firestore (".concat(Uo,"): ").concat(e),...s)}}function qo(e){if(Fo.logLevel<=Vn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.warn("Firestore (".concat(Uo,"): ").concat(e),...s)}}function Wo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Qe){return e}}function Ko(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Uo,") INTERNAL ASSERTION FAILED: ")+e;throw Bo(t),new Error(t)}function Ho(e,t){e||Ko()}function Go(e,t){return e}const Qo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jo extends kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $o{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mo.UNAUTHENTICATED))}shutdown(){}}class Zo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class el{constructor(e){this.t=e,this.currentUser=Mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ho(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yo,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{zo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yo)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ho("string"==typeof t.accessToken),new Xo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ho(null===e||"string"==typeof e),new Mo(e)}}class tl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new tl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ho(void 0===this.o);const n=e=>{null!=e.error&&zo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,zo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):zo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ho("string"==typeof e.token),this.R=e.token,new rl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function il(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class al{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=il(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function ol(e,t){return e<t?-1:e>t?1:0}function ll(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function cl(e){return e+"\0"}class ul{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jo(Qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jo(Qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jo(Qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jo(Qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ul.fromMillis(Date.now())}static fromDate(e){return ul.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ul(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ol(this.nanoseconds,e.nanoseconds):ol(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dl(e)}static min(){return new dl(new ul(0,0))}static max(){return new dl(new ul(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ko(),void 0===n?n=e.length-t:n>e.length-t&&Ko(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===hl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fl extends hl{construct(e,t,n){return new fl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new fl(e)}static emptyPath(){return new fl([])}}const ml=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pl extends hl{construct(e,t,n){return new pl(e,t,n)}static isValidIdentifier(e){return ml.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Jo(Qo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Jo(Qo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Jo(Qo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pl(t)}static emptyPath(){return new pl([])}}class gl{constructor(e){this.path=e}static fromPath(e){return new gl(fl.fromString(e))}static fromName(e){return new gl(fl.fromString(e).popFirst(5))}static empty(){return new gl(fl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gl(new fl(e.slice()))}}class yl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function vl(e){return e.fields.find(e=>2===e.kind)}function xl(e){return e.fields.filter(e=>2!==e.kind)}yl.UNKNOWN_ID=-1;class bl{constructor(e,t){this.fieldPath=e,this.kind=t}}class wl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wl(0,kl.min())}}function Nl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=dl.fromTimestamp(1e9===r?new ul(n+1,0):new ul(n,r));return new kl(s,gl.empty(),t)}function El(e){return new kl(e.readTime,e.key,-1)}class kl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new kl(dl.min(),gl.empty(),-1)}static max(){return new kl(dl.max(),gl.empty(),-1)}}function Il(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=gl.comparator(e.documentKey,t.documentKey),0!==n?n:ol(e.largestBatchId,t.largestBatchId))}const jl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _l(e){if(e.code!==Qo.FAILED_PRECONDITION||e.message!==jl)throw e;zo("LocalStore","Unexpectedly lost primary lease")}class Tl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ko(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Tl?t:Tl.resolve(t)}catch(e){return Tl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Tl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Tl.reject(t)}static resolve(e){return new Tl((t,n)=>{t(e)})}static reject(e){return new Tl((t,n)=>{n(e)})}static waitFor(e){return new Tl((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Tl.resolve(!1);for(const n of e)t=t.next(e=>e?Tl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Tl((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Tl((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}class Cl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Yo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Pl(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Fl(t.target.error);this.V.reject(new Pl(e,n))}}static open(e,t,n,r){try{return new Cl(t,e.transaction(r,n))}catch(e){throw new Pl(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(zo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ll(t)}}class Al{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Al.S(wn())&&Bo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return zo("SimpleDb","Removing database:",e),Ml(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!En())return!1;if(Al.v())return!0;const e=wn(),t=Al.S(e),n=0<t&&t<10,r=Dl(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(zo("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Pl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Jo(Qo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Jo(Qo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Pl(e,r))},r.onupgradeneeded=e=>{zo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next(()=>{zo("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.M(e);const t=Cl.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),Tl.reject(e))).toPromise();return i.catch(()=>{}),await t.m,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(zo("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Dl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Rl{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ml(this.B.delete())}}class Pl extends Jo{constructor(e,t){super(Qo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ol(e){return"IndexedDbTransactionError"===e.name}class Ll{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(zo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(zo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ml(n)}add(e){return zo("SimpleDb","ADD",this.store.name,e,e),Ml(this.store.add(e))}get(e){return Ml(this.store.get(e)).next(t=>(void 0===t&&(t=null),zo("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return zo("SimpleDb","DELETE",this.store.name,e),Ml(this.store.delete(e))}count(){return zo("SimpleDb","COUNT",this.store.name),Ml(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Tl((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Tl((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}j(e,t){zo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Tl((n,r)=>{t.onerror=e=>{const t=Fl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new Tl((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Rl(s),a=t(s.primaryKey,s.value,i);if(a instanceof Tl){const e=a.catch(e=>(i.done(),Tl.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>Tl.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ml(e){return new Tl((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Fl(e.target.error);n(t)}})}let Ul=!1;function Fl(e){const t=Al.S(wn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Jo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ul||(Ul=!0,setTimeout(()=>{throw e},0)),e}}return e}class Vl{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){zo("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{zo("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Ol(e)?zo("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await _l(e)}await this.X(6e4)})}}class zl{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let r=t,s=!0;return Tl.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return zo("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,n)).next(n=>(zo("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}re(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=El(t);Il(r,n)>0&&(n=r)}),new kl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Bl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ql(e){return null==e}function Wl(e){return 0===e&&1/e==-1/0}function Kl(e){return"number"==typeof e&&Number.isInteger(e)&&!Wl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Hl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ql(t)),t=Gl(e.get(n),t);return Ql(t)}function Gl(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ql(e){return e+"\x01\x01"}function Jl(e){const t=e.length;if(Ho(t>=2),2===t)return Ho("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fl.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&Ko(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:Ko()}i=t+2}return new fl(r)}Bl.oe=-1;const Yl=["userId","batchId"];function Xl(e,t){return[e,Hl(t)]}function $l(e,t,n){return[e,Hl(t),n]}const Zl={},ec=["prefixPath","collectionGroup","readTime","documentId"],tc=["prefixPath","collectionGroup","documentId"],nc=["collectionGroup","readTime","prefixPath","documentId"],rc=["canonicalId","targetId"],sc=["targetId","path"],ic=["path","targetId"],ac=["collectionId","parent"],oc=["indexId","uid"],lc=["uid","sequenceNumber"],cc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uc=["indexId","uid","orderedDocumentKey"],dc=["userId","collectionPath","documentId"],hc=["userId","collectionPath","largestBatchId"],fc=["userId","collectionGroup","largestBatchId"],mc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pc=[...mc,"documentOverlays"],gc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yc=gc,vc=[...yc,"indexConfiguration","indexState","indexEntries"],xc=vc,bc=[...vc,"globals"];class wc extends Sl{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Nc(e,t){const n=Go(e);return Al.F(n._e,t)}function Ec(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ic(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jc{constructor(e,t){this.comparator=e,this.root=t||_c.EMPTY}insert(e,t){return new jc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_c.BLACK,null,null))}remove(e){return new jc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_c.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _c{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:_c.RED,this.left=null!=r?r:_c.EMPTY,this.right=null!=s?s:_c.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new _c(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _c.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return _c.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_c.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ko();if(this.right.isRed())throw Ko();const e=this.left.check();if(e!==this.right.check())throw Ko();return e+(this.isRed()?0:1)}}_c.EMPTY=null,_c.RED=!0,_c.BLACK=!1,_c.EMPTY=new class{constructor(){this.size=0}get key(){throw Ko()}get value(){throw Ko()}get color(){throw Ko()}get left(){throw Ko()}get right(){throw Ko()}copy(e,t,n,r,s){return this}insert(e,t,n){return new _c(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tc{constructor(e){this.comparator=e,this.data=new jc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cc(this.data.getIterator())}getIteratorFrom(e){return new Cc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Tc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tc(this.comparator);return t.data=e,t}}class Cc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ac(e){return e.hasNext()?e.getNext():void 0}class Dc{constructor(e){this.fields=e,e.sort(pl.comparator)}static empty(){return new Dc([])}unionWith(e){let t=new Tc(pl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Dc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Rc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Rc("Invalid base64 string: "+e):e}}(e);return new Pc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Pc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ol(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pc.EMPTY_BYTE_STRING=new Pc("");const Oc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lc(e){if(Ho(!!e),"string"==typeof e){let t=0;const n=Oc.exec(e);if(Ho(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mc(e.seconds),nanos:Mc(e.nanos)}}function Mc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uc(e){return"string"==typeof e?Pc.fromBase64String(e):Pc.fromUint8Array(e)}function Fc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vc(e){const t=e.mapValue.fields.__previous_value__;return Fc(t)?Vc(t):t}function zc(e){const t=Lc(e.mapValue.fields.__local_write_time__.timestampValue);return new ul(t.seconds,t.nanos)}class Bc{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}const Wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kc={nullValue:"NULL_VALUE"};function Hc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fc(e)?4:lu(e)?9007199254740991:au(e)?10:11:Ko()}function Gc(e,t){if(e===t)return!0;const n=Hc(e);if(n!==Hc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zc(e).isEqual(zc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Lc(e.timestampValue),r=Lc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uc(e.bytesValue).isEqual(Uc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mc(e.geoPointValue.latitude)===Mc(t.geoPointValue.latitude)&&Mc(e.geoPointValue.longitude)===Mc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mc(e.integerValue)===Mc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Mc(e.doubleValue),r=Mc(t.doubleValue);return n===r?Wl(n)===Wl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],Gc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ec(n)!==Ec(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Gc(n[s],r[s])))return!1;return!0}(e,t);default:return Ko()}}function Qc(e,t){return void 0!==(e.values||[]).find(e=>Gc(e,t))}function Jc(e,t){if(e===t)return 0;const n=Hc(e),r=Hc(t);if(n!==r)return ol(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ol(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Mc(e.integerValue||e.doubleValue),r=Mc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yc(e.timestampValue,t.timestampValue);case 4:return Yc(zc(e),zc(t));case 5:return ol(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Uc(e),r=Uc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=ol(n[s],r[s]);if(0!==e)return e}return ol(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ol(Mc(e.latitude),Mc(t.latitude));return 0!==n?n:ol(Mc(e.longitude),Mc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Xc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=ol((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Xc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Wc.mapValue&&t===Wc.mapValue)return 0;if(e===Wc.mapValue)return 1;if(t===Wc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=ol(r[a],i[a]);if(0!==e)return e;const t=Jc(n[r[a]],s[i[a]]);if(0!==t)return t}return ol(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Ko()}}function Yc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ol(e,t);const n=Lc(e),r=Lc(t),s=ol(n.seconds,r.seconds);return 0!==s?s:ol(n.nanos,r.nanos)}function Xc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Jc(n[s],r[s]);if(e)return e}return ol(n.length,r.length)}function $c(e){return Zc(e)}function Zc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Lc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Uc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return gl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Zc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Zc(e.fields[s]));return n+"}"}(e.mapValue):Ko()}function eu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tu(e){return!!e&&"integerValue"in e}function nu(e){return!!e&&"arrayValue"in e}function ru(e){return!!e&&"nullValue"in e}function su(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iu(e){return!!e&&"mapValue"in e}function au(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ou(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return kc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ou(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ou(e.arrayValue.values[n]);return t}return Object.assign({},e)}function lu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const cu={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function uu(e){return"nullValue"in e?Kc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?eu(qc.empty(),gl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?au(e)?cu:{mapValue:{}}:Ko()}function du(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?eu(qc.empty(),gl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?cu:"mapValue"in e?au(e)?{mapValue:{}}:Wc:Ko()}function hu(e,t){const n=Jc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function fu(e,t){const n=Jc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mu{constructor(e){this.value=e}static empty(){return new mu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!iu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=pl.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=ou(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());iu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){kc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new mu(ou(this.value))}}function pu(e){const t=[];return kc(e.fields,(e,n)=>{const r=new pl([e]);if(iu(n)){const e=pu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Dc(t)}class gu{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new gu(e,0,dl.min(),dl.min(),dl.min(),mu.empty(),0)}static newFoundDocument(e,t,n,r){return new gu(e,1,t,dl.min(),n,r,0)}static newNoDocument(e,t){return new gu(e,2,t,dl.min(),dl.min(),mu.empty(),0)}static newUnknownDocument(e,t){return new gu(e,3,t,dl.min(),dl.min(),mu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class yu{constructor(e,t){this.position=e,this.inclusive=t}}function vu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?gl.comparator(gl.fromName(a.referenceValue),n.key):Jc(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function xu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gc(e.position[n],t.position[n]))return!1;return!0}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function wu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Nu{}class Eu extends Nu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ru(e,t,n):"array-contains"===t?new Mu(e,n):"in"===t?new Uu(e,n):"not-in"===t?new Fu(e,n):"array-contains-any"===t?new Vu(e,n):new Eu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pu(e,n):new Ou(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jc(t,this.value)):null!==t&&Hc(this.value)===Hc(t)&&this.matchesComparison(Jc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ko()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ku extends Nu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ku(e,t)}matches(e){return Iu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Iu(e){return"and"===e.op}function ju(e){return"or"===e.op}function Su(e){return _u(e)&&Iu(e)}function _u(e){for(const t of e.filters)if(t instanceof ku)return!1;return!0}function Tu(e){if(e instanceof Eu)return e.field.canonicalString()+e.op.toString()+$c(e.value);if(Su(e))return e.filters.map(e=>Tu(e)).join(",");{const t=e.filters.map(e=>Tu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Cu(e,t){return e instanceof Eu?function(e,t){return t instanceof Eu&&e.op===t.op&&e.field.isEqual(t.field)&&Gc(e.value,t.value)}(e,t):e instanceof ku?function(e,t){return t instanceof ku&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Cu(n,t.filters[r]),!0)}(e,t):void Ko()}function Au(e,t){const n=e.filters.concat(t);return ku.create(n,e.op)}function Du(e){return e instanceof Eu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($c(e.value))}(e):e instanceof ku?function(e){return e.op.toString()+" {"+e.getFilters().map(Du).join(" ,")+"}"}(e):"Filter"}class Ru extends Eu{constructor(e,t,n){super(e,t,n),this.key=gl.fromName(n.referenceValue)}matches(e){const t=gl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pu extends Eu{constructor(e,t){super(e,"in",t),this.keys=Lu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ou extends Eu{constructor(e,t){super(e,"not-in",t),this.keys=Lu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>gl.fromName(e.referenceValue))}class Mu extends Eu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nu(t)&&Qc(t.arrayValue,this.value)}}class Uu extends Eu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qc(this.value.arrayValue,t)}}class Fu extends Eu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qc(this.value.arrayValue,t)}}class Vu extends Eu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Qc(this.value.arrayValue,e))}}class zu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Bu(e){return new zu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function qu(e){const t=Go(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Tu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ql(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>$c(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>$c(e)).join(",")),t.ue=e}return t.ue}function Wu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xu(e.startAt,t.startAt)&&xu(e.endAt,t.endAt)}function Ku(e){return gl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hu(e,t){return e.filters.filter(e=>e instanceof Eu&&e.field.isEqual(t))}function Gu(e,t,n){let r=Kc,s=!0;for(const i of Hu(e,t)){let e=Kc,t=!0;switch(i.op){case"<":case"<=":e=uu(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=Kc}hu({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];hu({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function Qu(e,t,n){let r=Wc,s=!0;for(const i of Hu(e,t)){let e=Wc,t=!0;switch(i.op){case">=":case">":e=du(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=Wc}fu({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];fu({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class Ju{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Yu(e,t,n,r,s,i,a,o){return new Ju(e,t,n,r,s,i,a,o)}function Xu(e){return new Ju(e)}function $u(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Zu(e){return null!==e.collectionGroup}function ed(e){const t=Go(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Tc(pl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new bu(r,n))}),e.has(pl.keyField().canonicalString())||t.ce.push(new bu(pl.keyField(),n))}return t.ce}function td(e){const t=Go(e);return t.le||(t.le=nd(t,ed(e))),t.le}function nd(e,t){if("F"===e.limitType)return Bu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new bu(e.field,t)});const n=e.endAt?new yu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new yu(e.startAt.position,e.startAt.inclusive):null;return Bu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function rd(e,t){const n=e.filters.concat([t]);return new Ju(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sd(e,t,n){return new Ju(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function id(e,t){return Wu(td(e),td(t))&&e.limitType===t.limitType}function ad(e){return"".concat(qu(td(e)),"|lt:").concat(e.limitType)}function od(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Du(e)).join(", "),"]")),ql(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>$c(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>$c(e)).join(",")),"Target(".concat(t,")")}(td(e)),"; limitType=").concat(e.limitType,")")}function ld(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):gl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ed(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=vu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ed(e),t))&&!(e.endAt&&!function(e,t,n){const r=vu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ed(e),t))}(e,t)}function cd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ud(e){return(t,n)=>{let r=!1;for(const s of ed(e)){const e=dd(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function dd(e,t,n){const r=e.field.isKeyField()?gl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Jc(r,s):Ko()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ko()}}class hd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ic(this.inner)}size(){return this.innerSize}}const fd=new jc(gl.comparator);function md(){return fd}const pd=new jc(gl.comparator);function gd(){let e=pd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function yd(e){let t=pd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function vd(){return bd()}function xd(){return bd()}function bd(){return new hd(e=>e.toString(),(e,t)=>e.isEqual(t))}const wd=new jc(gl.comparator),Nd=new Tc(gl.comparator);function Ed(){let e=Nd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const kd=new Tc(ol);function Id(){return kd}function jd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(t)?"-0":t}}function Sd(e){return{integerValue:""+e}}function _d(e,t){return Kl(t)?Sd(t):jd(e,t)}class Td{constructor(){this._=void 0}}function Cd(e,t,n){return e instanceof Rd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Fc(t)&&(t=Vc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pd?Od(e,t):e instanceof Ld?Md(e,t):function(e,t){const n=Dd(e,t),r=Fd(n)+Fd(e.Pe);return tu(n)&&tu(e.Pe)?Sd(r):jd(e.serializer,r)}(e,t)}function Ad(e,t,n){return e instanceof Pd?Od(e,t):e instanceof Ld?Md(e,t):n}function Dd(e,t){return e instanceof Ud?function(e){return tu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Rd extends Td{}class Pd extends Td{constructor(e){super(),this.elements=e}}function Od(e,t){const n=Vd(t);for(const r of e.elements)n.some(e=>Gc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ld extends Td{constructor(e){super(),this.elements=e}}function Md(e,t){let n=Vd(t);for(const r of e.elements)n=n.filter(e=>!Gc(e,r));return{arrayValue:{values:n}}}class Ud extends Td{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fd(e){return Mc(e.integerValue||e.doubleValue)}function Vd(e){return nu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class zd{constructor(e,t){this.field=e,this.transform=t}}class Bd{constructor(e,t){this.version=e,this.transformResults=t}}class qd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qd}static exists(e){return new qd(void 0,e)}static updateTime(e){return new qd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Kd{}function Hd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nh(e.key,qd.none()):new Xd(e.key,e.data,qd.none());{const n=e.data,r=mu.empty();let s=new Tc(pl.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new $d(e.key,r,new Dc(s.toArray()),qd.none())}}function Gd(e,t,n){e instanceof Xd?function(e,t,n){const r=e.value.clone(),s=eh(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $d?function(e,t,n){if(!Wd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=eh(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Zd(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qd(e,t,n,r){return e instanceof Xd?function(e,t,n,r){if(!Wd(e.precondition,t))return n;const s=e.value.clone(),i=th(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof $d?function(e,t,n,r){if(!Wd(e.precondition,t))return n;const s=th(e.fieldTransforms,r,t),i=t.data;return i.setAll(Zd(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Wd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Dd(r.transform,e||null);null!=s&&(null===n&&(n=mu.empty()),n.set(r.field,s))}return n||null}function Yd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ll(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pd&&t instanceof Pd||e instanceof Ld&&t instanceof Ld?ll(e.elements,t.elements,Gc):e instanceof Ud&&t instanceof Ud?Gc(e.Pe,t.Pe):e instanceof Rd&&t instanceof Rd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xd extends Kd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $d extends Kd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Zd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function eh(e,t,n){const r=new Map;Ho(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Ad(a,o,n[s]))}return r}function th(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Cd(e,i,t))}return r}class nh extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rh extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xd();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Hd(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(dl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ed())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(e,t)=>Yd(e,t))&&ll(this.baseMutations,e.baseMutations,(e,t)=>Yd(e,t))}}class ih{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ho(e.mutations.length===n.length);let r=wd;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new ih(e,t,n,r)}}class ah{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class oh{constructor(e,t){this.count=e,this.unchangedNames=t}}var lh,ch;function uh(e){switch(e){default:return Ko();case Qo.CANCELLED:case Qo.UNKNOWN:case Qo.DEADLINE_EXCEEDED:case Qo.RESOURCE_EXHAUSTED:case Qo.INTERNAL:case Qo.UNAVAILABLE:case Qo.UNAUTHENTICATED:return!1;case Qo.INVALID_ARGUMENT:case Qo.NOT_FOUND:case Qo.ALREADY_EXISTS:case Qo.PERMISSION_DENIED:case Qo.FAILED_PRECONDITION:case Qo.ABORTED:case Qo.OUT_OF_RANGE:case Qo.UNIMPLEMENTED:case Qo.DATA_LOSS:return!0}}function dh(e){if(void 0===e)return Bo("GRPC error has no .code"),Qo.UNKNOWN;switch(e){case lh.OK:return Qo.OK;case lh.CANCELLED:return Qo.CANCELLED;case lh.UNKNOWN:return Qo.UNKNOWN;case lh.DEADLINE_EXCEEDED:return Qo.DEADLINE_EXCEEDED;case lh.RESOURCE_EXHAUSTED:return Qo.RESOURCE_EXHAUSTED;case lh.INTERNAL:return Qo.INTERNAL;case lh.UNAVAILABLE:return Qo.UNAVAILABLE;case lh.UNAUTHENTICATED:return Qo.UNAUTHENTICATED;case lh.INVALID_ARGUMENT:return Qo.INVALID_ARGUMENT;case lh.NOT_FOUND:return Qo.NOT_FOUND;case lh.ALREADY_EXISTS:return Qo.ALREADY_EXISTS;case lh.PERMISSION_DENIED:return Qo.PERMISSION_DENIED;case lh.FAILED_PRECONDITION:return Qo.FAILED_PRECONDITION;case lh.ABORTED:return Qo.ABORTED;case lh.OUT_OF_RANGE:return Qo.OUT_OF_RANGE;case lh.UNIMPLEMENTED:return Qo.UNIMPLEMENTED;case lh.DATA_LOSS:return Qo.DATA_LOSS;default:return Ko()}}(ch=lh||(lh={}))[ch.OK=0]="OK",ch[ch.CANCELLED=1]="CANCELLED",ch[ch.UNKNOWN=2]="UNKNOWN",ch[ch.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ch[ch.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ch[ch.NOT_FOUND=5]="NOT_FOUND",ch[ch.ALREADY_EXISTS=6]="ALREADY_EXISTS",ch[ch.PERMISSION_DENIED=7]="PERMISSION_DENIED",ch[ch.UNAUTHENTICATED=16]="UNAUTHENTICATED",ch[ch.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ch[ch.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ch[ch.ABORTED=10]="ABORTED",ch[ch.OUT_OF_RANGE=11]="OUT_OF_RANGE",ch[ch.UNIMPLEMENTED=12]="UNIMPLEMENTED",ch[ch.INTERNAL=13]="INTERNAL",ch[ch.UNAVAILABLE=14]="UNAVAILABLE",ch[ch.DATA_LOSS=15]="DATA_LOSS";let hh=null;function fh(){return new TextEncoder}const mh=new No([4294967295,4294967295],0);function ph(e){const t=fh().encode(e),n=new Eo;return n.update(t),new Uint8Array(n.digest())}function gh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new No([n,r],0),new No([s,i],0)]}class yh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vh("Invalid padding: ".concat(t));if(n<0)throw new vh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new vh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new vh("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=No.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(No.fromNumber(n)));return 1===r.compare(mh)&&(r=new No([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ph(e),[n,r]=gh(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new yh(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=ph(e),[n,r]=gh(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xh{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xh(dl.min(),r,new jc(ol),md(),Ed())}}class bh{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new bh(n,t,Ed(),Ed(),Ed())}}class wh{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Nh{constructor(e,t){this.targetId=e,this.me=t}}class Eh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class kh{constructor(){this.fe=0,this.ge=Sh(),this.pe=Pc.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ed(),t=Ed(),n=Ed();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ko()}}),new bh(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Sh()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ho(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ih{constructor(e){this.Le=e,this.Be=new Map,this.ke=md(),this.qe=jh(),this.Qe=new jc(ol)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ko()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Ku(s))if(0===n){const e=new gl(s.path);this.Ue(t,e,gu.newNoDocument(e,dl.min()))}else Ho(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==hh||hh.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Uc(n).toUint8Array()}catch(e){if(e instanceof Rc)return qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new yh(i,r,s)}catch(e){return qo(e instanceof vh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Ku(s.target)){const t=new gl(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,gu.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Ed();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new xh(e,t,this.Qe,this.ke,n);return this.ke=md(),this.qe=jh(),this.Qe=new jc(ol),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Tc(ol),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||zo("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function jh(){return new jc(gl.comparator)}function Sh(){return new jc(gl.comparator)}const _h={asc:"ASCENDING",desc:"DESCENDING"},Th={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ch={and:"AND",or:"OR"};class Ah{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dh(e,t){return e.useProto3Json||ql(t)?t:{value:t}}function Rh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ph(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Oh(e,t){return Rh(e,t.toTimestamp())}function Lh(e){return Ho(!!e),dl.fromTimestamp(function(e){const t=Lc(e);return new ul(t.seconds,t.nanos)}(e))}function Mh(e,t){return Uh(e,t).canonicalString()}function Uh(e,t){const n=function(e){return new fl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Fh(e){const t=fl.fromString(e);return Ho(lf(t)),t}function Vh(e,t){return Mh(e.databaseId,t.path)}function zh(e,t){const n=Fh(t);if(n.get(1)!==e.databaseId.projectId)throw new Jo(Qo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jo(Qo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new gl(Kh(n))}function Bh(e,t){return Mh(e.databaseId,t)}function qh(e){const t=Fh(e);return 4===t.length?fl.emptyPath():Kh(t)}function Wh(e){return new fl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Kh(e){return Ho(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hh(e,t,n){return{name:Vh(e,t),fields:n.value.mapValue.fields}}function Gh(e,t,n){const r=zh(e,t.name),s=Lh(t.updateTime),i=t.createTime?Lh(t.createTime):dl.min(),a=new mu({mapValue:{fields:t.fields}}),o=gu.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Qh(e,t){let n;if(t instanceof Xd)n={update:Hh(e,t.key,t.value)};else if(t instanceof nh)n={delete:Vh(e,t.key)};else if(t instanceof $d)n={update:Hh(e,t.key,t.data),updateMask:of(t.fieldMask)};else{if(!(t instanceof rh))return Ko();n={verify:Vh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ud)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ko()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Oh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ko()}(e,t.precondition)),n}function Jh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?qd.updateTime(Lh(e.updateTime)):void 0!==e.exists?qd.exists(e.exists):qd.none()}(t.currentDocument):qd.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)Ho("REQUEST_TIME"===t.setToServerValue),n=new Rd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Pd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ld(e)}else"increment"in t?n=new Ud(e,t.increment):Ko();const r=pl.fromServerFormat(t.fieldPath);return new zd(r,n)}(e,t)):[];if(t.update){t.update.name;const s=zh(e,t.update.name),i=new mu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Dc(t.map(e=>pl.fromServerFormat(e)))}(t.updateMask);return new $d(s,i,e,n,r)}return new Xd(s,i,n,r)}if(t.delete){const r=zh(e,t.delete);return new nh(r,n)}if(t.verify){const r=zh(e,t.verify);return new rh(r,n)}return Ko()}function Yh(e,t){return{documents:[Bh(e,t.path)]}}function Xh(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bh(e,s);const i=function(e){if(0!==e.length)return af(ku.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:rf(e.field),direction:ef(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Dh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function $h(e){let t=qh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ho(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Zh(e);return t instanceof ku&&Su(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new bu(sf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ql(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new yu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new yu(n,t)}(n.endAt)),Yu(t,s,a,i,o,"F",l,c)}function Zh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sf(e.unaryFilter.field);return Eu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=sf(e.unaryFilter.field);return Eu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sf(e.unaryFilter.field);return Eu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=sf(e.unaryFilter.field);return Eu.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ko()}}(e):void 0!==e.fieldFilter?function(e){return Eu.create(sf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ko()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ku.create(e.compositeFilter.filters.map(e=>Zh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ko()}}(e.compositeFilter.op))}(e):Ko()}function ef(e){return _h[e]}function tf(e){return Th[e]}function nf(e){return Ch[e]}function rf(e){return{fieldPath:e.canonicalString()}}function sf(e){return pl.fromServerFormat(e.fieldPath)}function af(e){return e instanceof Eu?function(e){if("=="===e.op){if(su(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NAN"}};if(ru(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(su(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NAN"}};if(ru(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rf(e.field),op:tf(e.op),value:e.value}}}(e):e instanceof ku?function(e){const t=e.getFilters().map(e=>af(e));return 1===t.length?t[0]:{compositeFilter:{op:nf(e.op),filters:t}}}(e):Ko()}function of(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function lf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class cf{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dl.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:dl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new cf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uf{constructor(e){this.ct=e}}function df(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Rh(e,t.version.toTimestamp()),createTime:Rh(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ff(t.version)};else{if(!t.isUnknownDocument())return Ko();r.unknownDocument={path:n.path.toArray(),version:ff(t.version)}}return r}function hf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ff(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function mf(e){const t=new ul(e.seconds,e.nanoseconds);return dl.fromTimestamp(t)}function pf(e,t){const n=(t.baseMutations||[]).map(t=>Jh(e.ct,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>Jh(e.ct,t)),s=ul.fromMillis(t.localWriteTimeMs);return new sh(t.batchId,s,n,r)}function gf(e){const t=mf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?mf(e.lastLimboFreeSnapshotVersion):dl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ho(1===e.documents.length),td(Xu(qh(e.documents[0])))}(e.query):function(e){return td($h(e))}(e.query),new cf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Pc.fromBase64String(e.resumeToken))}function yf(e,t){const n=ff(t.snapshotVersion),r=ff(t.lastLimboFreeSnapshotVersion);let s;s=Ku(t.target)?Yh(e.ct,t.target):Xh(e.ct,t.target)._t;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:qu(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function vf(e){const t=$h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sd(t,t.limit,"L"):t}function xf(e,t){return new ah(t.largestBatchId,Jh(e.ct,t.overlayMutation))}function bf(e,t){const n=t.path.lastSegment();return[e,Hl(t.path.popLast()),n]}function wf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ff(r.readTime),documentKey:Hl(r.documentKey.path),largestBatchId:r.largestBatchId}}class Nf{getBundleMetadata(e,t){return Ef(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:mf(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return Ef(e).put(function(e){return{bundleId:e.id,createTime:ff(Lh(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return kf(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:vf(e.bundledQuery),readTime:mf(e.readTime)}}(e)})}saveNamedQuery(e,t){return kf(e).put(function(e){return{name:e.name,readTime:ff(Lh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ef(e){return Nc(e,"bundles")}function kf(e){return Nc(e,"namedQueries")}class If{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new If(e,n)}getOverlay(e,t){return jf(e).get(bf(this.userId,t)).next(e=>e?xf(this.serializer,e):null)}getOverlays(e,t){const n=vd();return Tl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new ah(t,s);r.push(this.ht(e,i))}),Tl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Hl(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(jf(e).j("collectionPathOverlayIndex",r))}),Tl.waitFor(s)}getOverlaysForCollection(e,t,n){const r=vd(),s=Hl(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return jf(e).U("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=xf(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=vd();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jf(e).J({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=xf(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}ht(e,t){return jf(e).put(function(e,t,n){const[r,s,i]=bf(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qh(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function jf(e){return Nc(e,"documentOverlays")}class Sf{Pt(e){return Nc(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Pc.fromUint8Array(t):Pc.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class _f{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Mc(e.integerValue));else if("doubleValue"in e){const n=Mc(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Wl(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Lc(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Uc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?lu(e)?this.dt(t,Number.MAX_SAFE_INTEGER):au(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ko()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Mc(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),gl.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Tf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Cf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Tf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}_f.vt=new _f;class Af{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{const e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){const t=this.qt(e),n=Cf(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),n=Cf(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Df{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Rf{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Pf{constructor(){this.jt=new Af,this.Ht=new Df(this.jt),this.Jt=new Rf(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Of{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Of(this.indexId,this.documentKey,this.arrayValue,n)}}function Lf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Mf(e.arrayValue,t.arrayValue),0!==n?n:(n=Mf(e.directionalValue,t.directionalValue),0!==n?n:gl.comparator(e.documentKey,t.documentKey)))}function Mf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Uf{constructor(e){this.Xt=new Tc((e,t)=>pl.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=this.Xt.add(e):this.tn.push(e)}}get nn(){return this.Xt.size>1}rn(e){if(Ho(e.collectionGroup===this.collectionId),this.nn)return!1;const t=vl(e);if(void 0!==t&&!this.sn(t))return!1;const n=xl(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const e=this.Xt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.on(e,t)||!this._n(this.en[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.en.length||!this._n(this.en[i++],e))return!1}return!0}an(){if(this.nn)return null;let e=new Tc(pl.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new bl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new bl(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new bl(n.field,"asc"===n.dir?0:1)));return new yl(yl.UNKNOWN_ID,this.collectionId,t,wl.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ff(e){var t,n;if(Ho(e instanceof Eu||e instanceof ku),e instanceof Eu){if(e instanceof Uu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Eu.create(e.field,"==",t)))||[];return ku.create(r,"or")}return e}const r=e.filters.map(e=>Ff(e));return ku.create(r,e.op)}function Vf(e){if(0===e.getFilters().length)return[];const t=Wf(Ff(e));return Ho(qf(t)),zf(t)||Bf(t)?[t]:t.getFilters()}function zf(e){return e instanceof Eu}function Bf(e){return e instanceof ku&&Su(e)}function qf(e){return zf(e)||Bf(e)||function(e){if(e instanceof ku&&ju(e)){for(const t of e.getFilters())if(!zf(t)&&!Bf(t))return!1;return!0}return!1}(e)}function Wf(e){if(Ho(e instanceof Eu||e instanceof ku),e instanceof Eu)return e;if(1===e.filters.length)return Wf(e.filters[0]);const t=e.filters.map(e=>Wf(e));let n=ku.create(t,e.op);return n=Gf(n),qf(n)?n:(Ho(n instanceof ku),Ho(Iu(n)),Ho(n.filters.length>1),n.filters.reduce((e,t)=>Kf(e,t)))}function Kf(e,t){let n;return Ho(e instanceof Eu||e instanceof ku),Ho(t instanceof Eu||t instanceof ku),n=e instanceof Eu?t instanceof Eu?function(e,t){return ku.create([e,t],"and")}(e,t):Hf(e,t):t instanceof Eu?Hf(t,e):function(e,t){if(Ho(e.filters.length>0&&t.filters.length>0),Iu(e)&&Iu(t))return Au(e,t.getFilters());const n=ju(e)?e:t,r=ju(e)?t:e,s=n.filters.map(e=>Kf(e,r));return ku.create(s,"or")}(e,t),Gf(n)}function Hf(e,t){if(Iu(t))return Au(t,e.getFilters());{const n=t.filters.map(t=>Kf(e,t));return ku.create(n,"or")}}function Gf(e){if(Ho(e instanceof Eu||e instanceof ku),e instanceof Eu)return e;const t=e.getFilters();if(1===t.length)return Gf(t[0]);if(_u(e))return e;const n=t.map(e=>Gf(e)),r=[];return n.forEach(t=>{t instanceof Eu?r.push(t):t instanceof ku&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:ku.create(r,e.op)}class Qf{constructor(){this.un=new Jf}addToCollectionParentIndex(e,t){return this.un.add(t),Tl.resolve()}getCollectionParents(e,t){return Tl.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Tl.resolve()}deleteFieldIndex(e,t){return Tl.resolve()}deleteAllFieldIndexes(e){return Tl.resolve()}createTargetIndexes(e,t){return Tl.resolve()}getDocumentsMatchingTarget(e,t){return Tl.resolve(null)}getIndexType(e,t){return Tl.resolve(0)}getFieldIndexes(e,t){return Tl.resolve([])}getNextCollectionGroupToUpdate(e){return Tl.resolve(null)}getMinOffset(e,t){return Tl.resolve(kl.min())}getMinOffsetFromCollectionGroup(e,t){return Tl.resolve(kl.min())}updateCollectionGroup(e,t,n){return Tl.resolve()}updateIndexEntries(e,t){return Tl.resolve()}}class Jf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tc(fl.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Tc(fl.comparator)).toArray()}}const Yf=new Uint8Array(0);class Xf{constructor(e,t){this.databaseId=t,this.cn=new Jf,this.ln=new hd(e=>qu(e),(e,t)=>Wu(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:n,parent:Hl(r)};return $f(e).put(s)}return Tl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[cl(t),""],!1,!0);return $f(e).U(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Jl(r.parent))}return n})}addFieldIndex(e,t){const n=em(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=tm(e);return s.next(e=>{n.put(wf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=em(e),r=tm(e),s=Zf(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=em(e),n=Zf(e),r=tm(e);return t.j().next(()=>n.j()).next(()=>r.j())}createTargetIndexes(e,t){return Tl.forEach(this.hn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Uf(t).an();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Zf(e);let r=!0;const s=new Map;return Tl.forEach(this.hn(t),t=>this.Pn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=Ed();const r=[];return Tl.forEach(s,(s,i)=>{zo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(s)," to execute ").concat(qu(t)));const a=function(e,t){const n=vl(t);if(void 0===n)return null;for(const r of Hu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),o=function(e,t){const n=new Map;for(const r of xl(t))for(const t of Hu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of xl(t)){const t=0===s.kind?Gu(e,s.fieldPath,e.startAt):Qu(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new yu(n,r)}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of xl(t)){const t=0===s.kind?Qu(e,s.fieldPath,e.endAt):Gu(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new yu(n,r)}(i,s),u=this.In(s,i,l),d=this.In(s,i,c),h=this.Tn(s,i,o),f=this.En(s.indexId,a,u,l.inclusive,d,c.inclusive,h);return Tl.forEach(f,s=>n.G(s,t.limit).next(t=>{t.forEach(t=>{const n=gl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Tl.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Vf(ku.create(e.filters,"and")).map(t=>Bu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.dn(t[u/l]):Yf,d=this.An(e,o,n[u%l],r),h=this.Rn(e,o,s[u%l],i),f=a.map(t=>this.An(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}An(e,t,n,r){const s=new Of(e,gl.empty(),t,n);return r?s:s.Zt()}Rn(e,t,n,r){const s=new Of(e,gl.empty(),t,n);return r?s.Zt():s}Pn(e,t){const n=new Uf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.rn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.hn(t);return Tl.forEach(r,t=>this.Pn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Tc(pl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Vn(e,t){const n=new Pf;for(const r of xl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Yt(r.kind);_f.vt.It(e,s)}return n.zt()}dn(e){const t=new Pf;return _f.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Pf;return _f.vt.It(eu(this.databaseId,t),n.Yt(function(e){const t=xl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let r=[];r.push(new Pf);let s=0;for(const i of xl(e)){const e=n[s++];for(const n of r)if(this.fn(t,i.fieldPath)&&nu(e))r=this.gn(r,i,e);else{const t=n.Yt(i.kind);_f.vt.It(e,t)}}return this.pn(r)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Pf;n.seed(e.zt()),_f.vt.It(i,n.Yt(t.kind)),s.push(n)}return s}fn(e,t){return!!e.filters.find(e=>e instanceof Eu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=em(e),r=tm(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(e=>{const t=[];return Tl.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new wl(t.sequenceNumber,new kl(mf(t.readTime),new gl(Jl(t.documentKey)),t.largestBatchId)):wl.empty(),r=e.fields.map(e=>{let[t,n]=e;return new bl(pl.fromServerFormat(t),n)});return new yl(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ol(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=em(e),s=tm(e);return this.yn(e).next(e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Tl.forEach(t,t=>s.put(wf(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Tl.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?Tl.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),Tl.forEach(s,n=>this.wn(e,t,n).next(t=>{const s=this.Sn(r,n);return t.isEqual(s)?Tl.resolve():this.bn(e,r,n,t,s)}))))})}Dn(e,t,n,r){return Zf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,r){return Zf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=Zf(e);let s=new Tc(Lf);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(e,r)=>{s=s.add(new Of(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}Sn(e,t){let n=new Tc(Lf);const r=this.Vn(t,e);if(null==r)return n;const s=vl(t);if(null!=s){const i=e.data.field(s.fieldPath);if(nu(i))for(const s of i.arrayValue.values||[])n=n.add(new Of(t.indexId,e.key,this.dn(s),r))}else n=n.add(new Of(t.indexId,e.key,Yf,r));return n}bn(e,t,n,r,s){zo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=Ac(i),l=Ac(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=Ac(a)):t?(s(o),o=Ac(i)):(o=Ac(i),l=Ac(a))}}(r,s,Lf,r=>{i.push(this.Dn(e,t,n,r))},r=>{i.push(this.vn(e,t,n,r))}),Tl.waitFor(i)}yn(e){let t=1;return tm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Lf(e,t)).filter((e,t,n)=>!t||0!==Lf(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=Lf(i,e),s=Lf(i,t);if(0===n)r[0]=e.Zt();else if(n>0&&s<0)r.push(i),r.push(i.Zt());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Cn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,Yf,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,Yf,[]];s.push(IDBKeyRange.bound(e,t))}return s}Cn(e,t){return Lf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nm)}getMinOffset(e,t){return Tl.mapArray(this.hn(t),t=>this.Pn(e,t).next(e=>e||Ko())).next(nm)}}function $f(e){return Nc(e,"collectionParents")}function Zf(e){return Nc(e,"indexEntries")}function em(e){return Nc(e,"indexConfiguration")}function tm(e){return Nc(e,"indexState")}function nm(e){Ho(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Il(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new kl(t.readTime,t.documentKey,n)}const rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sm(e,sm.DEFAULT_COLLECTION_PERCENTILE,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function im(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.J({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{Ho(1===o)}));const c=[];for(const u of n.mutations){const e=$l(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return Tl.waitFor(i).next(()=>c)}function am(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ko();t=e.noDocument}return JSON.stringify(t).length}sm.DEFAULT_COLLECTION_PERCENTILE=10,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sm.DEFAULT=new sm(41943040,sm.DEFAULT_COLLECTION_PERCENTILE,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sm.DISABLED=new sm(-1,0,0);class om{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Fn={}}static lt(e,t,n,r){Ho(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new om(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=um(e),i=cm(e);return i.add({}).next(a=>{Ho("number"==typeof a);const o=new sh(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Qh(e.ct,t)),s=n.mutations.map(t=>Qh(e.ct,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new Tc((e,t)=>ol(e.canonicalString(),t.canonicalString()));for(const e of r){const t=$l(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,Zl))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),Tl.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return cm(e).get(t).next(e=>e?(Ho(e.userId===this.userId),pf(this.serializer,e)):null)}Mn(e,t){return this.Fn[t]?Tl.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Fn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return cm(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(Ho(t.batchId>=n),s=pf(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cm(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).U("userMutationsIndex",t).next(e=>e.map(e=>pf(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Xl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return um(e).J({range:r},(n,r,i)=>{const[a,o,l]=n,c=Jl(o);if(a===this.userId&&t.path.isEqual(c))return cm(e).get(l).next(e=>{if(!e)throw Ko();Ho(e.userId===this.userId),s.push(pf(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tc(ol);const r=[];return t.forEach(t=>{const s=Xl(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=um(e).J({range:i},(e,r,s)=>{const[i,a,o]=e,l=Jl(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),Tl.waitFor(r).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Xl(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new Tc(ol);return um(e).J({range:i},(e,t,s)=>{const[i,o,l]=e,c=Jl(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.xn(e,a))}xn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(cm(e).get(t).next(e=>{if(null===e)throw Ko();Ho(e.userId===this.userId),n.push(pf(this.serializer,e))}))}),Tl.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return im(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Tl.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Tl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return um(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Jl(e[1]);r.push(t)}else n.done()}).next(()=>{Ho(0===r.length)})})}containsKey(e,t){return lm(e,this.userId,t)}Nn(e){return dm(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lm(e,t,n){const r=Xl(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return um(e).J({range:i,H:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function cm(e){return Nc(e,"mutations")}function um(e){return Nc(e,"documentMutations")}function dm(e){return Nc(e,"mutationQueues")}class hm{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hm(0)}static kn(){return new hm(-1)}}class fm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new hm(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(e=>dl.fromTimestamp(new ul(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mm(e).delete(t.targetId)).next(()=>this.qn(e)).next(t=>(Ho(t.targetCount>0),t.targetCount-=1,this.Qn(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return mm(e).J((i,a)=>{const o=gf(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>Tl.waitFor(s)).next(()=>r)}forEachTarget(e,t){return mm(e).J((e,n)=>{const r=gf(n);t(r)})}qn(e){return pm(e).get("targetGlobalKey").next(e=>(Ho(null!==e),e))}Qn(e,t){return pm(e).put("targetGlobalKey",t)}Kn(e,t){return mm(e).put(yf(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=qu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return mm(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=gf(n);Wu(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=gm(e);return t.forEach(t=>{const i=Hl(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),Tl.waitFor(r)}removeMatchingKeys(e,t,n){const r=gm(e);return Tl.forEach(t,t=>{const s=Hl(t.path);return Tl.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=gm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=gm(e);let s=Ed();return r.J({range:n,H:!0},(e,t,n)=>{const r=Jl(e[1]),i=new gl(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=Hl(t.path),r=IDBKeyRange.bound([n],[cl(n)],!1,!0);let s=0;return gm(e).J({index:"documentTargetsIndex",H:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}ot(e,t){return mm(e).get(t).next(e=>e?gf(e):null)}}function mm(e){return Nc(e,"targets")}function pm(e){return Nc(e,"targetGlobal")}function gm(e){return Nc(e,"targetDocuments")}function ym(e,t){let[n,r]=e,[s,i]=t;const a=ol(n,s);return 0===a?ol(r,i):a}class vm{constructor(e){this.Un=e,this.buffer=new Tc(ym),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ym(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){zo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ol(e)?zo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await _l(e)}await this.Hn(3e5)})}}class bm{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Tl.resolve(Bl.oe);const n=new vm(t);return this.Jn.forEachTarget(e,e=>n.zn(e.sequenceNumber)).next(()=>this.Jn.Zn(e,e=>n.zn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zo("LruGarbageCollector","Garbage collection skipped; disabled"),Tl.resolve(rm)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),rm):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Vo()<=Vn.DEBUG&&zo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Tl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function wm(e,t){return new bm(e,t)}class Nm{constructor(e,t){this.db=e,this.garbageCollector=wm(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(e,n)=>t(n))}addReference(e,t,n){return Em(e,n)}removeReference(e,t,n){return Em(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Em(e,t)}nr(e,t){return function(e,t){let n=!1;return dm(e).Y(r=>lm(e,r,t).next(e=>(e&&(n=!0),Tl.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.tr(e,(i,a)=>{if(a<=t){const t=this.nr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,dl.min()),gm(e).delete(function(e){return[0,Hl(e.path)]}(i))))});r.push(t)}}).next(()=>Tl.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Em(e,t)}tr(e,t){const n=gm(e);let r,s=Bl.oe;return n.J({index:"documentTargetsIndex"},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==Bl.oe&&t(new gl(Jl(r)),s),s=l,r=o):s=Bl.oe}).next(()=>{s!==Bl.oe&&t(new gl(Jl(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Em(e,t){return gm(e).put(function(e,t){return{targetId:0,path:Hl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class km{constructor(){this.changes=new hd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Im{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Tm(e).put(n)}removeEntry(e,t,n){return Tm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],hf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=gu.newInvalidDocument(t);return Tm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cm(t))},(e,r)=>{n=this.ir(t,r)}).next(()=>n)}sr(e,t){let n={size:0,document:gu.newInvalidDocument(t)};return Tm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cm(t))},(e,r)=>{n={document:this.ir(t,r),size:am(r)}}).next(()=>n)}getEntries(e,t){let n=md();return this._r(e,t,(e,t)=>{const r=this.ir(e,t);n=n.insert(e,r)}).next(()=>n)}ar(e,t){let n=md(),r=new jc(gl.comparator);return this._r(e,t,(e,t)=>{const s=this.ir(e,t);n=n.insert(e,s),r=r.insert(e,am(t))}).next(()=>({documents:n,ur:r}))}_r(e,t,n){if(t.isEmpty())return Tl.resolve();let r=new Tc(Dm);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Cm(r.first()),Cm(r.last())),i=r.getIterator();let a=i.getNext();return Tm(e).J({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=gl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Dm(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.$(Cm(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,a=[i.popLast().toArray(),i.lastSegment(),hf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tm(e).U(IDBKeyRange.bound(a,o,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=md();for(const s of e){const e=this.ir(gl.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(ld(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=md();const i=Am(t,n),a=Am(t,kl.max());return Tm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.ir(gl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Sm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return _m(e).get("remoteDocumentGlobalKey").next(e=>(Ho(!!e),e))}rr(e,t){return _m(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gh(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=gl.fromSegments(t.noDocument.path),r=mf(t.noDocument.readTime);n=gu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ko();{const e=gl.fromSegments(t.unknownDocument.path),r=mf(t.unknownDocument.version);n=gu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ul(e[0],e[1]);return dl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(dl.min()))return e}return gu.newInvalidDocument(e)}}function jm(e){return new Im(e)}class Sm extends km{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new hd(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Tc((e,t)=>ol(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=df(this.cr.serializer,i);r=r.add(s.path.popLast());const l=am(o);n+=l-a.size,t.push(this.cr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=df(this.cr.serializer,i.convertToNoDocument(dl.min()));t.push(this.cr.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.cr.updateMetadata(e,n)),Tl.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(e=>{let{documents:t,ur:n}=e;return n.forEach((e,n)=>{this.lr.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function _m(e){return Nc(e,"remoteDocumentGlobal")}function Tm(e){return Nc(e,"remoteDocumentsV14")}function Cm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Am(e,t){const n=t.documentKey.path.toArray();return[e,hf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Dm(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ol(n[i],r[i]),s)return s;return s=ol(n.length,r.length),s||(s=ol(n[n.length-2],r[r.length-2]),s||ol(n[n.length-1],r[r.length-1]))}class Rm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Qd(n.mutation,e,Dc.empty(),ul.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ed()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ed();const r=vd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=gd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=vd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ed()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=md();const i=bd(),a=bd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof $d)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Qd(a.mutation,t,a.mutation.getFieldMask(),ul.now())):i.set(t.key,Dc.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Rm(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=bd();let r=new jc((e,t)=>e-t),s=Ed();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Dc.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ed()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=xd();l.forEach(e=>{if(!s.has(e)){const r=Hd(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Tl.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return gl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Tl.resolve(vd());let a=-1,o=s;return i.next(t=>Tl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Tl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Ed())).next(e=>({batchId:a,changes:yd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new gl(t)).next(e=>{let t=gd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=gd();return this.indexManager.getCollectionParents(e,s).next(a=>Tl.forEach(a,a=>{const o=function(e,t){return new Ju(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gu.newInvalidDocument(r)))});let n=gd();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Qd(i.mutation,r,Dc.empty(),ul.now()),ld(t,r)&&(n=n.insert(e,r))}),n})}}class Om{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Tl.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Lh(e.createTime)}}(t)),Tl.resolve()}getNamedQuery(e,t){return Tl.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:vf(e.bundledQuery),readTime:Lh(e.readTime)}}(t)),Tl.resolve()}}class Lm{constructor(){this.overlays=new jc(gl.comparator),this.Ir=new Map}getOverlay(e,t){return Tl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vd();return Tl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Tl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Tl.resolve()}getOverlaysForCollection(e,t,n){const r=vd(),s=t.length+1,i=new gl(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new jc((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=vd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=vd(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Tl.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ah(t,n));let s=this.Ir.get(t);void 0===s&&(s=Ed(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Mm{constructor(){this.sessionToken=Pc.EMPTY_BYTE_STRING}getSessionToken(e){return Tl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Tl.resolve()}}class Um{constructor(){this.Tr=new Tc(Fm.Er),this.dr=new Tc(Fm.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Fm(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Fm(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new gl(new fl([])),n=new Fm(t,e),r=new Fm(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new gl(new fl([])),n=new Fm(t,e),r=new Fm(t,e+1);let s=Ed();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Fm(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Fm{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return gl.comparator(e.key,t.key)||ol(e.wr,t.wr)}static Ar(e,t){return ol(e.wr,t.wr)||gl.comparator(e.key,t.key)}}class Vm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Tc(Fm.Er)}checkEmpty(e){return Tl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new sh(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Fm(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Tl.resolve(i)}lookupMutationBatch(e,t){return Tl.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return Tl.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Tl.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Tl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Fm(t,0),r=new Fm(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),Tl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tc(ol);return t.forEach(e=>{const t=new Fm(e,0),r=new Fm(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Tl.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;gl.isDocumentKey(s)||(s=s.child(""));const i=new Fm(new gl(s),0);let a=new Tc(ol);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),Tl.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ho(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Tl.forEach(t.mutations,r=>{const s=new Fm(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Fm(t,0),r=this.br.firstAfterOrEqual(n);return Tl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tl.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zm{constructor(e){this.Mr=e,this.docs=new jc(gl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tl.resolve(n?n.document.mutableCopy():gu.newInvalidDocument(t))}getEntries(e,t){let n=md();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gu.newInvalidDocument(e))}),Tl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=md();const i=t.path,a=new gl(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Il(El(a),n)<=0||(r.has(a.key)||ld(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Tl.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Ko()}Or(e,t){return Tl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Bm(this)}getSize(e){return Tl.resolve(this.size)}}class Bm extends km{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Tl.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class qm{constructor(e){this.persistence=e,this.Nr=new hd(e=>qu(e),Wu),this.lastRemoteSnapshotVersion=dl.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Um,this.targetCount=0,this.kr=hm.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Tl.resolve()}getLastRemoteSnapshotVersion(e){return Tl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tl.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Tl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Tl.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new hm(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Tl.resolve()}updateTargetData(e,t){return this.Kn(t),Tl.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Tl.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Tl.waitFor(s).next(()=>r)}getTargetCount(e){return Tl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Tl.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Tl.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Tl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Tl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Tl.resolve(n)}containsKey(e,t){return Tl.resolve(this.Br.containsKey(t))}}class Wm{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Bl(0),this.Kr=!1,this.Kr=!0,this.$r=new Mm,this.referenceDelegate=e(this),this.Ur=new qm(this),this.indexManager=new Qf,this.remoteDocumentCache=function(e){return new zm(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new uf(t),this.Gr=new Om(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Vm(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){zo("MemoryPersistence","Starting transaction:",e);const r=new Km(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Tl.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Km extends Sl{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Jr=new Um,this.Yr=null}static Zr(e){return new Hm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ko()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Tl.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Tl.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Tl.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tl.forEach(this.Xr,n=>{const r=gl.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,dl.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Tl.or([()=>Tl.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Gm{constructor(e){this.serializer=e}O(e,t,n,r){const s=new Cl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Qm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=Tl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Qm(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").U().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yl,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return Tl.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.ni(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&r>=7&&(i=i.next(()=>this.ii(s))),n<8&&r>=8&&(i=i.next(()=>this.si(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.oi(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:dc});t.createIndex("collectionPathOverlayIndex",hc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",fc,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ec});t.createIndex("documentKeyIndex",tc),t.createIndex("collectionGroupIndex",nc)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:oc}).createIndex("sequenceNumberIndex",lc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cc}).createIndex("documentKeyIndex",uc,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)})),i}ri(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=am(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(t=>Tl.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next(n=>Tl.forEach(n,n=>{Ho(n.userId===t.userId);const r=pf(this.serializer,n);return im(e,t.userId,r).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.J((n,s)=>{const i=new fl(n),a=function(e){return[0,Hl(e)]}(i);r.push(t.get(a).next(n=>n?Tl.resolve():(n=>t.put({targetId:0,path:Hl(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>Tl.waitFor(r))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ac});const n=t.store("collectionParents"),r=new Jf,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Hl(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>{const n=new fl(e);return s(n.popLast())}).next(()=>t.store("documentMutations").J({H:!0},(e,t)=>{let[n,r,i]=e;const a=Jl(r);return s(a.popLast())}))}oi(e){const t=e.store("targets");return t.J((e,n)=>{const r=gf(n),s=yf(this.serializer,r);return t.put(s)})}_i(e,t){const n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{const s=t.store("remoteDocumentsV14"),i=function(e){return e.document?new gl(fl.fromString(e.document.name).popFirst(5)):e.noDocument?gl.fromSegments(e.noDocument.path):e.unknownDocument?gl.fromSegments(e.unknownDocument.path):Ko()}(n).path.toArray(),a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(a))}).next(()=>Tl.waitFor(r))}ai(e,t){const n=t.store("mutations"),r=jm(this.serializer),s=new Wm(Hm.Zr,this.serializer.ct);return n.U().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ed();pf(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Tl.forEach(n,(e,n)=>{const i=new Mo(n),a=If.lt(this.serializer,i),o=s.getIndexManager(i),l=om.lt(i,this.serializer,o,s.referenceDelegate);return new Pm(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new wc(t,Bl.oe),e).next()})})}}function Qm(e){e.createObjectStore("targetDocuments",{keyPath:sc}).createIndex("documentTargetsIndex",ic,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rc,{unique:!0}),e.createObjectStore("targetGlobal")}const Jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ym{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=s,this.window=i,this.document=a,this.ci=l,this.li=c,this.hi=u,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!Ym.D())throw new Jo(Qo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nm(this,r),this.Ai=t+"main",this.serializer=new uf(o),this.Ri=new Al(this.Ai,this.hi,new Gm(this.serializer)),this.$r=new Sf,this.Ur=new fm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jm(this.serializer),this.Gr=new Nf,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===c&&Bo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jo(Qo.FAILED_PRECONDITION,Jm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Bl(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$m(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ol(e))return zo("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return zo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Xm(e).get("owner").next(e=>Tl.resolve(this.vi(e)))}Ci(e){return $m(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Nc(e,"clientMetadata");return t.U().next(e=>{const n=this.xi(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return Tl.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Tl.resolve(!0):Xm(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Jo(Qo.FAILED_PRECONDITION,Jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||$m(e).U().next(e=>void 0===this.xi(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&zo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new wc(e,Bl.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$m(e).U().next(e=>this.xi(e,18e5).map(e=>e.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return om.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return If.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){zo("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=function(e){return 17===e?bc:16===e?xc:15===e?vc:14===e?yc:13===e?gc:12===e?pc:11===e?mc:void Ko()}(this.hi);let i;return this.Ri.runTransaction(e,r,s,r=>(i=new wc(r,this.Qr?this.Qr.next():Bl.oe),"readwrite-primary"===t?this.wi(i).next(e=>!!e||this.Si(i)).next(t=>{if(!t)throw Bo("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Jo(Qo.FAILED_PRECONDITION,jl);return n(i)}).next(e=>this.Di(i).next(()=>e)):this.Ki(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Ki(e){return Xm(e).get("owner").next(e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Jo(Qo.FAILED_PRECONDITION,Jm)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xm(e).put("owner",t)}static D(){return Al.D()}bi(e){const t=Xm(e);return t.get("owner").next(e=>this.vi(e)?(zo("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Tl.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Bo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;Nn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return zo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Bo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(Ge){Bo("Failed to set zombie client id.",Ge)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(Ge){}}Oi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Xm(e){return Nc(e,"owner")}function $m(e){return Nc(e,"clientMetadata")}function Zm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ep{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Ed(),r=Ed();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ep(e,t.fromCache,n,r)}}class tp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class np{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Nn()?8:Dl(wn())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new tp;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Vo()<=Vn.DEBUG&&zo("QueryEngine","SDK will not create cache indexes for query:",od(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Tl.resolve()):(Vo()<=Vn.DEBUG&&zo("QueryEngine","Query:",od(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Vo()<=Vn.DEBUG&&zo("QueryEngine","The SDK decides to create cache indexes for query:",od(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,td(t))):Tl.resolve())}Yi(e,t){if($u(t))return Tl.resolve(null);let n=td(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=sd(t,null,"F"),n=td(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Ed(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,sd(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return $u(t)||r.isEqual(dl.min())?Tl.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?Tl.resolve(null):(Vo()<=Vn.DEBUG&&zo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),od(t)),this.rs(e,i,t,Nl(r,-1)).next(e=>e))})}ts(e,t){let n=new Tc(ud(e));return t.forEach((t,r)=>{ld(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Vo()<=Vn.DEBUG&&zo("QueryEngine","Using full collection scan to execute query:",od(t)),this.Ji.getDocumentsMatchingQuery(e,t,kl.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class rp{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new jc(ol),this._s=new hd(e=>qu(e),Wu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pm(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function sp(e,t,n,r){return new rp(e,t,n,r)}async function ip(e,t){const n=Go(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Ed();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function ap(e){const t=Go(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function op(e,t,n){let r=Ed(),s=Ed();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=md();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(dl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):zo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function lp(e,t){const n=Go(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function cp(e,t){const n=Go(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,Tl.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new cf(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function up(e,t,n){const r=Go(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ol(e))throw e;zo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function dp(e,t,n){const r=Go(e);let s=dl.min(),i=Ed();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Go(e),s=r._s.get(n);return void 0!==s?Tl.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,td(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:dl.min(),n?i:Ed())).next(e=>(hp(r,cd(t),e),{documents:e,Ts:i})))}function hp(e,t,n){let r=e.us.get(t)||dl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class fp{constructor(){this.activeTargetIds=Id()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mp{constructor(){this.so=new fp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pp{_o(e){}shutdown(){}}class gp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){zo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){zo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yp=null;function vp(){return null===yp?yp=268435456+Math.round(2147483648*Math.random()):yp++,"0x"+yp.toString(16)}const xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bp{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const wp="WebChannelConnection";class Np extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=vp(),a=this.xo(e,t.toUriEncodedString());zo("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(zo("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw qo("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=xp[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=vp();return new Promise((i,a)=>{const o=new jo;o.setWithCredentials(!0),o.listenOnce(_o.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case To.NO_ERROR:const t=o.getResponseJson();zo(wp,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case To.TIMEOUT:zo(wp,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Jo(Qo.DEADLINE_EXCEEDED,"Request time out"));break;case To.HTTP_ERROR:const n=o.getStatus();if(zo(wp,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qo).indexOf(t)>=0?t:Qo.UNKNOWN}(t.status);a(new Jo(e,t.message))}else a(new Jo(Qo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Jo(Qo.UNAVAILABLE,"Connection failed."));break;default:Ko()}}finally{zo(wp,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);zo(wp,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=vp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ro(),a=Do(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");zo(wp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new bp({Io:t=>{h?zo(wp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(zo(wp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),zo(wp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,So.EventType.OPEN,()=>{h||(zo(wp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),m(u,So.EventType.CLOSE,()=>{h||(h=!0,zo(wp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),m(u,So.EventType.ERROR,t=>{h||(h=!0,qo(wp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Jo(Qo.UNAVAILABLE,"The operation could not be completed")))}),m(u,So.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Ho(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){zo(wp,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=lh[e];if(void 0!==t)return dh(t)}(t),s=a.message;void 0===n&&(n=Qo.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Jo(n,s)),u.close()}else zo(wp,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.bo(s)}}),m(a,Ao.STAT_EVENT,t=>{t.stat===Co.PROXY?zo(wp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Co.NOPROXY&&zo(wp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Ep(){return"undefined"!=typeof window?window:null}function kp(){return"undefined"!=typeof document?document:null}function Ip(e){return new Ah(e,!0)}class jp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&zo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Sp{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jp(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Qo.RESOURCE_EXHAUSTED?(Bo(t.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Qo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Jo(Qo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return zo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(zo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _p extends Sp{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ko()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Ho(void 0===t||"string"==typeof t),Pc.fromBase64String(t||"")):(Ho(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Pc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Qo.UNKNOWN:dh(e.code);return new Jo(t,e.message||"")}(a);n=new Eh(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=zh(e,r.document.name),i=Lh(r.document.updateTime),a=r.document.createTime?Lh(r.document.createTime):dl.min(),o=new mu({mapValue:{fields:r.document.fields}}),l=gu.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new wh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=zh(e,r.document),i=r.readTime?Lh(r.readTime):dl.min(),a=gu.newNoDocument(s,i),o=r.removedTargetIds||[];n=new wh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=zh(e,r.document),i=r.removedTargetIds||[];n=new wh([],i,s,null)}else{if(!("filter"in t))return Ko();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new oh(r,s),a=e.targetId;n=new Nh(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return dl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?dl.min():t.readTime?Lh(t.readTime):dl.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Wh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ku(r)?{documents:Yh(e,r)}:{query:Xh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ph(e,t.resumeToken);const r=Dh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(dl.min())>0){n.readTime=Rh(e,t.snapshotVersion.toTimestamp());const r=Dh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ko()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Wh(this.serializer),t.removeTarget=e,this.a_(t)}}class Tp extends Sp{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ho(!!e.streamToken),this.lastStreamToken=e.streamToken,Ho(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ho(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ho(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Lh(e.updateTime):Lh(t);return n.isEqual(dl.min())&&(n=Lh(t)),new Bd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Lh(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Wh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Qh(this.serializer,e))};this.a_(t)}}class Cp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Jo(Qo.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,Uh(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jo(Qo.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,Uh(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jo(Qo.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ap{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Bo(t),this.D_=!1):zo("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Dp{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{zp(this)&&(zo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Go(e);t.L_.add(4),await Pp(t),t.q_.set("Unknown"),t.L_.delete(4),await Rp(t)}(this))})}),this.q_=new Ap(n,r)}}async function Rp(e){if(zp(e))for(const t of e.B_)await t(!0)}async function Pp(e){for(const t of e.B_)await t(!1)}function Op(e,t){const n=Go(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Vp(n)?Fp(n):ag(n).r_()&&Mp(n,t))}function Lp(e,t){const n=Go(e),r=ag(n);n.N_.delete(t),r.r_()&&Up(n,t),0===n.N_.size&&(r.r_()?r.o_():zp(n)&&n.q_.set("Unknown"))}function Mp(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ag(e).A_(t)}function Up(e,t){e.Q_.xe(t),ag(e).R_(t)}function Fp(e){e.Q_=new Ih({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ag(e).start(),e.q_.v_()}function Vp(e){return zp(e)&&!ag(e).n_()&&e.N_.size>0}function zp(e){return 0===Go(e).L_.size}function Bp(e){e.Q_=void 0}async function qp(e){e.q_.set("Online")}async function Wp(e){e.N_.forEach((t,n)=>{Mp(e,t)})}async function Kp(e,t){Bp(e),Vp(e)?(e.q_.M_(t),Fp(e)):e.q_.set("Unknown")}async function Hp(e,t,n){if(e.q_.set("Online"),t instanceof Eh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){zo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gp(e,n)}else if(t instanceof wh?e.Q_.Ke(t):t instanceof Nh?e.Q_.He(t):e.Q_.We(t),!n.isEqual(dl.min()))try{const t=await ap(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Pc.EMPTY_BYTE_STRING,r.snapshotVersion)),Up(e,t);const s=new cf(r.target,t,n,r.sequenceNumber);Mp(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){zo("RemoteStore","Failed to raise snapshot:",t),await Gp(e,t)}}async function Gp(e,t,n){if(!Ol(t))throw t;e.L_.add(1),await Pp(e),e.q_.set("Offline"),n||(n=()=>ap(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zo("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Rp(e)})}function Qp(e,t){return t().catch(n=>Gp(e,n,t))}async function Jp(e){const t=Go(e),n=og(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Yp(t);)try{const e=await lp(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Xp(t,e)}catch(e){await Gp(t,e)}$p(t)&&Zp(t)}function Yp(e){return zp(e)&&e.O_.length<10}function Xp(e,t){e.O_.push(t);const n=og(e);n.r_()&&n.V_&&n.m_(t.mutations)}function $p(e){return zp(e)&&!og(e).n_()&&e.O_.length>0}function Zp(e){og(e).start()}async function eg(e){og(e).p_()}async function tg(e){const t=og(e);for(const n of e.O_)t.m_(n.mutations)}async function ng(e,t,n){const r=e.O_.shift(),s=ih.from(r,t,n);await Qp(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Jp(e)}async function rg(e,t){t&&og(e).V_&&await async function(e,t){if(function(e){return uh(e)&&e!==Qo.ABORTED}(t.code)){const n=e.O_.shift();og(e).s_(),await Qp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Jp(e)}}(e,t),$p(e)&&Zp(e)}async function sg(e,t){const n=Go(e);n.asyncQueue.verifyOperationInProgress(),zo("RemoteStore","RemoteStore received new credentials");const r=zp(n);n.L_.add(3),await Pp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Rp(n)}async function ig(e,t){const n=Go(e);t?(n.L_.delete(2),await Rp(n)):t||(n.L_.add(2),await Pp(n),n.q_.set("Unknown"))}function ag(e){return e.K_||(e.K_=function(e,t,n){const r=Go(e);return r.w_(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:qp.bind(null,e),Ro:Wp.bind(null,e),mo:Kp.bind(null,e),d_:Hp.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Vp(e)?Fp(e):e.q_.set("Unknown")):(await e.K_.stop(),Bp(e))})),e.K_}function og(e){return e.U_||(e.U_=function(e,t,n){const r=Go(e);return r.w_(),new Tp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eg.bind(null,e),mo:rg.bind(null,e),f_:tg.bind(null,e),g_:ng.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Jp(e)):(await e.U_.stop(),e.O_.length>0&&(zo("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class lg{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new lg(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jo(Qo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(e,t){if(Bo("AsyncQueue","".concat(t,": ").concat(e)),Ol(e))return new Jo(Qo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ug{constructor(e){this.comparator=e?(t,n)=>e(t,n)||gl.comparator(t.key,n.key):(e,t)=>gl.comparator(e.key,t.key),this.keyedMap=gd(),this.sortedSet=new jc(this.comparator)}static emptySet(e){return new ug(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ug))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ug;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dg{constructor(){this.W_=new jc(gl.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ko():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class hg{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new hg(e,t,ug.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fg{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mg{constructor(){this.queries=pg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Go(e),r=n.queries;n.queries=pg(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Jo(Qo.ABORTED,"Firestore shutting down"))}}function pg(){return new hd(e=>ad(e),id)}async function gg(e,t){const n=Go(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new fg,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=cg(e,"Initialization of query '".concat(od(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&bg(n)}async function yg(e,t){const n=Go(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vg(e,t){const n=Go(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&bg(n)}function xg(e,t,n){const r=Go(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function bg(e){e.Y_.forEach(e=>{e.next()})}var wg,Ng;(Ng=wg||(wg={})).ea="default",Ng.Cache="cache";class Eg{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=hg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wg.Cache}}class kg{constructor(e){this.key=e}}class Ig{constructor(e){this.key=e}}class jg{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ed(),this.mutatedKeys=Ed(),this.Aa=ud(e),this.Ra=new ug(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new dg,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ld(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ko()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new hg(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ed(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Ig(e))}),this.da.forEach(n=>{e.has(n)||t.push(new kg(n))}),t}ba(e){this.Ta=e.Ts,this.da=Ed();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return hg.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Sg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _g{constructor(e){this.key=e,this.va=!1}}class Tg{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new hd(e=>ad(e),id),this.Ma=new Map,this.xa=new Set,this.Oa=new jc(gl.comparator),this.Na=new Map,this.La=new Um,this.Ba={},this.ka=new Map,this.qa=hm.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Cg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Xg(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Dg(r,t,n,!0),s}async function Ag(e,t){const n=Xg(e);await Dg(n,t,!0,!1)}async function Dg(e,t,n,r){const s=await cp(e.localStore,td(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Rg(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Op(e.remoteStore,s),o}async function Rg(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await dp(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Kg(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await dp(e.localStore,t,!0),a=new jg(t,i.Ts),o=a.ma(i.documents),l=bh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Kg(e,n,c.wa);const u=new Sg(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Pg(e,t,n){const r=Go(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!id(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await up(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lp(r.remoteStore,s.targetId),qg(r,s.targetId)}).catch(_l)):(qg(r,s.targetId),await up(r.localStore,s.targetId,!0))}async function Og(e,t){const n=Go(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lp(n.remoteStore,r.targetId))}async function Lg(e,t){const n=Go(e);try{const e=await function(e,t){const n=Go(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Pc.EMPTY_BYTE_STRING,dl.min()).withLastLimboFreeSnapshotVersion(dl.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=md(),l=Ed();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(op(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(dl.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Tl.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ho(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ho(r.va):e.removedDocuments.size>0&&(Ho(r.va),r.va=!1))}),await Qg(n,e,t)}catch(e){await _l(e)}}function Mg(e,t,n){const r=Go(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Go(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&bg(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ug(e,t,n){const r=Go(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new jc(gl.comparator);e=e.insert(i,gu.newNoDocument(i,dl.min()));const n=Ed().add(i),s=new xh(dl.min(),new Map,new jc(ol),e,n);await Lg(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),Gg(r)}else await up(r.localStore,t,!1).then(()=>qg(r,t,n)).catch(_l)}async function Fg(e,t){const n=Go(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Go(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Tl.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ho(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ed();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Bg(n,r,null),zg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qg(n,e)}catch(e){await _l(e)}}async function Vg(e,t,n){const r=Go(e);try{const e=await function(e,t){const n=Go(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ho(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Bg(r,t,n),zg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qg(r,e)}catch(n){await _l(n)}}function zg(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Bg(e,t,n){const r=Go(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Wg(e,t)})}function Wg(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Lp(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Gg(e))}function Kg(e,t,n){for(const r of n)r instanceof kg?(e.La.addReference(r.key,t),Hg(e,r)):r instanceof Ig?(zo("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Wg(e,r.key)):Ko()}function Hg(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(zo("SyncEngine","New document in limbo: "+n),e.xa.add(r),Gg(e))}function Gg(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new gl(fl.fromString(t)),r=e.qa.next();e.Na.set(r,new _g(n)),e.Oa=e.Oa.insert(n,r),Op(e.remoteStore,new cf(td(Xu(n.path)),r,"TargetPurposeLimboResolution",Bl.oe))}}async function Qg(e,t,n){const r=Go(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ep.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=Go(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Tl.forEach(t,t=>Tl.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Tl.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ol(e))throw e;zo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function Jg(e,t){const n=Go(e);if(!n.currentUser.isEqual(t)){zo("SyncEngine","User change. New user:",t.toKey());const e=await ip(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Jo(Qo.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Qg(n,e.hs)}}function Yg(e,t){const n=Go(e),r=n.Na.get(t);if(r&&r.va)return Ed().add(r.key);{let e=Ed();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Xg(e){const t=Go(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ug.bind(null,t),t.Ca.d_=vg.bind(null,t.eventManager),t.Ca.$a=xg.bind(null,t.eventManager),t}function $g(e){const t=Go(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vg.bind(null,t),t}class Zg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return sp(this.persistence,new np,e.initialUser,this.serializer)}Ga(e){return new Wm(Hm.Zr,this.serializer)}Wa(e){return new mp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zg.provider={build:()=>new Zg};class ey extends Zg{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await $g(this.Ja.syncEngine),await Jp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return sp(this.persistence,new np,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new xm(n,e.asyncQueue,t)}Ha(e,t){const n=new zl(t,this.persistence);return new Vl(e.asyncQueue,n)}Ga(e){const t=Zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sm.withCacheSize(this.cacheSizeBytes):sm.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ep(),kp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new mp}}class ty{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Mg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jg.bind(null,this.syncEngine),await ig(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new mg}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),n=function(e){return new Np(e)}(e.databaseInfo);return function(e,t,n,r){return new Cp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Dp(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Mg(this.syncEngine,e,0),gp.D()?new gp:new pp)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Tg(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Go(e);zo("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Pp(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}ty.provider={build:()=>new ty};class ny{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ry{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Mo.UNAUTHENTICATED,this.clientId=al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{zo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Qe){const n=cg(Qe,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function sy(e,t){e.asyncQueue.verifyOperationInProgress(),zo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ip(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function iy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ay(e);zo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sg(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sg(t.remoteStore,n)),e._onlineComponents=t}async function ay(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zo("FirestoreClient","Using user provided OfflineComponentProvider");try{await sy(e,e._uninitializedComponentsProvider._offline)}catch(Qe){const n=Qe;if(!function(e){return"FirebaseError"===e.name?e.code===Qo.FAILED_PRECONDITION||e.code===Qo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await sy(e,new Zg)}}else zo("FirestoreClient","Using default OfflineComponentProvider"),await sy(e,new Zg);return e._offlineComponents}async function oy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zo("FirestoreClient","Using user provided OnlineComponentProvider"),await iy(e,e._uninitializedComponentsProvider._online)):(zo("FirestoreClient","Using default OnlineComponentProvider"),await iy(e,new ty))),e._onlineComponents}function ly(e){return oy(e).then(e=>e.syncEngine)}async function cy(e){const t=await oy(e),n=t.eventManager;return n.onListen=Cg.bind(null,t.syncEngine),n.onUnlisten=Pg.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ag.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Og.bind(null,t.syncEngine),n}function uy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ny({next:o=>{i.Za(),t.enqueueAndForget(()=>yg(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Jo(Qo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Jo(Qo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Eg(Xu(n.path),i,{includeMetadataChanges:!0,_a:!0});return gg(e,a)}(await cy(e),e.asyncQueue,t,n,r)),r.promise}function dy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ny({next:n=>{i.Za(),t.enqueueAndForget(()=>yg(e,a)),n.fromCache&&"server"===r.source?s.reject(new Jo(Qo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Eg(n,i,{includeMetadataChanges:!0,_a:!0});return gg(e,a)}(await cy(e),e.asyncQueue,t,n,r)),r.promise}function hy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fy=new Map;function my(e,t,n){if(!n)throw new Jo(Qo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function py(e){if(!gl.isDocumentKey(e))throw new Jo(Qo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function gy(e){if(gl.isDocumentKey(e))throw new Jo(Qo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ko()}function vy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jo(Qo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yy(e);throw new Jo(Qo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function xy(e,t){if(t<=0)throw new Jo(Qo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class by{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jo(Qo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jo(Qo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Jo(Qo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Jo(Qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Jo(Qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Jo(Qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jo(Qo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jo(Qo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $o;switch(e.type){case"firstParty":return new nl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Jo(Qo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fy.get(e);t&&(zo("ComponentProvider","Removing Datastore"),fy.delete(e),t.terminate())}(this),Promise.resolve()}}function Ny(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=vy(e,wy))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Mo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[hn(JSON.stringify({alg:"none",type:"JWT"})),hn(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Jo(Qo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Mo(i)}e._authCredentials=new Zo(new Xo(t,n))}}class Ey{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ey(this.firestore,e,this._query)}}class ky{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ky(this.firestore,e,this._key)}}class Iy extends Ey{constructor(e,t,n){super(e,t,Xu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ky(this.firestore,null,new gl(e))}withConverter(e){return new Iy(this.firestore,e,this._path)}}function jy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Pn(e),my("collection","path",t),e instanceof wy){const n=fl.fromString(t,...r);return gy(n),new Iy(e,null,n)}{if(!(e instanceof ky||e instanceof Iy))throw new Jo(Qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(fl.fromString(t,...r));return gy(n),new Iy(e.firestore,null,n)}}function Sy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Pn(e),1===arguments.length&&(t=al.newId()),my("doc","path",t),e instanceof wy){const n=fl.fromString(t,...r);return py(n),new ky(e,null,new gl(n))}{if(!(e instanceof ky||e instanceof Iy))throw new Jo(Qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(fl.fromString(t,...r));return py(n),new ky(e.firestore,e instanceof Iy?e.converter:null,new gl(n))}}class _y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jp(this,"async_queue_retry"),this.Vu=()=>{const e=kp();e&&zo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=kp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Yo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Ge){if(!Ol(Ge))throw Ge;zo("AsyncQueue","Operation failed with retryable error: "+Ge)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bo("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=lg.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Ko()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Ty(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Cy extends wy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new _y,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _y(e),this._firestoreClient=void 0,await e}}}function Ay(e){if(e._terminated)throw new Jo(Qo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Dy(e),e._firestoreClient}function Dy(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Bc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new ry(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Ry{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ry(Pc.fromBase64String(e))}catch(e){throw new Jo(Qo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ry(Pc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Py{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oy{constructor(e){this._methodName=e}}class Ly{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jo(Qo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jo(Qo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ol(this._lat,e._lat)||ol(this._long,e._long)}}class My{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Uy=/^__.*__$/;class Fy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $d(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xd(e,this.data,t,this.fieldTransforms)}}class Vy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $d(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ko()}}class By{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new By(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ov(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(zy(this.Cu)&&Uy.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ip(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new By({Cu:e,methodName:t,qu:n,path:pl.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wy(e){const t=e._freezeSettings(),n=Ip(e._databaseId);return new qy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ky(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);rv("Data must be an object, but it was:",a,r);const o=tv(r,a);let l,c;if(i.merge)l=new Dc(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=sv(t,r,n);if(!a.contains(s))throw new Jo(Qo.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));lv(e,s)||e.push(s)}l=new Dc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Fy(new mu(o),l,c)}class Hy extends Oy{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hy}}function Gy(e,t,n){return new By({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Qy extends Oy{_toFieldTransform(e){return new zd(e.path,new Rd)}isEqual(e){return e instanceof Qy}}class Jy extends Oy{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Gy(this,e,!0),n=this.Ku.map(e=>ev(e,t)),r=new Pd(n);return new zd(e.path,r)}isEqual(e){return e instanceof Jy&&Sn(this.Ku,e.Ku)}}class Yy extends Oy{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ud(e.serializer,_d(e.serializer,this.$u));return new zd(e.path,t)}isEqual(e){return e instanceof Yy&&this.$u===e.$u}}function Xy(e,t,n,r){const s=e.Qu(1,t,n);rv("Data must be an object, but it was:",s,r);const i=[],a=mu.empty();kc(r,(e,r)=>{const o=av(t,e,n);r=Pn(r);const l=s.Nu(o);if(r instanceof Hy)i.push(o);else{const e=ev(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Dc(i);return new Vy(a,o,s.fieldTransforms)}function $y(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[sv(t,r,n)],l=[s];if(i.length%2!=0)throw new Jo(Qo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(sv(t,i[h])),l.push(i[h+1]);const c=[],u=mu.empty();for(let h=o.length-1;h>=0;--h)if(!lv(c,o[h])){const e=o[h];let t=l[h];t=Pn(t);const n=a.Nu(e);if(t instanceof Hy)c.push(e);else{const r=ev(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Dc(c);return new Vy(u,d,a.fieldTransforms)}function Zy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ev(n,e.Qu(r?4:3,t))}function ev(e,t){if(nv(e=Pn(e)))return rv("Unsupported field value:",t,e),tv(e,t);if(e instanceof Oy)return function(e,t){if(!zy(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ev(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Pn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _d(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ul.fromDate(e);return{timestampValue:Rh(t.serializer,n)}}if(e instanceof ul){const n=new ul(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rh(t.serializer,n)}}if(e instanceof Ly)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ry)return{bytesValue:Ph(t.serializer,e._byteString)};if(e instanceof ky){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Mh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof My)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return jd(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(yy(e)))}(e,t)}function tv(e,t){const n={};return Ic(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kc(e,(e,r)=>{const s=ev(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function nv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ul||e instanceof Ly||e instanceof Ry||e instanceof ky||e instanceof Oy||e instanceof My)}function rv(e,t,n){if(!nv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=yy(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function sv(e,t,n){if((t=Pn(t))instanceof Py)return t._internalPath;if("string"==typeof t)return av(e,t);throw ov("Field path arguments must be of type string or ",e,!1,void 0,n)}const iv=new RegExp("[~\\*/\\[\\]]");function av(e,t,n){if(t.search(iv)>=0)throw ov("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Py(...t.split("."))._internalPath}catch(r){throw ov("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ov(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Jo(Qo.INVALID_ARGUMENT,o+e+l)}function lv(e,t){return e.some(e=>e.isEqual(t))}class cv{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ky(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uv extends cv{data(){return super.data()}}function dv(e,t){return"string"==typeof t?av(e,t):t instanceof Py?t._internalPath:t._delegate._internalPath}function hv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Jo(Qo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fv{}class mv extends fv{}function pv(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof fv&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof vv).length,n=e.filter(e=>e instanceof gv).length;if(t>1||t>0&&n>0)throw new Jo(Qo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class gv extends mv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new gv(e,t,n)}_apply(e){const t=this._parse(e);return Iv(e._query,t),new Ey(e.firestore,e.converter,rd(e._query,t))}_parse(e){const t=Wy(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){kv(a,i);const t=[];for(const n of a)t.push(Ev(r,e,n));o={arrayValue:{values:t}}}else o=Ev(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||kv(a,i),o=Zy(n,t,a,"in"===i||"not-in"===i);return Eu.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function yv(e,t,n){const r=t,s=dv("where",e);return gv._create(s,r,n)}class vv extends fv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ku.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Iv(n,s),n=rd(n,s)}(e._query,t),new Ey(e.firestore,e.converter,rd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xv extends mv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(t,n)}(e._query,this._field,this._direction);return new Ey(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ju(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function bv(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dv("orderBy",e);return xv._create(n,t)}class wv extends mv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new wv(e,t,n)}_apply(e){return new Ey(e.firestore,e.converter,sd(e._query,this._limit,this._limitType))}}function Nv(e){return xy("limit",e),wv._create("limit",e,"F")}function Ev(e,t,n){if("string"==typeof(n=Pn(n))){if(""===n)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zu(t)&&-1!==n.indexOf("/"))throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(fl.fromString(n));if(!gl.isDocumentKey(r))throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return eu(e,new gl(r))}if(n instanceof ky)return eu(e,n._key);throw new Jo(Qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yy(n),"."))}function kv(e,t){if(!Array.isArray(e)||0===e.length)throw new Jo(Qo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Iv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Jo(Qo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Jo(Qo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class jv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ko()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return kc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Mc(e.doubleValue));return new My(s)}convertGeoPoint(e){return new Ly(Mc(e.latitude),Mc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){const t=Lc(e);return new ul(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=fl.fromString(e);Ho(lf(n));const r=new qc(n.get(1),n.get(3)),s=new gl(n.popFirst(5));return r.isEqual(t)||Bo("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Sv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class _v{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tv extends cv{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Cv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Cv extends Tv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Av{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _v(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Cv(this._firestore,this._userDataWriter,n.key,n,new _v(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jo(Qo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Cv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new _v(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Cv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _v(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Dv(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Dv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ko()}}function Rv(e){e=vy(e,ky);const t=vy(e.firestore,Cy);return uy(Ay(t),e._key).then(n=>Vv(t,e,n))}class Pv extends jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ry(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ky(this.firestore,null,t)}}function Ov(e){e=vy(e,Ey);const t=vy(e.firestore,Cy),n=Ay(t),r=new Pv(t);return hv(e._query),dy(n,e._query).then(n=>new Av(t,r,e,n))}function Lv(e,t,n){e=vy(e,ky);const r=vy(e.firestore,Cy),s=Sv(e.converter,t,n);return Fv(r,[Ky(Wy(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,qd.none())])}function Mv(e,t,n){e=vy(e,ky);const r=vy(e.firestore,Cy),s=Wy(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=Pn(t))||t instanceof Py?$y(s,"updateDoc",e._key,t,n,o):Xy(s,"updateDoc",e._key,t),Fv(r,[i.toMutation(e._key,qd.exists(!0))])}function Uv(e,t){const n=vy(e.firestore,Cy),r=Sy(e),s=Sv(e.converter,t);return Fv(n,[Ky(Wy(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,qd.exists(!1))]).then(()=>r)}function Fv(e,t){return function(e,t){const n=new Yo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=$g(e);try{const e=await function(e,t){const n=Go(e),r=ul.now(),s=t.reduce((e,t)=>e.add(t.key),Ed());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=md(),l=Ed();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Jd(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new $d(e.key,t,pu(t.value.mapValue),qd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:yd(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new jc(ol)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Qg(r,e.changes),await Jp(r.remoteStore)}catch(e){const t=cg(e,"Failed to persist write");n.reject(t)}}(await ly(e),t,n)),n.promise}(Ay(e),t)}function Vv(e,t,n){const r=n.docs.get(t._key),s=new Pv(e);return new Tv(e,s,t._key,r,new _v(n.hasPendingWrites,n.fromCache),t.converter)}class zv{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=function(e){return new Bv(null==e?void 0:e.forceOwnership)}(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Bv{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ty.provider,this._offlineComponentProvider={build:t=>new ey(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function qv(){return new Qy("serverTimestamp")}function Wv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jy("arrayUnion",t)}function Kv(e){return new Yy("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Uo=e}(Jr),Wr(new On("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Cy(new el(e.getProvider("auth-internal")),new sl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jo(Qo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$r(Lo,"4.7.3",e),$r(Lo,"4.7.3","esm2017")}();const Hv="functions";class Gv{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(Ge){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(Ge){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const Qv="us-central1";class Jv{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qv,i=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Gv(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=Qv}catch(Ge){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const Yv="@firebase/functions",Xv="0.11.8";!function(e,t){Wr(new On(Hv,(t,n)=>{let{instanceIdentifier:r}=n;const s=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),a=t.getProvider("messaging-internal"),o=t.getProvider("app-check-internal");return new Jv(s,i,a,o,r,e)},"PUBLIC").setMultipleInstances(!0)),$r(Yv,Xv,t),$r(Yv,Xv,"esm2017")}(fetch.bind(self));var $v=n(403);const Zv={apiKey:"AIzaSyDOSPy-XiyeO6U5msKuzINnqvFqnD8C0e0",authDomain:"refer-earn-platform.firebaseapp.com",projectId:"refer-earn-platform",storageBucket:"refer-earn-platform.firebasestorage.app",messagingSenderId:"886797203704",appId:"1:886797203704:web:13a9b346c92d9fa0f2e30d",measurementId:"G-NV1ER35PM6"},ex=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(e=>!Zv[e]);if(ex.length>0)throw console.error("Missing Firebase configuration keys:",ex),new Error("Missing Firebase configuration. Missing keys: ".concat(ex.join(", ")));const tx=Yr(Zv),nx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr();const t=Kr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Kr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Sn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ps(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:po,persistence:[ja,ca,da]}),r=xn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>xo)return;const r=null===t||void 0===t?void 0:t.token;bo!==r&&(bo=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Pn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Pn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=gn("auth");return i&&Ai(n,"http://".concat(i)),n}(tx);let rx;rx=$v.Ii.isNativePlatform()?function(e,t,n){n||(n="(default)");const r=Kr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Sn(r.getOptions(n),t))return e;throw new Jo(Qo.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Jo(Qo.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Jo(Qo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(tx,{localCache:function(e){return new zv(e)}()}):function(e,t){const n="string"==typeof e?e:t||"(default)",r=Kr("object"==typeof e?e:Xr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=yn("firestore");e&&Ny(r,...e)}return r}(tx);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qv;const n=Kr(Pn(e),Hv).getImmediate({identifier:t}),r=yn("functions");r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(Pn(e),t,n)}(n,...r)}(tx);var sx=n(579);const ix=(0,s.createContext)(),ax=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=function(e,t,n,r){return Pn(e).onAuthStateChanged(t,n,r)}(nx,async e=>{if(e){r(e);const t=await Rv(Sy(rx,"users",e.uid));t.exists()&&a(He({id:t.id},t.data()))}else r(null),a(null);l(!1)});return e},[]);const c={user:n,userData:i,loading:o,signOut:async()=>{await function(e){return Pn(e).signOut()}(nx),r(null),a(null)},refreshUserData:async()=>{if(n){const e=await Rv(Sy(rx,"users",n.uid));e.exists()&&a(He({id:e.id},e.data()))}},isAdmin:"admin"===(null===i||void 0===i?void 0:i.role)};return(0,sx.jsx)(ix.Provider,{value:c,children:t})},ox=()=>{const e=(0,s.useContext)(ix);if(!e)throw new Error("useAuth must be used within AuthProvider");return e};var lx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cx=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],ux=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u}=n,d=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,cx);return(0,s.createElement)("svg",He(He({ref:r},lx),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},d),[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...Array.isArray(u)?u:[u]]);var h});return n.displayName="".concat(e),n},dx=ux("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),hx=ux("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fx=ux("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),mx=()=>{const e=re(),{userData:t}=ox(),[n,r]=(0,s.useState)({email:"",password:""}),[i,a]=(0,s.useState)(!1),o=e=>{r(He(He({},n),{},{[e.target.name]:e.target.value}))};return(0,sx.jsx)("div",{className:"flex justify-center items-center px-4 py-12 min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 sm:px-6 lg:px-8",children:(0,sx.jsxs)("div",{className:"w-full max-w-md",children:[(0,sx.jsxs)("div",{className:"mb-8 text-center",children:[(0,sx.jsx)("div",{className:"flex justify-center mb-4",children:(0,sx.jsx)("div",{className:"p-3 rounded-full bg-primary-600",children:(0,sx.jsx)(dx,{className:"w-8 h-8 text-white"})})}),(0,sx.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Welcome Back"}),(0,sx.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your account"})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{await function(e,t,n){return Hr(e.app)?Promise.reject(vs(e)):sa(Pn(e),qi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ia(e),t})}(nx,n.email,n.password),ln.success("Login successful!"),e("/user/dashboard")}catch(r){console.error("Login error:",r),"auth/invalid-credential"===r.code?ln.error("Invalid email or password"):"auth/user-not-found"===r.code?ln.error("No account found with this email"):ln.error("Login failed. Please try again.")}finally{a(!1)}},className:"space-y-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Email Address"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(hx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"email",name:"email",value:n.email,onChange:o,className:"pl-10 input-field",placeholder:"john@example.com",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Password"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(fx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"password",name:"password",value:n.password,onChange:o,className:"pl-10 input-field",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]})]}),(0,sx.jsx)("button",{type:"submit",disabled:i,className:"w-full btn-primary disabled:opacity-50",children:i?"Signing in...":"Sign In"})]}),(0,sx.jsx)("div",{className:"mt-6",children:(0,sx.jsx)("div",{className:"text-center",children:(0,sx.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,sx.jsx)(Oe,{to:"/register",className:"font-semibold text-primary-600 hover:text-primary-700",children:"Sign up"})]})})})]})]})})},px=ux("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),gx=ux("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),yx=ux("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),vx=ux("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),xx=ux("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),bx=ux("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),wx=ux("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Nx=ux("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ex=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),kx=e=>{if(!e)return"N/A";const t=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},Ix=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(t){return!1}},jx=()=>{const e=re(),[t]=Ve(),[n,r]=(0,s.useState)({name:"",email:"",phone:"",password:"",confirmPassword:"",referralCode:t.get("ref")||""}),[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)({isValid:null,message:"",referrerName:"",error:null});(0,s.useEffect)(()=>{const e=n.referralCode.trim();if(e&&e.length>=3){const t=setTimeout(()=>{d(e)},500);return()=>clearTimeout(t)}u({isValid:null,message:"",referrerName:"",error:null})},[n.referralCode]);const d=async e=>{if(!e||e.trim().length<3)return void u({isValid:null,message:"",referrerName:"",error:null});l(!0);const t=e.toUpperCase();try{const e=Sy(rx,"referralCodes",t),n=await Rv(e);if(!n.exists())return console.log("\u274c Referral code not found in collection"),u({isValid:!1,message:"Invalid referral code",referrerName:"",error:"Code not found"}),void l(!1);const r=n.data();if(!r.isActive){console.log("\u26a0\ufe0f Referrer account not active");const e=r.userName||"This user";return u({isValid:!1,message:"".concat(e,"'s account is not activated yet"),referrerName:r.userName||"Unknown",error:"Not active"}),void l(!1)}console.log("\u2705 Referral code is valid!"),u({isValid:!0,message:"You will be referred by ".concat(r.userName),referrerName:r.userName,error:null})}catch(n){console.error("\u274c Error validating referral code:",n),console.error("Error code:",n.code),console.error("Error message:",n.message);let e="Error validating code";"permission-denied"===n.code?e="Permission denied. Please check Firestore rules.":"unavailable"===n.code&&(e="Network error. Please check your connection."),u({isValid:!1,message:e,referrerName:"",error:n.message})}finally{l(!1)}},h=e=>{const{name:t,value:s}=e.target;r(He(He({},n),{},{[t]:s}))};return(0,sx.jsx)("div",{className:"flex justify-center items-center px-4 py-12 min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 sm:px-6 lg:px-8",children:(0,sx.jsxs)("div",{className:"w-full max-w-md",children:[(0,sx.jsxs)("div",{className:"mb-8 text-center",children:[(0,sx.jsx)("div",{className:"flex justify-center mb-4",children:(0,sx.jsx)("div",{className:"p-3 rounded-full bg-primary-600",children:(0,sx.jsx)(px,{className:"w-8 h-8 text-white"})})}),(0,sx.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Create Account"}),(0,sx.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Join our refer & earn platform"})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!n.name||!n.email||!n.phone||!n.password)return void ln.error("Please fill all required fields");if(r=n.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return void ln.error("Please enter a valid email");var r,s;if(s=n.phone,!/^[6-9]\d{9}$/.test(s))return void ln.error("Please enter a valid 10-digit phone number");if(n.password.length<6)return void ln.error("Password must be at least 6 characters");if(n.password!==n.confirmPassword)return void ln.error("Passwords do not match");const i=n.referralCode.trim();if(i&&!0!==c.isValid)ln.error("Please enter a valid referral code or leave it empty");else{a(!0),console.log("\ud83d\udcdd Starting registration...");try{let t,r=null,s=null;if(i&&!0===c.isValid){const e=i.toUpperCase();try{const t=Sy(rx,"referralCodes",e),n=await Rv(t);n.exists()&&(r=n.data().userId,s=e)}catch(o){throw console.error("\u274c Error fetching referral code:",o),console.error("Error code:",o.code),console.error("Error message:",o.message),new Error("Failed to validate referral code")}}console.log("\ud83d\udc64 Creating auth user...");try{t=await async function(e,t,n){if(Hr(e.app))return Promise.reject(vs(e));const r=Ei(e),s=Ci(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yi),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ia(e),t}),a=await Xi._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(nx,n.email,n.password)}catch(o){throw console.error("\u274c Auth creation failed:",o),o}const a=t.user,l=((e,t)=>{const n=Math.floor(1e3+9e3*Math.random()),r=e.substring(0,3).toUpperCase(),s=t.substring(0,4).toUpperCase();return"".concat(r).concat(n).concat(s)})(n.name,a.uid),u={name:n.name,email:n.email,phone:n.phone,referralCode:l,referredBy:s,referrerId:r,isReferralActive:!1,wallet:{balance:0,lastUpdated:qv()},stats:{totalReferrals:0,activeReferrals:0,totalEarnings:0},role:"user",createdAt:qv(),updatedAt:qv()};console.log("\ud83d\udcc4 Creating user document...");try{await Lv(Sy(rx,"users",a.uid),u),console.log("\u2705 User document created successfully")}catch(o){throw console.error("\u274c FAILED: User document creation"),console.error("Error code:",o.code),console.error("Error message:",o.message),console.error("Full error:",o),await a.delete(),new Error("Failed to create user profile: ".concat(o.message))}try{await Lv(Sy(rx,"referralCodes",l),{userId:a.uid,userName:n.name,isActive:!1,createdAt:qv()})}catch(o){console.error("\u274c FAILED: Referral code creation"),console.error("Error code:",o.code),console.error("Error message:",o.message),console.error("Full error:",o),console.warn("\u26a0\ufe0f Continuing despite referral code error")}ln.success("Account created successfully!"),console.log("\ud83c\udf89 Registration complete!"),e("/user/dashboard")}catch(o){console.error("\u274c Registration error:",o),"auth/email-already-in-use"===o.code?ln.error("Email already registered"):"auth/weak-password"===o.code?ln.error("Password is too weak"):"auth/invalid-email"===o.code?ln.error("Invalid email address"):"permission-denied"===o.code?(ln.error("Permission denied. Please contact support."),console.error("\ud83d\udea8 PERMISSION DENIED - Check Firestore rules!")):ln.error(o.message||"Registration failed")}finally{a(!1)}}},className:"space-y-4",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Full Name *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(gx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"text",name:"name",value:n.name,onChange:h,className:"pl-10 input-field",placeholder:"John Doe",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Email Address *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(hx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"email",name:"email",value:n.email,onChange:h,className:"pl-10 input-field",placeholder:"john@example.com",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Phone Number *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(yx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"tel",name:"phone",value:n.phone,onChange:h,className:"pl-10 input-field",placeholder:"9876543210",maxLength:"10",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Password *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(fx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"password",name:"password",value:n.password,onChange:h,className:"pl-10 input-field",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Confirm Password *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(fx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:h,className:"pl-10 input-field",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Referral Code (Optional)"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(vx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"text",name:"referralCode",value:n.referralCode,onChange:h,className:"input-field pl-10 pr-10 uppercase ".concat(!0===c.isValid?"border-green-500 focus:border-green-500 focus:ring-green-500":!1===c.isValid?"border-red-500 focus:border-red-500 focus:ring-red-500":""),placeholder:"Enter referral code",maxLength:"20"}),o&&(0,sx.jsx)(xx,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 animate-spin"}),!o&&!0===c.isValid&&(0,sx.jsx)(bx,{className:"absolute right-3 top-2.5 h-5 w-5 text-green-500"}),!o&&!1===c.isValid&&(0,sx.jsx)(wx,{className:"absolute right-3 top-2.5 h-5 w-5 text-red-500"})]}),c.message&&(0,sx.jsx)("div",{className:"mt-2 p-2 rounded-lg text-sm ".concat(c.isValid?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:(0,sx.jsxs)("div",{className:"flex items-start space-x-2",children:[c.isValid?(0,sx.jsx)(bx,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}):(0,sx.jsx)(Nx,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,sx.jsx)("span",{children:c.message})]})})]}),(0,sx.jsx)("button",{type:"submit",disabled:i,className:"mt-6 w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,sx.jsxs)("span",{className:"flex justify-center items-center",children:[(0,sx.jsx)(xx,{className:"mr-3 -ml-1 w-5 h-5 text-white animate-spin"}),"Creating Account..."]}):"Create Account"})]}),(0,sx.jsx)("div",{className:"mt-6 text-center",children:(0,sx.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,sx.jsx)(Oe,{to:"/login",className:"font-semibold text-primary-600 hover:text-primary-700",children:"Sign in"})]})})]})]})})},Sx=e=>{let{children:t,adminOnly:n=!1}=e;const{user:r,userData:s,loading:i}=ox();return i?(0,sx.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?n&&"admin"!==(null===s||void 0===s?void 0:s.role)?(0,sx.jsx)(ve,{to:"/user/dashboard"}):n||"admin"!==(null===s||void 0===s?void 0:s.role)?t:(0,sx.jsx)(ve,{to:"/admin/dashboard"}):(0,sx.jsx)(ve,{to:"/login"})},_x=ux("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Tx=ux("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Cx=ux("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Ax=ux("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Dx=ux("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Rx=()=>{const{user:e}=ox(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(0),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!e)return;c(!0);const t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=Pn(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Ty(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ty(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof ky)d=vy(e.firestore,Cy),h=Xu(e._key.path),u={next:t=>{n[l]&&n[l](Vv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=vy(e,Ey);d=vy(t.firestore,Cy),h=t._query;const r=new Pv(d);u={next:e=>{n[l]&&n[l](new Av(d,r,t,e))},error:n[l+1],complete:n[l+2]},hv(e._query)}return function(e,t,n,r){const s=new ny(r),i=new Eg(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>gg(await cy(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>yg(await cy(e),i))}}(Ay(d),h,c,u)}(pv(jy(rx,"notifications"),yv("userId","==",e.uid),bv("createdAt","desc")),e=>{const t=e.docs.map(e=>He({id:e.id},e.data()));n(t),i(t.filter(e=>!e.read).length),c(!1)},e=>{console.error("Error fetching notifications:",e),c(!1)});return()=>t()},[e]);const u=e=>{switch(e){case"REFERRAL_ACTIVATED":return"\ud83c\udf89";case"ACTIVATION_APPROVED":return"\u2705";case"ACTIVATION_REJECTED":case"WITHDRAWAL_REJECTED":return"\u274c";case"ACTIVATION_SUBMITTED":return"\u23f3";case"WITHDRAWAL_APPROVED":return"\ud83d\udcb0";case"WELCOME":return"\ud83d\udc4b";default:return"\ud83d\udd14"}};return e?(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsxs)("button",{onClick:()=>o(!a),className:"relative p-2 text-gray-600 transition hover:text-gray-900",children:[(0,sx.jsx)(Dx,{className:"w-6 h-6"}),r>0&&(0,sx.jsx)("span",{className:"inline-flex absolute top-0 right-0 justify-center items-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full transform translate-x-1/2 -translate-y-1/2",children:r>9?"9+":r})]}),a&&(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,sx.jsxs)("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-2xl z-20 max-h-[32rem] overflow-hidden border border-gray-200",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 border-b border-gray-200",children:[(0,sx.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Notifications"}),(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[r>0&&(0,sx.jsx)("button",{onClick:async()=>{try{const e=t.filter(e=>!e.read),n=e.map(e=>Mv(Sy(rx,"notifications",e.id),{read:!0,readAt:qv()}));await Promise.all(n)}catch(e){console.error("Error marking all as read:",e)}},className:"text-xs font-semibold text-primary-600 hover:text-primary-700",children:"Mark all read"}),(0,sx.jsx)("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:(0,sx.jsx)(_x,{className:"w-5 h-5"})})]})]}),(0,sx.jsx)("div",{className:"overflow-y-auto max-h-96",children:l?(0,sx.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,sx.jsx)("div",{className:"w-8 h-8 rounded-full border-b-2 animate-spin border-primary-600"})}):0===t.length?(0,sx.jsxs)("div",{className:"py-8 text-center text-gray-500",children:[(0,sx.jsx)(Dx,{className:"mx-auto mb-3 w-12 h-12 text-gray-300"}),(0,sx.jsx)("p",{children:"No notifications yet"})]}):t.map(e=>(0,sx.jsx)("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 transition cursor-pointer ".concat(e.read?"":"bg-blue-50"),onClick:()=>{e.read||(async e=>{try{await Mv(Sy(rx,"notifications",e),{read:!0,readAt:qv()})}catch(t){console.error("Error marking notification as read:",t)}})(e.id)},children:(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("span",{className:"flex-shrink-0 text-2xl",children:u(e.type)}),(0,sx.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,sx.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.title}),(0,sx.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.message}),e.amount&&(0,sx.jsxs)("p",{className:"mt-1 text-sm font-semibold text-green-600",children:["Amount: \u20b9",e.amount]}),(0,sx.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:kx(e.createdAt)})]}),!e.read&&(0,sx.jsx)("div",{className:"flex-shrink-0",children:(0,sx.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},e.id))})]})]})]}):null},Px=e=>{var t,n;let{sidebarOpen:r,setSidebarOpen:i}=e;const{userData:a,signOut:o,isAdmin:l}=ox(),c=re(),[u,d]=(0,s.useState)(!1);return(0,sx.jsx)("nav",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 shadow-md",children:(0,sx.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,sx.jsxs)("div",{className:"flex items-center",children:[(0,sx.jsx)("button",{onClick:()=>i(!r),className:"p-2 mr-4 rounded-lg lg:hidden hover:bg-gray-100",children:r?(0,sx.jsx)(_x,{className:"w-6 h-6"}):(0,sx.jsx)(Tx,{className:"w-6 h-6"})}),(0,sx.jsxs)(Oe,{to:l?"/admin/dashboard":"/user/dashboard",className:"flex items-center",children:[(0,sx.jsx)("div",{className:"px-3 py-1 text-xl font-bold text-white rounded-lg bg-primary-600",children:"R&E"}),(0,sx.jsx)("span",{className:"hidden ml-2 text-xl font-bold text-gray-900 sm:block",children:"Refer & Earn"})]})]}),(0,sx.jsxs)("div",{className:"flex items-center space-x-4",children:[!l&&(0,sx.jsxs)("div",{className:"hidden items-center px-4 py-2 bg-green-50 rounded-lg border border-green-200 md:flex",children:[(0,sx.jsx)(Cx,{className:"mr-2 w-5 h-5 text-green-600"}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-xs text-green-600",children:"Wallet Balance"}),(0,sx.jsx)("p",{className:"font-bold text-green-700",children:Ex((null===a||void 0===a||null===(t=a.wallet)||void 0===t?void 0:t.balance)||0)})]})]}),(0,sx.jsx)(Rx,{}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsxs)("button",{onClick:()=>d(!u),className:"flex items-center p-2 space-x-2 rounded-lg hover:bg-gray-100",children:[(0,sx.jsx)("div",{className:"flex justify-center items-center w-10 h-10 font-semibold text-white rounded-full bg-primary-600",children:null===a||void 0===a||null===(n=a.name)||void 0===n?void 0:n.charAt(0).toUpperCase()}),(0,sx.jsxs)("div",{className:"hidden text-left md:block",children:[(0,sx.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null===a||void 0===a?void 0:a.name}),(0,sx.jsx)("p",{className:"text-xs text-gray-500",children:l?"Admin":"User"})]})]}),u&&(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,sx.jsxs)("div",{className:"absolute right-0 z-20 py-2 mt-2 w-48 bg-white rounded-lg border border-gray-200 shadow-xl",children:[(0,sx.jsxs)("div",{className:"px-4 py-2 border-b border-gray-200",children:[(0,sx.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null===a||void 0===a?void 0:a.name}),(0,sx.jsx)("p",{className:"text-xs text-gray-500",children:null===a||void 0===a?void 0:a.email})]}),(0,sx.jsxs)("button",{onClick:async()=>{try{await o(),ln.success("Logged out successfully"),c("/login")}catch(e){ln.error("Failed to logout")}},className:"flex items-center px-4 py-2 space-x-2 w-full text-sm text-left text-red-600 hover:bg-red-50",children:[(0,sx.jsx)(Ax,{className:"w-4 h-4"}),(0,sx.jsx)("span",{children:"Sign Out"})]})]})]})]})]})]})})})},Ox=ux("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Lx=ux("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Mx=ux("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ux=ux("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Fx=ux("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Vx=ux("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),zx=ux("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Bx=e=>{let{sidebarOpen:t,setSidebarOpen:n}=e;const{isAdmin:r}=ox(),s=r?[{name:"Dashboard",icon:Ox,path:"/admin/dashboard"},{name:"Users",icon:Mx,path:"/admin/users"},{name:"Withdrawals",icon:Lx,path:"/admin/withdrawals"},{name:"Transactions",icon:Vx,path:"/admin/transactions"},{name:"Activations",icon:vx,path:"/admin/activations"},{name:"Statistics",icon:zx,path:"/admin/stats"},{name:"My Earnings",icon:Cx,path:"/admin/earnings"},{name:"Support Tickets",icon:Fx,path:"/admin/support"}]:[{name:"Dashboard",icon:Ox,path:"/user/dashboard"},{name:"Withdraw",icon:Lx,path:"/user/withdraw"},{name:"Referrals",icon:Mx,path:"/user/referrals"},{name:"Transactions",icon:Ux,path:"/user/transactions"},{name:"Support",icon:Fx,path:"/user/support"}];return(0,sx.jsxs)(sx.Fragment,{children:[t&&(0,sx.jsx)("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 lg:hidden",onClick:()=>n(!1)}),(0,sx.jsx)("aside",{className:"fixed lg:sticky top-16 left-0 h-[calc(100vh-4rem)] w-64 bg-white border-r border-gray-200 z-30 transition-transform duration-300 ".concat(t?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,sx.jsx)("nav",{className:"p-4 space-y-2",children:s.map(e=>(0,sx.jsxs)(Le,{to:e.path,onClick:()=>n(!1),className:e=>{let{isActive:t}=e;return"flex items-center space-x-3 px-4 py-3 rounded-lg transition ".concat(t?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100")},children:[(0,sx.jsx)(e.icon,{className:"w-5 h-5"}),(0,sx.jsx)("span",{className:"font-medium",children:e.name})]},e.path))})})]})},qx=ux("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Wx=ux("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Kx=ux("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Hx=ux("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),Gx=ux("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Qx=ux("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Jx=()=>{const{userData:e}=ox(),[t,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(e&&e.createdAt){const t=e.createdAt.toDate(),r=(new Date-t)/36e5,s=localStorage.getItem("welcomeBanner_".concat(e.id));r<24&&!s&&n(!0)}},[e]);return t?(0,sx.jsx)("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white rounded-xl shadow-2xl overflow-hidden mb-6",children:(0,sx.jsxs)("div",{className:"relative p-6 md:p-8",children:[(0,sx.jsx)("button",{onClick:()=>{localStorage.setItem("welcomeBanner_".concat(e.id),"true"),n(!1)},className:"absolute top-4 right-4 text-white hover:bg-white/20 rounded-full p-1 transition",children:(0,sx.jsx)(_x,{className:"h-5 w-5"})}),(0,sx.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,sx.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full",children:(0,sx.jsx)(Qx,{className:"h-8 w-8"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:["Welcome, ",null===e||void 0===e?void 0:e.name,"! \ud83c\udf89"]}),(0,sx.jsx)("p",{className:"text-purple-100 mb-4",children:"You're now part of our refer & earn community! Here's how to get started:"}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,sx.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sx.jsx)(vx,{className:"h-5 w-5 text-yellow-300"}),(0,sx.jsx)("span",{className:"font-semibold",children:"Step 1"})]}),(0,sx.jsx)("p",{className:"text-sm text-purple-100",children:null!==e&&void 0!==e&&e.isReferralActive?"\u2713 Account Activated!":"Activate your account with \u20b920"})]}),(0,sx.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sx.jsx)(Mx,{className:"h-5 w-5 text-green-300"}),(0,sx.jsx)("span",{className:"font-semibold",children:"Step 2"})]}),(0,sx.jsx)("p",{className:"text-sm text-purple-100",children:"Share your referral code with friends"})]}),(0,sx.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sx.jsx)(zx,{className:"h-5 w-5 text-blue-300"}),(0,sx.jsx)("span",{className:"font-semibold",children:"Step 3"})]}),(0,sx.jsx)("p",{className:"text-sm text-purple-100",children:"Earn \u20b910 for every friend who activates!"})]})]}),!(null!==e&&void 0!==e&&e.isReferralActive)&&(0,sx.jsx)("div",{className:"mt-6",children:(0,sx.jsx)("a",{href:"/user/activate",className:"inline-block bg-white text-purple-600 hover:bg-purple-50 font-bold py-3 px-6 rounded-lg transition shadow-lg",children:"Activate Now & Start Earning"})})]})]}),(0,sx.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),(0,sx.jsx)("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-32 h-32 bg-purple-800/30 rounded-full blur-2xl"})]})}):null},Yx=()=>{var e,t;const{userData:n,refreshUserData:r}=ox(),[i,a]=(0,s.useState)({referrals:[],recentTransactions:[],monthlyReferrals:0}),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!0),d=re();(0,s.useEffect)(()=>{h()},[n]);const h=async()=>{if(n)try{const e=pv(jy(rx,"users"),yv("referrerId","==",n.id)),t=(await Ov(e)).docs.map(e=>He({id:e.id},e.data())),r=new Date;r.setDate(1),r.setHours(0,0,0,0);const s=t.filter(e=>{var t;return(null===(t=e.createdAt)||void 0===t?void 0:t.toDate())>=r}),i=pv(jy(rx,"transactions"),yv("userId","==",n.id),bv("createdAt","desc"),Nv(5)),o=(await Ov(i)).docs.map(e=>He({id:e.id},e.data()));a({referrals:t,recentTransactions:o,monthlyReferrals:s.length})}catch(e){console.error("Error fetching stats:",e)}finally{u(!1)}};return c?(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsx)(Jx,{}),(0,sx.jsx)("div",{className:"text-white bg-gradient-to-r card from-primary-600 to-primary-700",children:(0,sx.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("h1",{className:"mb-2 text-3xl font-bold",children:["Welcome, ",null===n||void 0===n?void 0:n.name,"!"]}),(0,sx.jsx)("p",{className:"text-primary-100",children:"Here's your earnings overview"})]}),(0,sx.jsxs)("div",{className:"px-4 py-2 rounded-lg backdrop-blur-sm bg-white/20",children:[(0,sx.jsx)("p",{className:"text-xs text-primary-100",children:"Account Status"}),(0,sx.jsx)("p",{className:"text-sm font-semibold",children:null!==n&&void 0!==n&&n.isReferralActive?"\u2705 Active":"\u23f3 Pending Activation"})]})]})}),!(null!==n&&void 0!==n&&n.isReferralActive)&&(0,sx.jsx)("div",{className:"bg-yellow-50 border-yellow-200 card",children:(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,sx.jsx)(vx,{className:"w-6 h-6 text-yellow-600"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h3",{className:"mb-1 font-semibold text-yellow-900",children:"Activate Your Referral Account"}),(0,sx.jsx)("p",{className:"mb-3 text-sm text-yellow-700",children:"Pay \u20b920 via UPI to unlock referral features and start earning!"}),(0,sx.jsx)("button",{onClick:()=>d("/user/activate"),className:"px-4 py-2 text-sm font-semibold text-white bg-yellow-600 rounded-lg transition hover:bg-yellow-700",children:"Activate Now via UPI"})]})]})}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,sx.jsxs)("div",{className:"transition card hover:shadow-xl",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,sx.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,sx.jsx)(Cx,{className:"w-6 h-6 text-green-600"})})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"Wallet Balance"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:Ex((null===n||void 0===n||null===(e=n.wallet)||void 0===e?void 0:e.balance)||0)})]}),(0,sx.jsxs)("div",{className:"transition card hover:shadow-xl",children:[(0,sx.jsx)("div",{className:"p-3 mb-4 bg-blue-100 rounded-lg w-fit",children:(0,sx.jsx)(Mx,{className:"w-6 h-6 text-blue-600"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"Total Referrals"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:i.referrals.length})]}),(0,sx.jsxs)("div",{className:"transition card hover:shadow-xl",children:[(0,sx.jsx)("div",{className:"p-3 mb-4 bg-purple-100 rounded-lg w-fit",children:(0,sx.jsx)(zx,{className:"w-6 h-6 text-purple-600"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"This Month"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:i.monthlyReferrals})]}),(0,sx.jsxs)("div",{className:"transition card hover:shadow-xl",children:[(0,sx.jsx)("div",{className:"p-3 mb-4 bg-orange-100 rounded-lg w-fit",children:(0,sx.jsx)(vx,{className:"w-6 h-6 text-orange-600"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"Total Earnings"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:Ex((null===n||void 0===n||null===(t=n.stats)||void 0===t?void 0:t.totalEarnings)||0)})]})]}),(null===n||void 0===n?void 0:n.isReferralActive)&&(0,sx.jsxs)("div",{className:"text-white bg-gradient-to-r from-purple-600 to-pink-600 card",children:[(0,sx.jsx)("h3",{className:"mb-4 text-xl font-bold",children:"Your Referral Code"}),(0,sx.jsx)("div",{className:"p-4 mb-4 rounded-lg backdrop-blur-sm bg-white/20",children:(0,sx.jsx)("p",{className:"text-4xl font-bold tracking-wider text-center",children:null===n||void 0===n?void 0:n.referralCode})}),(0,sx.jsxs)("div",{className:"mb-4",children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-medium text-purple-100",children:"Shareable Link"}),(0,sx.jsx)("div",{className:"p-3 rounded-lg backdrop-blur-sm bg-white/20",children:(0,sx.jsx)("code",{className:"text-xs break-all",children:"".concat(window.location.origin,"/register?ref=").concat(null===n||void 0===n?void 0:n.referralCode)})})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sx.jsxs)("button",{onClick:async()=>{await Ix(n.referralCode)?(l(!0),ln.success("Referral code copied!"),setTimeout(()=>l(!1),2e3)):ln.error("Failed to copy")},className:"flex justify-center items-center px-4 py-3 space-x-2 font-semibold text-purple-600 bg-white rounded-lg transition hover:bg-gray-100",children:[o?(0,sx.jsx)(qx,{className:"w-5 h-5"}):(0,sx.jsx)(Wx,{className:"w-5 h-5"}),(0,sx.jsx)("span",{children:o?"Copied!":"Copy Code"})]}),(0,sx.jsxs)("button",{onClick:async()=>{const e="".concat(window.location.origin,"/register?ref=").concat(n.referralCode);if(navigator.share)try{await navigator.share({title:"Join Refer & Earn",text:"Use my referral code ".concat(n.referralCode," and start earning!"),url:e})}catch(t){console.log("Share cancelled")}else Ix(e),ln.success("Referral link copied!")},className:"flex justify-center items-center px-4 py-3 space-x-2 font-semibold text-pink-600 bg-white rounded-lg transition hover:bg-gray-100",children:[(0,sx.jsx)(Kx,{className:"w-5 h-5"}),(0,sx.jsx)("span",{children:"Share Link"})]})]})]}),!(null!==n&&void 0!==n&&n.isReferralActive)&&(0,sx.jsx)("div",{className:"text-white bg-gradient-to-r from-gray-600 to-gray-700 card",children:(0,sx.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sx.jsx)("div",{className:"p-4 rounded-full bg-white/20",children:(0,sx.jsx)(fx,{className:"w-8 h-8"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h3",{className:"mb-2 text-xl font-bold",children:"Referral Code Locked"}),(0,sx.jsx)("p",{className:"mb-3 text-sm text-gray-200",children:"Add \u20b920 to your wallet to unlock your referral code and start earning!"}),(0,sx.jsx)(Oe,{to:"/user/add-money",className:"inline-block px-4 py-2 text-sm font-semibold text-gray-900 bg-white rounded-lg transition hover:bg-gray-100",children:"Activate Now"})]})]})}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Transactions"}),(0,sx.jsx)(Oe,{to:"/user/transactions",className:"text-sm font-semibold text-primary-600 hover:text-primary-700",children:"View All"})]}),0===i.recentTransactions.length?(0,sx.jsx)("p",{className:"py-8 text-center text-gray-500",children:"No transactions yet"}):(0,sx.jsx)("div",{className:"space-y-3",children:i.recentTransactions.map(e=>(0,sx.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg transition hover:bg-gray-100",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 rounded-lg ".concat("CREDIT"===e.type||"REFERRAL_BONUS"===e.type?"bg-green-100":"bg-red-100"),children:"CREDIT"===e.type||"REFERRAL_BONUS"===e.type?(0,sx.jsx)(Hx,{className:"w-5 h-5 text-green-600"}):(0,sx.jsx)(Gx,{className:"w-5 h-5 text-red-600"})}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.description}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt.toDate()).toLocaleDateString():"N/A"})]})]}),(0,sx.jsxs)("p",{className:"font-bold ".concat("CREDIT"===e.type||"REFERRAL_BONUS"===e.type?"text-green-600":"text-red-600"),children:["CREDIT"===e.type||"REFERRAL_BONUS"===e.type?"+":"-",Ex(e.amount)]})]},e.id))})]})]})},Xx=ux("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$x=ux("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Zx=ux("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eb=ux("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),tb=()=>{const{userData:e}=ox(),[t,n]=(0,s.useState)({subject:"",message:""}),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(null),[h,f]=(0,s.useState)(!0),[m,p]=(0,s.useState)("new");(0,s.useEffect)(()=>{e&&g()},[e]);const g=async()=>{f(!0);try{const e=pv(jy(rx,"supportTickets"),yv("userId","==",nx.currentUser.uid),bv("createdAt","desc")),t=(await Ov(e)).docs.map(e=>He({id:e.id},e.data()));c(t)}catch(e){console.error("Error fetching tickets:",e)}finally{f(!1)}},y=e=>{n(He(He({},t),{},{[e.target.name]:e.target.value}))},v=()=>{d(null)};return(0,sx.jsxs)("div",{className:"mx-auto space-y-6 max-w-6xl",children:[(0,sx.jsx)("div",{className:"text-white bg-gradient-to-r card from-primary-600 to-primary-700",children:(0,sx.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sx.jsx)("div",{className:"p-4 rounded-full bg-white/20",children:(0,sx.jsx)(Fx,{className:"w-8 h-8"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h2",{className:"text-2xl font-bold",children:"Support Center"}),(0,sx.jsx)("p",{className:"text-primary-100",children:"Get help and view your tickets"})]})]})}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"flex space-x-2 border-b",children:[(0,sx.jsx)("button",{onClick:()=>p("new"),className:"px-6 py-3 font-semibold transition ".concat("new"===m?"border-b-2 border-primary-600 text-primary-600":"text-gray-600 hover:text-gray-900"),children:"\ud83d\udcdd New Ticket"}),(0,sx.jsxs)("button",{onClick:()=>p("history"),className:"px-6 py-3 font-semibold transition relative ".concat("history"===m?"border-b-2 border-primary-600 text-primary-600":"text-gray-600 hover:text-gray-900"),children:["\ud83d\udccb My Tickets (",l.length,")",l.filter(e=>"REPLIED"===e.status&&!e.lastViewedByUser).length>0&&(0,sx.jsx)("span",{className:"flex absolute -top-1 -right-1 justify-center items-center w-5 h-5 text-xs text-white bg-red-500 rounded-full",children:l.filter(e=>"REPLIED"===e.status&&!e.lastViewedByUser).length})]})]})}),"new"===m?(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,sx.jsxs)("div",{className:"space-y-4 lg:col-span-1",children:[(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 rounded-lg bg-primary-50",children:(0,sx.jsx)(hx,{className:"w-5 h-5 text-primary-600"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h3",{className:"font-semibold text-gray-900",children:"Email Support"}),(0,sx.jsx)("p",{className:"mt-1 text-sm text-gray-600 break-all",children:"refernearnplatform@gmail.com"})]})]})}),(0,sx.jsx)("div",{className:"bg-blue-50 border-blue-200 card",children:(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,sx.jsx)(Xx,{className:"w-5 h-5 text-blue-600"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h3",{className:"font-semibold text-gray-900",children:"Response Time"}),(0,sx.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"We typically respond within 24 hours"}),(0,sx.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Mon-Fri: 9 AM - 6 PM IST"})]})]})}),(0,sx.jsxs)("div",{className:"bg-yellow-50 border-yellow-200 card",children:[(0,sx.jsxs)("h3",{className:"flex items-center mb-3 font-semibold text-gray-900",children:[(0,sx.jsx)("span",{className:"mr-2",children:"\ud83d\udca1"})," Common Topics"]}),(0,sx.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,sx.jsxs)("li",{className:"flex items-start",children:[(0,sx.jsx)("span",{className:"mr-2",children:"\u2022"}),(0,sx.jsx)("span",{children:"Account activation issues"})]}),(0,sx.jsxs)("li",{className:"flex items-start",children:[(0,sx.jsx)("span",{className:"mr-2",children:"\u2022"}),(0,sx.jsx)("span",{children:"Payment verification"})]}),(0,sx.jsxs)("li",{className:"flex items-start",children:[(0,sx.jsx)("span",{className:"mr-2",children:"\u2022"}),(0,sx.jsx)("span",{children:"Withdrawal requests"})]}),(0,sx.jsxs)("li",{className:"flex items-start",children:[(0,sx.jsx)("span",{className:"mr-2",children:"\u2022"}),(0,sx.jsx)("span",{children:"Referral code problems"})]})]})]})]}),(0,sx.jsx)("div",{className:"lg:col-span-2",children:(0,sx.jsx)("div",{className:"card",children:a?(0,sx.jsxs)("div",{className:"py-12 text-center",children:[(0,sx.jsx)("div",{className:"inline-flex justify-center items-center mb-4 w-16 h-16 bg-green-100 rounded-full",children:(0,sx.jsx)(bx,{className:"w-10 h-10 text-green-600"})}),(0,sx.jsx)("h3",{className:"mb-2 text-2xl font-bold text-gray-900",children:"Ticket Submitted!"}),(0,sx.jsx)("p",{className:"mb-2 text-gray-600",children:"Thank you for contacting us. We've received your ticket."}),(0,sx.jsxs)("p",{className:"mb-4 text-sm text-gray-500",children:["\u2705 Admin will reply in the Support Center",(0,sx.jsx)("br",{}),"\u2705 You'll get a notification when admin replies"]}),(0,sx.jsx)("button",{onClick:()=>{o(!1),p("history")},className:"mt-4 btn-primary",children:"View My Tickets"})]}):(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsx)("h3",{className:"mb-1 text-xl font-bold text-gray-900",children:"Create New Ticket"}),(0,sx.jsx)("p",{className:"mb-6 text-sm text-gray-600",children:"Fill out the form below and we'll get back to you soon"}),(0,sx.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),t.subject.trim()&&t.message.trim()){i(!0);try{const r=await nx.currentUser.getIdToken(),s=await fetch("/api/submitSupportTicket",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({userName:e.name,userEmail:e.email,userPhone:e.phone||"",subject:t.subject,message:t.message})}),i=await s.json();if(!s.ok)throw new Error(i.error||"Failed to send message");o(!0),n({subject:"",message:""}),ln.success(i.message),await g(),setTimeout(()=>{o(!1),p("history")},2e3)}catch(s){console.error("Support form error:",s),ln.error(s.message||"Failed to send message")}finally{i(!1)}}else ln.error("Please fill all fields")},className:"space-y-5",children:[(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200 sm:grid-cols-2",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-xs font-medium text-gray-600",children:"Your Name"}),(0,sx.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null===e||void 0===e?void 0:e.name})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-1 text-xs font-medium text-gray-600",children:"Your Email"}),(0,sx.jsx)("p",{className:"text-sm font-semibold text-gray-900 break-all",children:null===e||void 0===e?void 0:e.email})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Subject ",(0,sx.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,sx.jsx)("input",{type:"text",name:"subject",value:t.subject,onChange:y,className:"input-field",placeholder:"e.g., Payment not verified, Withdrawal issue, etc.",required:!0,maxLength:"100"})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Message ",(0,sx.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,sx.jsx)("textarea",{name:"message",value:t.message,onChange:y,className:"resize-none input-field",rows:"8",placeholder:"Please describe your issue or question in detail...",required:!0,maxLength:"1000"}),(0,sx.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t.message.length,"/1000 characters"]})]}),(0,sx.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,sx.jsx)("p",{className:"text-sm text-blue-800",children:(0,sx.jsx)("strong",{children:"\ud83d\udcac What happens next:"})}),(0,sx.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-blue-700",children:[(0,sx.jsx)("li",{children:"\u2713 Your ticket will be sent to admin"}),(0,sx.jsx)("li",{children:'\u2713 Admin replies appear in "My Tickets" tab'}),(0,sx.jsx)("li",{children:"\u2713 You'll get a notification when admin replies"}),(0,sx.jsx)("li",{children:"\u2713 Response within 24 hours"})]})]}),(0,sx.jsx)("button",{type:"submit",disabled:r,className:"py-3 w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,sx.jsxs)("span",{className:"flex justify-center items-center",children:[(0,sx.jsxs)("svg",{className:"mr-3 -ml-1 w-5 h-5 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sx.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sx.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,sx.jsxs)("span",{className:"flex justify-center items-center",children:[(0,sx.jsx)($x,{className:"mr-2 w-5 h-5"}),"Submit Ticket"]})})]})]})})})]}):(0,sx.jsx)("div",{className:"space-y-4",children:h?(0,sx.jsx)("div",{className:"py-12 text-center card",children:(0,sx.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):0===l.length?(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)(Fx,{className:"mx-auto mb-4 w-16 h-16 text-gray-300"}),(0,sx.jsx)("p",{className:"mb-2 text-gray-500",children:"No tickets yet"}),(0,sx.jsx)("p",{className:"mb-4 text-sm text-gray-400",children:"Create your first support ticket to get help"}),(0,sx.jsx)("button",{onClick:()=>p("new"),className:"btn-primary",children:"Create New Ticket"})]}):l.map(e=>(0,sx.jsx)("div",{className:"transition card hover:shadow-lg",children:(0,sx.jsxs)("div",{className:"flex flex-col justify-between lg:flex-row",children:[(0,sx.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,sx.jsx)("div",{className:"flex justify-between items-start",children:(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("div",{className:"flex items-center mb-1 space-x-2",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.subject}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"REPLIED"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.status}),"REPLIED"===e.status&&!e.lastViewedByUser&&(0,sx.jsx)("span",{className:"px-2 py-1 text-xs text-white bg-red-500 rounded-full animate-pulse",children:"New Reply!"})]}),(0,sx.jsxs)("p",{className:"text-sm text-gray-500",children:["Created: ",kx(e.createdAt)]}),e.repliedAt&&(0,sx.jsxs)("p",{className:"text-sm text-blue-600",children:["Last reply: ",kx(e.repliedAt)]})]})}),(0,sx.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,sx.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.message})}),e.lastReply&&(0,sx.jsxs)("div",{className:"p-3 bg-blue-50 rounded border-l-4 border-blue-600",children:[(0,sx.jsx)("p",{className:"mb-1 text-xs font-semibold text-blue-800",children:"Admin's Reply:"}),(0,sx.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.lastReply})]})]}),(0,sx.jsx)("div",{className:"flex gap-3 mt-4 lg:mt-0 lg:ml-6 lg:flex-col lg:w-48",children:(0,sx.jsxs)("button",{onClick:()=>(e=>{d(e),"REPLIED"===e.status&&e.replies&&e.replies.length>0&&Mv(Sy(rx,"supportTickets",e.id),{lastViewedByUser:qv()}).catch(e=>console.error("Error updating view time:",e))})(e),className:"flex flex-1 justify-center items-center btn-primary",children:[(0,sx.jsx)(Zx,{className:"mr-2 w-4 h-4"}),"View Details"]})})]})},e.id))}),u&&(0,sx.jsx)("div",{className:"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50",children:(0,sx.jsx)("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h3",{className:"mb-2 text-2xl font-bold text-gray-900",children:u.subject}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("PENDING"===u.status?"bg-yellow-100 text-yellow-800":"REPLIED"===u.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:u.status})]}),(0,sx.jsx)("button",{onClick:v,className:"text-gray-500 hover:text-gray-700",children:(0,sx.jsx)(_x,{className:"w-6 h-6"})})]}),(0,sx.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("div",{className:"flex-shrink-0",children:(0,sx.jsx)("div",{className:"flex justify-center items-center w-10 h-10 rounded-full bg-primary-100",children:(0,sx.jsx)(gx,{className:"w-5 h-5 text-primary-600"})})}),(0,sx.jsx)("div",{className:"flex-1",children:(0,sx.jsxs)("div",{className:"p-4 rounded-lg border-l-4 bg-primary-50 border-primary-600",children:[(0,sx.jsxs)("div",{className:"flex items-center mb-2 space-x-2",children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:"You"}),(0,sx.jsx)("span",{className:"text-xs text-gray-500",children:kx(u.createdAt)})]}),(0,sx.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:u.message})]})})]}),u.replies&&u.replies.length>0&&u.replies.map((e,t)=>(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)("div",{className:"flex-shrink-0",children:(0,sx.jsx)("div",{className:"flex justify-center items-center w-10 h-10 bg-green-100 rounded-full",children:(0,sx.jsx)(eb,{className:"w-5 h-5 text-green-600"})})}),(0,sx.jsx)("div",{className:"flex-1",children:(0,sx.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border-l-4 border-green-600",children:[(0,sx.jsxs)("div",{className:"flex items-center mb-2 space-x-2",children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:"Admin Support"}),(0,sx.jsx)("span",{className:"text-xs text-gray-500",children:kx(e.sentAt)})]}),(0,sx.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.message})]})})]},t))]}),"PENDING"===u.status&&(0,sx.jsx)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,sx.jsxs)("p",{className:"text-sm text-yellow-800",children:["\u23f3 ",(0,sx.jsx)("strong",{children:"Waiting for admin response..."})," We'll notify you when admin replies."]})}),"RESOLVED"===u.status&&(0,sx.jsx)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:(0,sx.jsxs)("p",{className:"text-sm text-green-800",children:["\u2705 ",(0,sx.jsx)("strong",{children:"This ticket has been resolved."})," If you need further help, please create a new ticket."]})}),(0,sx.jsx)("div",{className:"flex justify-end mt-6",children:(0,sx.jsx)("button",{onClick:v,className:"btn-primary",children:"Close"})})]})})})]})};async function nb(e,t){try{const n=nx.currentUser;if(!n)throw new Error("Not authenticated");const r=await n.getIdToken(),s=await fetch("".concat("http://localhost:3000","/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)}),i=await s.json();if(!s.ok)throw new Error(i.error||"API request failed");return i}catch(n){throw console.error("API Error (".concat(e,"):"),n),n}}const rb=ux("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),sb=ux("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ib={ACTIVATION_AMOUNT:20,REFERRAL_BONUS:10,ADMIN_SHARE:10,MIN_WITHDRAWAL:100,MAX_WITHDRAWAL:1e4,ADMIN_EMAIL:"admin@refernearn.com",ADMIN_UPI_ID:"referanearn@ptaxis"},ab="CREDIT",ob="DEBIT",lb="REFERRAL_BONUS",cb="WITHDRAWAL",ub="PENDING",db="APPROVED",hb="REJECTED",fb="PENDING",mb="APPROVED",pb="REJECTED",gb=()=>{var e,t;const{userData:n,refreshUserData:r}=ox(),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)([]);(0,s.useEffect)(()=>{f()},[n]);const f=async()=>{if(n)try{const e=pv(jy(rx,"withdrawals"),yv("userId","==",n.id),bv("createdAt","desc")),t=(await Ov(e)).docs.map(e=>He({id:e.id},e.data()));h(t)}catch(e){console.error("Error fetching withdrawals:",e)}},m=e=>{switch(e){case ub:return(0,sx.jsx)(rb,{className:"w-5 h-5 text-yellow-600"});case db:return(0,sx.jsx)(bx,{className:"w-5 h-5 text-green-600"});case hb:return(0,sx.jsx)(wx,{className:"w-5 h-5 text-red-600"});default:return null}},p=e=>{switch(e){case ub:return"bg-yellow-100 text-yellow-800";case db:return"bg-green-100 text-green-800";case hb:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,sx.jsxs)("div",{className:"mx-auto space-y-6 max-w-4xl",children:[(0,sx.jsx)("div",{className:"text-white bg-gradient-to-r from-green-600 to-green-700 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"mb-1 text-green-100",children:"Available Balance"}),(0,sx.jsx)("p",{className:"text-4xl font-bold",children:Ex((null===n||void 0===n||null===(e=n.wallet)||void 0===e?void 0:e.balance)||0)})]}),(0,sx.jsx)("div",{className:"p-4 rounded-lg backdrop-blur-sm bg-white/20",children:(0,sx.jsx)(Lx,{className:"w-12 h-12"})})]})}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h2",{className:"mb-6 text-2xl font-bold text-gray-900",children:"Request Withdrawal via UPI"}),(0,sx.jsx)("div",{className:"p-4 mb-6 bg-blue-50 rounded-lg border border-blue-200",children:(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)(Nx,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,sx.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,sx.jsx)("p",{className:"mb-1 font-semibold",children:"Withdrawal Guidelines:"}),(0,sx.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,sx.jsxs)("li",{children:["Minimum withdrawal: ",Ex(ib.MIN_WITHDRAWAL)]}),(0,sx.jsxs)("li",{children:["Maximum withdrawal: ",Ex(ib.MAX_WITHDRAWAL)]}),(0,sx.jsx)("li",{children:"Processing time: 2-3 business days"}),(0,sx.jsx)("li",{children:"Amount will be sent to your UPI ID directly"})]})]})]})}),(0,sx.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=Number(i);if(t<ib.MIN_WITHDRAWAL)ln.error("Minimum withdrawal amount is ".concat(Ex(ib.MIN_WITHDRAWAL)));else if(t>n.wallet.balance)ln.error("Insufficient balance");else if(t>ib.MAX_WITHDRAWAL)ln.error("Maximum withdrawal amount is ".concat(Ex(ib.MAX_WITHDRAWAL)));else if(/^[a-zA-Z0-9._-]+@[a-zA-Z]{3,}$/.test(o)){u(!0);try{const e=await(async(e,t)=>nb("createWithdrawalRequest",{amount:e,upiId:t}))(t,o.toLowerCase());ln.success(e.message),a(""),l(""),f(),await r()}catch(s){console.error("Error submitting withdrawal:",s),ln.error(s.message||"Failed to submit withdrawal request")}finally{u(!1)}}else ln.error("Please enter a valid UPI ID (e.g., username@paytm)")},className:"space-y-4",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Withdrawal Amount *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)("span",{className:"absolute top-3 left-4 text-gray-500",children:"\u20b9"}),(0,sx.jsx)("input",{type:"number",value:i,onChange:e=>a(e.target.value),className:"pl-10 input-field",placeholder:"Enter amount",required:!0,min:ib.MIN_WITHDRAWAL,max:Math.min((null===n||void 0===n||null===(t=n.wallet)||void 0===t?void 0:t.balance)||0,ib.MAX_WITHDRAWAL)})]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"UPI ID *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(sb,{className:"absolute top-3 left-3 w-5 h-5 text-gray-400"}),(0,sx.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value.toLowerCase()),className:"pl-10 input-field",placeholder:"username@paytm",required:!0})]}),(0,sx.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Example: yourname@paytm, yourname@phonepe, yourname@googlepay"})]}),(0,sx.jsx)("button",{type:"submit",disabled:c,className:"w-full btn-primary disabled:opacity-50",children:c?"Submitting...":"Submit Withdrawal Request"})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"Withdrawal History"}),0===d.length?(0,sx.jsx)("p",{className:"py-8 text-center text-gray-500",children:"No withdrawal requests yet"}):(0,sx.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,sx.jsxs)("div",{className:"p-4 rounded-lg border border-gray-200 transition hover:shadow-md",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 rounded-lg ".concat(e.status===ub?"bg-yellow-100":e.status===db?"bg-green-100":"bg-red-100"),children:m(e.status)}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-lg font-bold text-gray-900",children:Ex(e.amount)}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:kx(e.createdAt)})]})]}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(p(e.status)),children:e.status})]}),(0,sx.jsx)("div",{className:"p-3 text-sm bg-gray-50 rounded",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"UPI ID:"}),(0,sx.jsx)("span",{className:"font-mono font-semibold",children:e.upiId})]})}),e.adminNote&&(0,sx.jsx)("div",{className:"p-3 mt-3 bg-blue-50 border-l-4 border-blue-600",children:(0,sx.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,sx.jsx)("span",{className:"font-semibold",children:"Admin Note: "}),e.adminNote]})})]},e.id))})]})]})},yb=()=>{const{userData:e}=ox(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{a()},[e]);const a=async()=>{if(e)try{const t=pv(jy(rx,"users"),yv("referrerId","==",e.id)),r=(await Ov(t)).docs.map(e=>He({id:e.id},e.data()));n(r)}catch(t){console.error("Error fetching referrals:",t)}finally{i(!1)}},o=t.filter(e=>e.isReferralActive),l=t.filter(e=>!e.isReferralActive);return r?(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):(0,sx.jsxs)("div",{className:"mx-auto space-y-6 max-w-6xl",children:[(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,sx.jsxs)("div",{className:"text-white bg-gradient-to-br from-blue-500 to-blue-600 card",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,sx.jsx)(Mx,{className:"w-8 h-8"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-blue-100",children:"Total Referrals"}),(0,sx.jsx)("p",{className:"text-4xl font-bold",children:t.length})]}),(0,sx.jsxs)("div",{className:"text-white bg-gradient-to-br from-green-500 to-green-600 card",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,sx.jsx)(bx,{className:"w-8 h-8"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-green-100",children:"Active Referrals"}),(0,sx.jsx)("p",{className:"text-4xl font-bold",children:o.length})]}),(0,sx.jsxs)("div",{className:"text-white bg-gradient-to-br from-yellow-500 to-yellow-600 card",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,sx.jsx)(rb,{className:"w-8 h-8"})}),(0,sx.jsx)("p",{className:"mb-1 text-sm text-yellow-100",children:"Pending Activation"}),(0,sx.jsx)("p",{className:"text-4xl font-bold",children:l.length})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h2",{className:"mb-6 text-2xl font-bold text-gray-900",children:"Your Referrals"}),0===t.length?(0,sx.jsxs)("div",{className:"py-12 text-center",children:[(0,sx.jsx)(Mx,{className:"mx-auto mb-4 w-16 h-16 text-gray-300"}),(0,sx.jsx)("p",{className:"text-lg text-gray-500",children:"No referrals yet"}),(0,sx.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Share your referral code to get started!"})]}):(0,sx.jsx)("div",{className:"overflow-x-auto",children:(0,sx.jsxs)("table",{className:"w-full",children:[(0,sx.jsx)("thead",{children:(0,sx.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Name"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Email"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Joined Date"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Status"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Earnings"})]})}),(0,sx.jsx)("tbody",{children:t.map(e=>(0,sx.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,sx.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,sx.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.email}),(0,sx.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:kx(e.createdAt)}),(0,sx.jsx)("td",{className:"px-4 py-3",children:e.isReferralActive?(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:"Active"}):(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full",children:"Pending"})}),(0,sx.jsx)("td",{className:"px-4 py-3 font-semibold text-green-600",children:e.isReferralActive?Ex(10):Ex(0)})]},e.id))})]})})]})]})},vb=ux("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),xb=()=>{const{userData:e}=ox(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)("ALL"),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{u()},[e]),(0,s.useEffect)(()=>{d()},[a,t]);const u=async()=>{if(e)try{const t=pv(jy(rx,"transactions"),yv("userId","==",e.id),bv("createdAt","desc")),r=(await Ov(t)).docs.map(e=>He({id:e.id},e.data()));n(r),i(r)}catch(t){console.error("Error fetching transactions:",t)}finally{c(!1)}},d=()=>{i("ALL"===a?t:t.filter(e=>e.type===a))},h=e=>e===ab||e===lb?(0,sx.jsx)(Hx,{className:"h-5 w-5 text-green-600"}):(0,sx.jsx)(Gx,{className:"h-5 w-5 text-red-600"});return l?(0,sx.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,sx.jsx)("div",{className:"max-w-4xl mx-auto space-y-6",children:(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[(0,sx.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Transaction History"}),(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(vb,{className:"h-5 w-5 text-gray-500"}),(0,sx.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"input-field w-auto",children:[(0,sx.jsx)("option",{value:"ALL",children:"All Transactions"}),(0,sx.jsx)("option",{value:ab,children:"Credits"}),(0,sx.jsx)("option",{value:ob,children:"Debits"}),(0,sx.jsx)("option",{value:lb,children:"Referral Bonus"}),(0,sx.jsx)("option",{value:cb,children:"Withdrawals"})]})]})]}),0===r.length?(0,sx.jsx)("p",{className:"text-gray-500 text-center py-12",children:"No transactions found"}):(0,sx.jsx)("div",{className:"space-y-3",children:r.map(e=>{return(0,sx.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:shadow-md transition",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sx.jsx)("div",{className:"p-3 rounded-lg ".concat((t=e.type,t===ab||t===lb?"bg-green-100":"bg-red-100")),children:h(e.type)}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.description}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:kx(e.createdAt)}),(0,sx.jsx)("span",{className:"inline-block mt-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.type})]})]}),(0,sx.jsxs)("div",{className:"text-right",children:[(0,sx.jsxs)("p",{className:"text-xl font-bold ".concat(e.type===ab||e.type===lb?"text-green-600":"text-red-600"),children:[e.type===ab||e.type===lb?"+":"-",Ex(e.amount)]}),(0,sx.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.status})]})]},e.id);var t})})]})})},bb=ux("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),wb=()=>{const{userData:e,refreshUserData:t}=ox(),n=re(),[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(!1),h=!(null===e||void 0===e||!e.referrerId),f=h?{referrer:10,admin:10,user:0}:{admin:10,user:10,referrer:0};return null!==e&&void 0!==e&&e.isReferralActive?(0,sx.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)(bx,{className:"mx-auto mb-4 w-16 h-16 text-green-500"}),(0,sx.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900",children:"Account Already Activated!"}),(0,sx.jsx)("p",{className:"mb-4 text-gray-600",children:"Your referral account is active. Start sharing your code to earn!"}),(0,sx.jsx)("button",{onClick:()=>n("/user/dashboard"),className:"btn-primary",children:"Go to Dashboard"})]})}):u?(0,sx.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)("div",{className:"relative",children:(0,sx.jsx)(xx,{className:"mx-auto mb-4 w-16 h-16 animate-spin text-primary-600"})}),(0,sx.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900",children:"Submitting Request"}),(0,sx.jsx)("p",{className:"text-gray-600",children:"Please wait while we submit your activation request..."}),(0,sx.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Admin will verify your payment shortly"})]})}):(0,sx.jsxs)("div",{className:"mx-auto space-y-6 max-w-4xl",children:[(0,sx.jsx)("div",{className:"text-white bg-gradient-to-r card from-primary-600 to-primary-700",children:(0,sx.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sx.jsx)("div",{className:"p-4 rounded-full bg-white/20",children:(0,sx.jsx)(eb,{className:"w-8 h-8"})}),(0,sx.jsxs)("div",{className:"flex-1",children:[(0,sx.jsx)("h2",{className:"text-2xl font-bold",children:"Activate Your Referral Account"}),(0,sx.jsx)("p",{className:"text-primary-100",children:"Simple UPI payment to unlock referral features"})]})]})}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"\ud83d\udcb0 Payment Breakdown"}),(0,sx.jsx)("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:(0,sx.jsxs)("div",{className:"space-y-3",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-center pb-3 border-b border-gray-300",children:[(0,sx.jsx)("span",{className:"font-semibold text-gray-700",children:"Activation Fee"}),(0,sx.jsx)("span",{className:"text-3xl font-bold text-primary-600",children:Ex(ib.ACTIVATION_AMOUNT)})]}),(0,sx.jsx)("div",{className:"space-y-2",children:h?(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"\u2192 Your Referrer Bonus"}),(0,sx.jsxs)("span",{className:"font-semibold text-green-600",children:["\u20b9",f.referrer]})]}),(0,sx.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"\u2192 Platform Fee"}),(0,sx.jsxs)("span",{className:"font-semibold text-blue-600",children:["\u20b9",f.admin]})]}),(0,sx.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"\u2192 Your Wallet"}),(0,sx.jsxs)("span",{className:"font-semibold text-gray-600",children:["\u20b9",f.user]})]})]}):(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"\u2192 Your Wallet"}),(0,sx.jsxs)("span",{className:"font-semibold text-green-600",children:["\u20b9",f.user]})]}),(0,sx.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"\u2192 Platform Fee"}),(0,sx.jsxs)("span",{className:"font-semibold text-blue-600",children:["\u20b9",f.admin]})]})]})}),(0,sx.jsx)("div",{className:"p-3 mt-4 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,sx.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,sx.jsx)("strong",{children:"\ud83c\udf81 Your Benefit:"})," ",h?"Get referral system activated to earn \u20b910 per referral!":"Get \u20b910 in wallet + referral system to earn more!"]})})]})})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("h3",{className:"flex items-center mb-4 text-lg font-bold text-gray-900",children:[(0,sx.jsx)(bb,{className:"mr-2 w-5 h-5 text-primary-600"}),"Scan QR Code"]}),(0,sx.jsxs)("div",{className:"p-6 text-center bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl",children:[(0,sx.jsx)("div",{className:"inline-block p-4 mb-4 bg-white rounded-xl shadow-lg",children:(0,sx.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=".concat(ib.ADMIN_UPI_ID,"&pn=ReferAndEarn&am=").concat(ib.ACTIVATION_AMOUNT,"&cu=INR"),alt:"UPI QR Code",className:"w-48 h-48"})}),(0,sx.jsx)("p",{className:"mb-2 text-sm text-gray-700",children:"Scan with any UPI app"}),(0,sx.jsxs)("div",{className:"flex flex-wrap justify-center space-x-2",children:[(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white rounded-full shadow-sm",children:"GPay"}),(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white rounded-full shadow-sm",children:"PhonePe"}),(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white rounded-full shadow-sm",children:"Paytm"}),(0,sx.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white rounded-full shadow-sm",children:"BHIM"})]})]}),(0,sx.jsx)("div",{className:"p-3 mt-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,sx.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,sx.jsx)("strong",{children:"Note:"})," After scanning, amount (\u20b920) will be auto-filled"]})})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsxs)("h3",{className:"flex items-center mb-4 text-lg font-bold text-gray-900",children:[(0,sx.jsx)(sb,{className:"mr-2 w-5 h-5 text-primary-600"}),"Or Pay via UPI ID"]}),(0,sx.jsxs)("div",{className:"space-y-4",children:[(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-300 border-dashed",children:[(0,sx.jsx)("p",{className:"mb-2 text-xs font-semibold text-gray-600",children:"UPI ID:"}),(0,sx.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border border-gray-200",children:[(0,sx.jsx)("span",{className:"font-mono text-xl font-bold text-gray-900 break-all",children:ib.ADMIN_UPI_ID}),(0,sx.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(ib.ADMIN_UPI_ID),c(!0),ln.success("UPI ID copied to clipboard!"),setTimeout(()=>c(!1),2e3)}catch(e){ln.error("Failed to copy UPI ID")}},className:"flex-shrink-0 p-2 ml-2 text-white rounded-lg transition bg-primary-600 hover:bg-primary-700",children:l?(0,sx.jsx)(qx,{className:"w-4 h-4"}):(0,sx.jsx)(Wx,{className:"w-4 h-4"})})]})]}),(0,sx.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,sx.jsx)("p",{className:"mb-1 text-xs font-semibold text-gray-600",children:"Amount to Pay:"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-green-700",children:Ex(ib.ACTIVATION_AMOUNT)})]}),(0,sx.jsxs)("div",{className:"space-y-2",children:[(0,sx.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,sx.jsx)("span",{className:"bg-primary-100 text-primary-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),(0,sx.jsx)("p",{className:"text-sm text-gray-700",children:"Open any UPI app"})]}),(0,sx.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,sx.jsx)("span",{className:"bg-primary-100 text-primary-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),(0,sx.jsx)("p",{className:"text-sm text-gray-700",children:"Send \u20b920 to above UPI ID"})]}),(0,sx.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,sx.jsx)("span",{className:"bg-primary-100 text-primary-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),(0,sx.jsx)("p",{className:"text-sm text-gray-700",children:"Copy UTR/Transaction ID"})]}),(0,sx.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,sx.jsx)("span",{className:"bg-primary-100 text-primary-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"4"}),(0,sx.jsx)("p",{className:"text-sm text-gray-700",children:"Enter it below and submit"})]})]})]})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"\u2705 Submit Your Payment Details"}),(0,sx.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!r||r.length<12)ln.error("Please enter a valid UTR/Transaction ID (minimum 12 characters)");else{o(!0),d(!0);try{console.log("\ud83d\ude80 Submitting activation request...");const e=await(async e=>nb("submitActivationRequest",{utrNumber:e}))(r.toUpperCase());ln.success(e.message||"Activation request submitted successfully!"),await t(),setTimeout(()=>{n("/user/dashboard")},2e3)}catch(s){console.error("\u274c Submission Error:",s);let e="Failed to submit activation request. Please try again.";s.message.includes("already have a pending")?e="You already have a pending activation request. Please wait for admin approval.":s.message.includes("already activated")?e="Your account is already activated!":s.message.includes("already been used")?e="This UTR number has already been used.":s.message&&(e=s.message),ln.error(e),d(!1)}finally{o(!1)}}},className:"space-y-4",children:[(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 p-4 mb-4 bg-blue-50 rounded-lg border border-blue-200 lg:grid-cols-2",children:[(0,sx.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sx.jsx)(Nx,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,sx.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,sx.jsx)("p",{className:"mb-1 font-semibold",children:"Where to find UTR/Transaction ID?"}),(0,sx.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,sx.jsx)("li",{children:"Open your UPI app transaction history"}),(0,sx.jsx)("li",{children:"Find the \u20b920 payment you just made"}),(0,sx.jsx)("li",{children:'Look for "UTR" or "Transaction ID" (12 digits)'}),(0,sx.jsx)("li",{children:"Copy and paste it below"})]})]})]}),(0,sx.jsx)("div",{children:(0,sx.jsx)("img",{className:"w-60",src:"/upi.png",alt:""})})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["UTR / Transaction ID ",(0,sx.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,sx.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value.toUpperCase()),className:"font-mono text-lg uppercase input-field",placeholder:"Enter 12-digit UTR number",maxLength:"20",required:!0}),(0,sx.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Example: 123456789012"})]}),(0,sx.jsx)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,sx.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,sx.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," Make sure you have completed the UPI payment before submitting. Admin will verify your UTR and approve your activation."]})}),(0,sx.jsx)("button",{type:"submit",disabled:a||r.length<12,className:"py-3 w-full text-lg btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,sx.jsxs)("span",{className:"flex justify-center items-center",children:[(0,sx.jsx)(xx,{className:"mr-3 -ml-1 w-5 h-5 text-white animate-spin"}),"Submitting Request..."]}):(0,sx.jsxs)("span",{className:"flex justify-center items-center",children:[(0,sx.jsx)(bx,{className:"mr-2 w-5 h-5"}),"Submit for Admin Approval"]})})]})]}),(0,sx.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,sx.jsxs)("div",{className:"flex justify-center items-center space-x-4 text-sm text-gray-600",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(eb,{className:"w-4 h-4 text-green-600"}),(0,sx.jsx)("span",{children:"\ud83d\udd12 Secure Payment"})]}),(0,sx.jsx)("div",{className:"hidden w-px h-4 bg-gray-300 sm:block"}),(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(bx,{className:"w-4 h-4 text-green-600"}),(0,sx.jsx)("span",{children:"\u2713 Admin Verification"})]})]})})]})},Nb=ux("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Eb=ux("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),kb=()=>{const[e,t]=(0,s.useState)({totalUsers:0,activeUsers:0,pendingUsers:0,totalBalance:0,totalTransactions:0,pendingWithdrawals:0,adminEarnings:0}),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(0);(0,s.useEffect)(()=>{d()},[]);const d=async()=>{try{const n=(await Ov(jy(rx,"users"))).docs.map(e=>He({id:e.id},e.data())),s=n.filter(e=>e.isReferralActive&&"admin"!==e.role),i=n.filter(e=>!e.isReferralActive&&"admin"!==e.role),o=n.reduce((e,t)=>{var n;return e+((null===(n=t.wallet)||void 0===n?void 0:n.balance)||0)},0),l=(await Ov(jy(rx,"transactions"))).docs.map(e=>He({id:e.id},e.data())),c=await Ov(pv(jy(rx,"withdrawals"),yv("status","==","PENDING"))),d=await Ov(jy(rx,"adminStats"));let h=0;d.forEach(e=>{h+=e.data().totalEarnings||0});const f=pv(jy(rx,"users"),bv("createdAt","desc"),Nv(5)),m=(await Ov(f)).docs.map(e=>He({id:e.id},e.data())),p=await Ov(pv(jy(rx,"users"),yv("role","==","admin")));if(!p.empty){var e;const t=p.docs[0].data();u((null===(e=t.wallet)||void 0===e?void 0:e.balance)||0)}const g=pv(jy(rx,"transactions"),bv("createdAt","desc"),Nv(5)),y=(await Ov(g)).docs.map(e=>He({id:e.id},e.data()));t({totalUsers:n.filter(e=>"admin"!==e.role).length,activeUsers:s.length,pendingUsers:i.length,totalBalance:o,totalTransactions:l.length,pendingWithdrawals:c.size,adminEarnings:h}),r(m.filter(e=>"admin"!==e.role)),a(y)}catch(n){console.error("Error fetching admin stats:",n)}finally{l(!1)}};return o?(0,sx.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,sx.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome to the admin panel"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Mx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-blue-100 text-sm",children:"Total Users"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.totalUsers})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Nb,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-green-100 text-sm",children:"Active Users"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.activeUsers})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(rb,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-yellow-100 text-sm",children:"Pending Activations"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.pendingUsers})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Cx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-purple-100 text-sm",children:"Total Platform Balance"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(e.totalBalance)})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-pink-500 to-pink-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Vx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-pink-100 text-sm",children:"Total Transactions"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.totalTransactions})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(zx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-red-100 text-sm",children:"Pending Withdrawals"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.pendingWithdrawals})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Cx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-indigo-100 text-sm",children:"Admin Earnings"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(c)})]})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Cx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-yellow-100 text-sm",children:"My Earnings"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(c)}),(0,sx.jsx)(Eb,{to:"/admin/earnings",className:"mt-4 block text-center bg-white text-yellow-600 hover:bg-yellow-50 font-semibold py-2 px-4 rounded-lg transition text-sm",children:"Manage Earnings"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Users"}),(0,sx.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,sx.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(e.isReferralActive?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isReferralActive?"Active":"Pending"})]},e.id))})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Transactions"}),(0,sx.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,sx.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.description}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:kx(e.createdAt)})]}),(0,sx.jsx)("p",{className:"font-bold ".concat("CREDIT"===e.type||"REFERRAL_BONUS"===e.type?"text-green-600":"text-red-600"),children:Ex(e.amount)})]},e.id))})]})]})]})},Ib=ux("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),jb=ux("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Sb=()=>{var e,t,n;const[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)("ALL"),[h,f]=(0,s.useState)(!0),[m,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{g()},[]),(0,s.useEffect)(()=>{y()},[l,u,r]);const g=async()=>{try{const e=(await Ov(jy(rx,"users"))).docs.map(e=>He({id:e.id},e.data())).filter(e=>"admin"!==e.role);i(e),o(e)}catch(e){console.error("Error fetching users:",e)}finally{f(!1)}},y=()=>{let e=r;"ACTIVE"===u?e=e.filter(e=>e.isReferralActive):"PENDING"===u&&(e=e.filter(e=>!e.isReferralActive)),l&&(e=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())||e.referralCode.toLowerCase().includes(l.toLowerCase()))),o(e)};return h?(0,sx.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center",children:(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"})}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)(Ib,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,sx.jsx)("input",{type:"text",placeholder:"Search by name, email, or referral code...",value:l,onChange:e=>c(e.target.value),className:"input-field pl-10"})]}),(0,sx.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"input-field",children:[(0,sx.jsx)("option",{value:"ALL",children:"All Users"}),(0,sx.jsx)("option",{value:"ACTIVE",children:"Active Users"}),(0,sx.jsx)("option",{value:"PENDING",children:"Pending Activation"})]})]})}),(0,sx.jsxs)("div",{className:"card overflow-x-auto",children:[(0,sx.jsxs)("table",{className:"w-full",children:[(0,sx.jsx)("thead",{children:(0,sx.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"User"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Referral Code"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Wallet Balance"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Referrals"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Joined"}),(0,sx.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,sx.jsx)("tbody",{children:a.map(e=>{var t,n;return(0,sx.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,sx.jsx)("td",{className:"py-3 px-4",children:(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,sx.jsx)("p",{className:"text-xs text-gray-400",children:e.phone})]})}),(0,sx.jsx)("td",{className:"py-3 px-4",children:(0,sx.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-sm",children:e.referralCode})}),(0,sx.jsx)("td",{className:"py-3 px-4 font-semibold text-green-600",children:Ex((null===(t=e.wallet)||void 0===t?void 0:t.balance)||0)}),(0,sx.jsxs)("td",{className:"py-3 px-4",children:[(0,sx.jsx)("span",{className:"font-semibold",children:(null===(n=e.stats)||void 0===n?void 0:n.totalReferrals)||0}),(0,sx.jsx)("span",{className:"text-gray-500 text-sm",children:" total"})]}),(0,sx.jsx)("td",{className:"py-3 px-4",children:e.isReferralActive?(0,sx.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full flex items-center w-fit",children:[(0,sx.jsx)(Nb,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,sx.jsxs)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded-full flex items-center w-fit",children:[(0,sx.jsx)(jb,{className:"h-3 w-3 mr-1"}),"Pending"]})}),(0,sx.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:kx(e.createdAt)}),(0,sx.jsx)("td",{className:"py-3 px-4",children:(0,sx.jsxs)("button",{onClick:()=>p(e),className:"text-primary-600 hover:text-primary-700 font-semibold text-sm flex items-center",children:[(0,sx.jsx)(Zx,{className:"h-4 w-4 mr-1"}),"View"]})})]},e.id)})})]}),0===a.length&&(0,sx.jsx)("p",{className:"text-gray-500 text-center py-12",children:"No users found"})]}),m&&(0,sx.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,sx.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sx.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"User Details"}),(0,sx.jsx)("button",{onClick:()=>p(null),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,sx.jsx)("div",{className:"space-y-4",children:(0,sx.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Name"}),(0,sx.jsx)("p",{className:"font-semibold",children:m.name})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Email"}),(0,sx.jsx)("p",{className:"font-semibold",children:m.email})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Phone"}),(0,sx.jsx)("p",{className:"font-semibold",children:m.phone})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Referral Code"}),(0,sx.jsx)("p",{className:"font-mono font-semibold",children:m.referralCode})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Wallet Balance"}),(0,sx.jsx)("p",{className:"font-semibold text-green-600",children:Ex((null===(e=m.wallet)||void 0===e?void 0:e.balance)||0)})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Status"}),(0,sx.jsx)("p",{className:"font-semibold",children:m.isReferralActive?"\u2705 Active":"\u23f3 Pending"})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Total Referrals"}),(0,sx.jsx)("p",{className:"font-semibold",children:(null===(t=m.stats)||void 0===t?void 0:t.totalReferrals)||0})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Total Earnings"}),(0,sx.jsx)("p",{className:"font-semibold text-green-600",children:Ex((null===(n=m.stats)||void 0===n?void 0:n.totalEarnings)||0)})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Referred By"}),(0,sx.jsx)("p",{className:"font-semibold",children:m.referredBy||"Direct"})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-sm text-gray-600",children:"Joined Date"}),(0,sx.jsx)("p",{className:"font-semibold",children:kx(m.createdAt)})]})]})})]})})})]})},_b=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)("PENDING"),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[f,m]=(0,s.useState)("");(0,s.useEffect)(()=>{p()},[]),(0,s.useEffect)(()=>{g()},[n,e]);const p=async()=>{try{const e=(await Ov(jy(rx,"withdrawals"))).docs.map(e=>He({id:e.id},e.data()));t(e)}catch(e){console.error("Error fetching withdrawals:",e)}finally{l(!1)}},g=()=>{a("ALL"===n?e:e.filter(e=>e.status===n))},y=async e=>{if(window.confirm("Approve withdrawal of ".concat(Ex(e.amount)," for ").concat(e.userName,"?"))){u(e.id);try{const t=await(async(e,t)=>nb("approveWithdrawal",{withdrawalId:e,adminNote:t}))(e.id,f||"Approved and processed");ln.success(t.message),h(null),m(""),p()}catch(t){console.error("Error approving withdrawal:",t),ln.error(t.message||"Failed to approve withdrawal")}finally{u(null)}}},v=async e=>{if(f.trim()){if(window.confirm("Reject withdrawal of ".concat(Ex(e.amount),"?"))){u(e.id);try{const t=await(async(e,t)=>nb("rejectWithdrawal",{withdrawalId:e,reason:t}))(e.id,f);ln.success(t.message),h(null),m(""),p()}catch(t){console.error("Error rejecting withdrawal:",t),ln.error(t.message||"Failed to reject withdrawal")}finally{u(null)}}}else ln.error("Please provide a reason for rejection")},x=e=>{switch(e){case ub:return"bg-yellow-100 text-yellow-800";case db:return"bg-green-100 text-green-800";case hb:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o?(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsx)("div",{className:"flex justify-between items-center",children:(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Withdrawal Management"})}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,sx.jsx)("div",{className:"bg-yellow-50 border-yellow-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-yellow-700",children:"Pending"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-yellow-900",children:e.filter(e=>e.status===ub).length})]}),(0,sx.jsx)(rb,{className:"w-12 h-12 text-yellow-600"})]})}),(0,sx.jsx)("div",{className:"bg-green-50 border-green-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-green-700",children:"Approved"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-green-900",children:e.filter(e=>e.status===db).length})]}),(0,sx.jsx)(bx,{className:"w-12 h-12 text-green-600"})]})}),(0,sx.jsx)("div",{className:"bg-red-50 border-red-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-red-700",children:"Rejected"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-red-900",children:e.filter(e=>e.status===hb).length})]}),(0,sx.jsx)(wx,{className:"w-12 h-12 text-red-600"})]})})]}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"w-full input-field md:w-64",children:[(0,sx.jsx)("option",{value:"PENDING",children:"Pending Withdrawals"}),(0,sx.jsx)("option",{value:"APPROVED",children:"Approved Withdrawals"}),(0,sx.jsx)("option",{value:"REJECTED",children:"Rejected Withdrawals"}),(0,sx.jsx)("option",{value:"ALL",children:"All Withdrawals"})]})}),(0,sx.jsx)("div",{className:"space-y-4",children:0===i.length?(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)(Lx,{className:"mx-auto mb-4 w-16 h-16 text-gray-300"}),(0,sx.jsx)("p",{className:"text-gray-500",children:"No withdrawals found"})]}):i.map(e=>(0,sx.jsx)("div",{className:"transition card hover:shadow-xl",children:(0,sx.jsxs)("div",{className:"flex flex-col justify-between lg:flex-row",children:[(0,sx.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("div",{className:"flex items-center mb-1 space-x-2",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.userName}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(x(e.status)),children:e.status})]}),(0,sx.jsx)("p",{className:"text-gray-600",children:e.userEmail}),(0,sx.jsxs)("p",{className:"text-sm text-gray-500",children:["Requested: ",kx(e.createdAt)]})]}),(0,sx.jsx)("div",{className:"text-right",children:(0,sx.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:Ex(e.amount)})})]}),(0,sx.jsx)("div",{className:"p-3 text-sm bg-gray-50 rounded",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"UPI ID:"}),(0,sx.jsx)("span",{className:"font-mono font-semibold",children:e.upiId})]})}),e.adminNote&&(0,sx.jsx)("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-600",children:(0,sx.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,sx.jsx)("span",{className:"font-semibold",children:"Admin Note: "}),e.adminNote]})})]}),e.status===ub&&(0,sx.jsx)("div",{className:"flex gap-3 mt-4 lg:ml-6 lg:mt-0 lg:flex-col lg:w-48",children:(0,sx.jsx)("button",{onClick:()=>h(e),className:"flex-1 btn-primary",disabled:c===e.id,children:"Review"})})]})},e.id))}),d&&(0,sx.jsx)("div",{className:"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50",children:(0,sx.jsx)("div",{className:"w-full max-w-lg bg-white rounded-xl",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsx)("h3",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Review Withdrawal"}),(0,sx.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,sx.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:Ex(d.amount)})]}),(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"mb-2 text-sm text-gray-600",children:"User Details"}),(0,sx.jsx)("p",{className:"font-semibold",children:d.userName}),(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:d.userEmail})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Admin Note"}),(0,sx.jsx)("textarea",{value:f,onChange:e=>m(e.target.value),className:"input-field",rows:"3",placeholder:"Add a note (required for rejection)"})]})]}),(0,sx.jsxs)("div",{className:"flex gap-3",children:[(0,sx.jsx)("button",{onClick:()=>y(d),disabled:c,className:"flex-1 px-4 py-2 font-semibold text-white bg-green-600 rounded-lg transition hover:bg-green-700 disabled:opacity-50",children:c?"Processing...":"Approve"}),(0,sx.jsx)("button",{onClick:()=>v(d),disabled:c,className:"flex-1 px-4 py-2 font-semibold text-white bg-red-600 rounded-lg transition hover:bg-red-700 disabled:opacity-50",children:"Reject"}),(0,sx.jsx)("button",{onClick:()=>{h(null),m("")},className:"btn-secondary",children:"Cancel"})]})]})})})]})},Tb=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)("ALL"),[o,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{c()},[]),(0,s.useEffect)(()=>{u()},[i,e]);const c=async()=>{try{const e=pv(jy(rx,"transactions"),bv("createdAt","desc")),n=(await Ov(e)).docs.map(e=>He({id:e.id},e.data()));t(n)}catch(e){console.error("Error fetching transactions:",e)}finally{l(!1)}},u=()=>{r("ALL"===i?e:e.filter(e=>e.type===i))},d=e=>e===ab||e===lb?(0,sx.jsx)(Hx,{className:"w-5 h-5 text-green-600"}):(0,sx.jsx)(Gx,{className:"w-5 h-5 text-red-600"});if(o)return(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})});const h=e.reduce((e,t)=>e+t.amount,0),f=e.filter(e=>e.type===ab||e.type===lb).reduce((e,t)=>e+t.amount,0),m=e.filter(e=>e.type===ob||e.type===cb).reduce((e,t)=>e+t.amount,0);return(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsx)("div",{children:(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Transactions"})}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,sx.jsx)("div",{className:"bg-blue-50 border-blue-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-blue-700",children:"Total Volume"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:Ex(h)})]}),(0,sx.jsx)(Vx,{className:"w-12 h-12 text-blue-600"})]})}),(0,sx.jsx)("div",{className:"bg-green-50 border-green-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-green-700",children:"Credits"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-green-900",children:Ex(f)})]}),(0,sx.jsx)(Hx,{className:"w-12 h-12 text-green-600"})]})}),(0,sx.jsx)("div",{className:"bg-red-50 border-red-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-red-700",children:"Debits"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-red-900",children:Ex(m)})]}),(0,sx.jsx)(Gx,{className:"w-12 h-12 text-red-600"})]})})]}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(vb,{className:"w-5 h-5 text-gray-500"}),(0,sx.jsxs)("select",{value:i,onChange:e=>a(e.target.value),className:"w-full input-field md:w-64",children:[(0,sx.jsx)("option",{value:"ALL",children:"All Transactions"}),(0,sx.jsx)("option",{value:ab,children:"Credits"}),(0,sx.jsx)("option",{value:ob,children:"Debits"}),(0,sx.jsx)("option",{value:lb,children:"Referral Bonus"}),(0,sx.jsx)("option",{value:cb,children:"Withdrawals"})]})]})}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"overflow-x-auto",children:[(0,sx.jsxs)("table",{className:"w-full",children:[(0,sx.jsx)("thead",{children:(0,sx.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Type"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Description"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Amount"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Status"}),(0,sx.jsx)("th",{className:"px-4 py-3 font-semibold text-left text-gray-700",children:"Date"})]})}),(0,sx.jsx)("tbody",{children:n.map(e=>{return(0,sx.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,sx.jsx)("td",{className:"px-4 py-3",children:(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)("div",{className:"p-2 rounded-lg ".concat((t=e.type,t===ab||t===lb?"bg-green-100":"bg-red-100")),children:d(e.type)}),(0,sx.jsx)("span",{className:"text-sm font-semibold",children:e.type})]})}),(0,sx.jsx)("td",{className:"px-4 py-3",children:(0,sx.jsx)("p",{className:"font-semibold text-gray-900",children:e.description})}),(0,sx.jsx)("td",{className:"px-4 py-3",children:(0,sx.jsxs)("p",{className:"text-lg font-bold ".concat(e.type===ab||e.type===lb?"text-green-600":"text-red-600"),children:[e.type===ab||e.type===lb?"+":"-",Ex(e.amount)]})}),(0,sx.jsxs)("td",{className:"px-4 py-3",children:[(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("SUCCESS"===e.status?"bg-green-100 text-green-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status}),(0,sx.jsxs)("td",{children:[e.utrNumber&&(0,sx.jsx)("div",{className:"px-2 py-1 mt-2 bg-blue-50 rounded border border-blue-200",children:(0,sx.jsxs)("span",{className:"text-xs text-blue-700",children:["UTR:"," ",(0,sx.jsx)("span",{className:"font-mono font-semibold",children:e.utrNumber})]})}),e.upiId&&(0,sx.jsx)("div",{className:"px-2 py-1 mt-2 bg-green-50 rounded border border-green-200",children:(0,sx.jsxs)("span",{className:"text-xs text-green-700",children:["UPI: ",(0,sx.jsx)("span",{className:"font-mono",children:e.upiId})]})})]})]}),(0,sx.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:kx(e.createdAt)})]},e.id);var t})})]}),0===n.length&&(0,sx.jsx)("p",{className:"py-12 text-center text-gray-500",children:"No transactions found"})]})})]})},Cb=ux("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ab=()=>{const[e,t]=(0,s.useState)({todaySignups:0,todayTransactions:0,todayRevenue:0,weeklyGrowth:0,monthlyRevenue:0,activeUsersToday:0}),[n,r]=(0,s.useState)(!0);(0,s.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=new Date;e.setHours(0,0,0,0);const n=new Date;n.setDate(n.getDate()-7);const r=(await Ov(jy(rx,"users"))).docs.map(e=>He({id:e.id},e.data())),s=r.filter(t=>{var n;return(null===(n=t.createdAt)||void 0===n?void 0:n.toDate())>=e}).length,i=(await Ov(jy(rx,"transactions"))).docs.map(e=>He({id:e.id},e.data())),a=i.filter(t=>{var n;return(null===(n=t.createdAt)||void 0===n?void 0:n.toDate())>=e}),o=a.reduce((e,t)=>"CREDIT"===t.type?e+t.amount:e,0),l=new Date;l.setDate(1),l.setHours(0,0,0,0);const c=i.filter(e=>{var t;return(null===(t=e.createdAt)||void 0===t?void 0:t.toDate())>=l}),u=c.reduce((e,t)=>"CREDIT"===t.type?e+t.amount:e,0),d=r.filter(t=>{var r;const s=null===(r=t.createdAt)||void 0===r?void 0:r.toDate();return s>=n&&s<e}).length,h=r.filter(t=>{var n;return(null===(n=t.createdAt)||void 0===n?void 0:n.toDate())>=e}).length,f=d>0?((h-d)/d*100).toFixed(2):0;t({todaySignups:s,todayTransactions:a.length,todayRevenue:o,weeklyGrowth:f,monthlyRevenue:u,activeUsersToday:r.filter(e=>e.isReferralActive).length})}catch(e){console.error("Error fetching detailed stats:",e)}finally{r(!1)}};return n?(0,sx.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced Statistics"}),(0,sx.jsx)("p",{className:"text-gray-600 mt-1",children:"Detailed analytics and insights"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Cb,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-blue-100 text-sm",children:"Today's Signups"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.todaySignups})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Vx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-green-100 text-sm",children:"Today's Transactions"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:e.todayTransactions})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Lx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-purple-100 text-sm",children:"Today's Revenue"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(e.todayRevenue)})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(zx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-orange-100 text-sm",children:"Weekly Growth"}),(0,sx.jsxs)("p",{className:"text-4xl font-bold mt-2",children:[e.weeklyGrowth,"%"]})]})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Monthly Revenue"}),(0,sx.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-6",children:[(0,sx.jsx)("p",{className:"text-green-700 text-sm",children:"Total Revenue This Month"}),(0,sx.jsx)("p",{className:"text-5xl font-bold text-green-900 mt-2",children:Ex(e.monthlyRevenue)})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Active Users"}),(0,sx.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6",children:[(0,sx.jsx)("p",{className:"text-blue-700 text-sm",children:"Currently Active"}),(0,sx.jsx)("p",{className:"text-5xl font-bold text-blue-900 mt-2",children:e.activeUsersToday})]})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Performance Metrics"}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sx.jsxs)("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mb-3",children:(0,sx.jsx)(Mx,{className:"h-6 w-6 text-blue-600"})}),(0,sx.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(e.activeUsersToday/Math.max(e.todaySignups,1)*100).toFixed(1),"%"]}),(0,sx.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Activation Rate"})]}),(0,sx.jsxs)("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mb-3",children:(0,sx.jsx)(Lx,{className:"h-6 w-6 text-green-600"})}),(0,sx.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Ex(e.todayRevenue/Math.max(e.todayTransactions,1))}),(0,sx.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Avg Transaction"})]}),(0,sx.jsxs)("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full mb-3",children:(0,sx.jsx)(zx,{className:"h-6 w-6 text-purple-600"})}),(0,sx.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.weeklyGrowth,"%"]}),(0,sx.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Growth Rate"})]})]})]})]})},Db=()=>{const{userData:e}=ox(),[t,n]=(0,s.useState)({totalEarnings:0,availableBalance:0,totalWithdrawn:0}),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)({accountNumber:"",ifscCode:"",accountHolderName:"",bankName:""}),[h,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{m(),p()},[e]);const m=async()=>{if(e)try{var t,r;const s=(null===(t=e.wallet)||void 0===t?void 0:t.balance)||0,i=(null===(r=e.stats)||void 0===r?void 0:r.totalEarnings)||0,a=(await Ov(pv(jy(rx,"adminWithdrawals"),yv("adminId","==",e.id),yv("status","==",db)))).docs.reduce((e,t)=>e+(t.data().amount||0),0);n({totalEarnings:i,availableBalance:s,totalWithdrawn:a})}catch(s){console.error("Error fetching admin earnings:",s)}},p=async()=>{if(e)try{const t=pv(jy(rx,"adminWithdrawals"),yv("adminId","==",e.id),bv("createdAt","desc")),n=(await Ov(t)).docs.map(e=>He({id:e.id},e.data()));i(n)}catch(t){console.error("Error fetching withdrawals:",t)}};return(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Earnings"}),(0,sx.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your platform earnings"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Cx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-green-100 text-sm",children:"Available Balance"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(t.availableBalance)}),(0,sx.jsx)("button",{onClick:()=>o(!0),className:"mt-4 w-full bg-white text-green-600 hover:bg-green-50 font-semibold py-2 px-4 rounded-lg transition",disabled:t.availableBalance<100,children:"Withdraw Funds"})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(zx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-blue-100 text-sm",children:"Total Earnings"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(t.totalEarnings)})]}),(0,sx.jsxs)("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[(0,sx.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sx.jsx)(Hx,{className:"h-8 w-8"})}),(0,sx.jsx)("p",{className:"text-purple-100 text-sm",children:"Total Withdrawn"}),(0,sx.jsx)("p",{className:"text-4xl font-bold mt-2",children:Ex(t.totalWithdrawn)})]})]}),(0,sx.jsxs)("div",{className:"card",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Withdrawal History"}),0===r.length?(0,sx.jsx)("p",{className:"text-gray-500 text-center py-12",children:"No withdrawals yet"}):(0,sx.jsx)("div",{className:"space-y-3",children:r.map(e=>{var t,n,r;return(0,sx.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,sx.jsxs)("div",{className:"flex items-start justify-between",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sx.jsx)("div",{className:"bg-green-100 p-2 rounded-lg",children:(0,sx.jsx)(bx,{className:"h-5 w-5 text-green-600"})}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"font-bold text-lg text-gray-900",children:Ex(e.amount)}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:kx(e.createdAt)})]})]}),(0,sx.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full",children:e.status})]}),(0,sx.jsx)("div",{className:"bg-gray-50 rounded p-3 text-sm mt-3",children:(0,sx.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"Account:"}),(0,sx.jsxs)("span",{className:"ml-2 font-semibold",children:["****",null===(t=e.bankDetails)||void 0===t||null===(n=t.accountNumber)||void 0===n?void 0:n.slice(-4)]})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"IFSC:"}),(0,sx.jsx)("span",{className:"ml-2 font-semibold",children:null===(r=e.bankDetails)||void 0===r?void 0:r.ifscCode})]})]})})]},e.id)})})]}),a&&(0,sx.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,sx.jsx)("div",{className:"bg-white rounded-xl max-w-lg w-full",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Withdraw Earnings"}),(0,sx.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r=Number(l);if(r<100)ln.error("Minimum withdrawal amount is \u20b9100");else if(r>t.availableBalance)ln.error("Insufficient balance");else if(u.accountNumber&&u.ifscCode&&u.accountHolderName){f(!0);try{await Uv(jy(rx,"adminWithdrawals"),{adminId:e.id,adminName:e.name,adminEmail:e.email,amount:r,bankDetails:u,status:db,createdAt:qv(),approvedAt:qv(),updatedAt:qv()}),await Mv(Sy(rx,"users",e.id),{"wallet.balance":Kv(-r),"wallet.lastUpdated":qv()}),await Uv(jy(rx,"transactions"),{userId:e.id,amount:r,type:"WITHDRAWAL",status:"SUCCESS",description:"Admin withdrawal to bank account ****".concat(u.accountNumber.slice(-4)),createdAt:qv()}),ln.success("Withdrawal processed successfully!"),o(!1),c(""),d({accountNumber:"",ifscCode:"",accountHolderName:"",bankName:""}),m(),p()}catch(s){console.error("Error processing withdrawal:",s),ln.error("Failed to process withdrawal")}finally{f(!1)}}else ln.error("Please fill all bank details")},className:"space-y-4",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Amount *"}),(0,sx.jsxs)("div",{className:"relative",children:[(0,sx.jsx)("span",{className:"absolute left-4 top-3 text-gray-500",children:"\u20b9"}),(0,sx.jsx)("input",{type:"number",value:l,onChange:e=>c(e.target.value),className:"input-field pl-10",placeholder:"Enter amount",required:!0,min:"100",max:t.availableBalance})]}),(0,sx.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",Ex(t.availableBalance)]})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sx.jsxs)("div",{className:"col-span-2",children:[(0,sx.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name *"}),(0,sx.jsx)("input",{type:"text",value:u.accountHolderName,onChange:e=>d(He(He({},u),{},{accountHolderName:e.target.value})),className:"input-field",placeholder:"As per bank account",required:!0})]}),(0,sx.jsxs)("div",{className:"col-span-2",children:[(0,sx.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name *"}),(0,sx.jsx)("input",{type:"text",value:u.bankName,onChange:e=>d(He(He({},u),{},{bankName:e.target.value})),className:"input-field",placeholder:"e.g., State Bank of India",required:!0})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number *"}),(0,sx.jsx)("input",{type:"text",value:u.accountNumber,onChange:e=>d(He(He({},u),{},{accountNumber:e.target.value})),className:"input-field",placeholder:"Enter account number",required:!0})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code *"}),(0,sx.jsx)("input",{type:"text",value:u.ifscCode,onChange:e=>d(He(He({},u),{},{ifscCode:e.target.value.toUpperCase()})),className:"input-field uppercase",placeholder:"e.g., SBIN0001234",required:!0,maxLength:"11"})]})]}),(0,sx.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sx.jsx)("button",{type:"submit",disabled:h,className:"flex-1 btn-primary disabled:opacity-50",children:h?"Processing...":"Withdraw"}),(0,sx.jsx)("button",{type:"button",onClick:()=>o(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})})})]})},Rb=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)("PENDING"),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[f,m]=(0,s.useState)("");(0,s.useEffect)(()=>{p();const e=setInterval(p,3e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{g()},[n,e]);const p=async()=>{try{console.log("\ud83d\udce5 Fetching activation requests...");const e=pv(jy(rx,"activationRequests"),bv("createdAt","desc")),n=(await Ov(e)).docs.map(e=>He({id:e.id},e.data()));t(n)}catch(e){console.error("\u274c Error fetching activation requests:",e),ln.error("Failed to load activation requests")}finally{l(!1)}},g=()=>{a("ALL"===n?e:e.filter(e=>e.status===n))},y=async e=>{if(window.confirm("Approve activation for ".concat(e.userName,"?\n\nThis will:\n- Activate their account\n- Process \u20b9").concat(e.amount," payment\n- Credit referral bonus if applicable"))){u(e.id);try{const t=await(async e=>nb("approveActivation",{requestId:e}))(e.id);ln.success(t.message),h(null),m(""),p()}catch(t){console.error("\u274c Error approving activation:",t),ln.error(t.message||"Failed to approve activation")}finally{u(null)}}},v=async e=>{if(f.trim()){if(window.confirm("Reject activation request from ".concat(e.userName,"?"))){u(e.id);try{const t=await(async(e,t)=>nb("rejectActivation",{requestId:e,reason:t}))(e.id,f);ln.success(t.message),h(null),m(""),p()}catch(t){console.error("\u274c Error rejecting activation:",t),ln.error(t.message||"Failed to reject activation")}finally{u(null)}}}else ln.error("Please provide a reason for rejection")},x=e=>{switch(e){case fb:return"bg-yellow-100 text-yellow-800";case mb:return"bg-green-100 text-green-800";case pb:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o?(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Activation Requests"}),(0,sx.jsx)("button",{onClick:p,className:"btn-secondary",children:"\ud83d\udd04 Refresh"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,sx.jsx)("div",{className:"bg-yellow-50 border-yellow-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-yellow-700",children:"Pending"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-yellow-900",children:e.filter(e=>e.status===fb).length})]}),(0,sx.jsx)(rb,{className:"w-12 h-12 text-yellow-600"})]})}),(0,sx.jsx)("div",{className:"bg-green-50 border-green-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-green-700",children:"Approved"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-green-900",children:e.filter(e=>e.status===mb).length})]}),(0,sx.jsx)(bx,{className:"w-12 h-12 text-green-600"})]})}),(0,sx.jsx)("div",{className:"bg-red-50 border-red-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-red-700",children:"Rejected"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-red-900",children:e.filter(e=>e.status===pb).length})]}),(0,sx.jsx)(wx,{className:"w-12 h-12 text-red-600"})]})})]}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"w-full input-field md:w-64",children:[(0,sx.jsx)("option",{value:"PENDING",children:"Pending Requests"}),(0,sx.jsx)("option",{value:"APPROVED",children:"Approved Requests"}),(0,sx.jsx)("option",{value:"REJECTED",children:"Rejected Requests"}),(0,sx.jsx)("option",{value:"ALL",children:"All Requests"})]})}),(0,sx.jsx)("div",{className:"space-y-4",children:0===i.length?(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)(rb,{className:"mx-auto mb-4 w-16 h-16 text-gray-300"}),(0,sx.jsx)("p",{className:"text-gray-500",children:"No activation requests found"}),(0,sx.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"PENDING"===n?"Waiting for users to submit activation requests":"No ".concat(n.toLowerCase()," requests")})]}):i.map(e=>(0,sx.jsx)("div",{className:"transition card hover:shadow-xl",children:(0,sx.jsxs)("div",{className:"flex flex-col justify-between lg:flex-row",children:[(0,sx.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("div",{className:"flex items-center mb-1 space-x-2",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.userName}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(x(e.status)),children:e.status})]}),(0,sx.jsx)("p",{className:"text-gray-600",children:e.userEmail}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:e.userPhone}),(0,sx.jsxs)("p",{className:"text-sm text-gray-500",children:["Requested: ",kx(e.createdAt)]})]}),(0,sx.jsx)("div",{className:"text-right",children:(0,sx.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:Ex(e.amount)})})]}),(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"flex items-center mb-2 text-sm font-semibold text-gray-700",children:"\ud83d\udcb3 Payment Details:"}),(0,sx.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"UTR Number:"}),(0,sx.jsx)("span",{className:"ml-2 font-mono text-lg font-semibold text-primary-600",children:e.utrNumber})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"Amount:"}),(0,sx.jsx)("span",{className:"ml-2 font-semibold",children:Ex(e.amount)})]})]})]}),e.hasReferrer&&(0,sx.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,sx.jsxs)("p",{className:"flex items-center mb-2 text-sm font-semibold text-blue-700",children:[(0,sx.jsx)(gx,{className:"mr-2 w-4 h-4"}),"Referral Information:"]}),(0,sx.jsxs)("div",{className:"text-sm",children:[(0,sx.jsx)("span",{className:"text-gray-600",children:"Referred by:"}),(0,sx.jsx)("span",{className:"ml-2 font-semibold",children:e.referrerName})]}),(0,sx.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"\ud83d\udcb0 Referrer will receive \u20b910 bonus upon approval"})]}),e.adminNote&&(0,sx.jsx)("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-600",children:(0,sx.jsxs)("p",{className:"text-sm text-yellow-900",children:[(0,sx.jsx)("span",{className:"font-semibold",children:e.status===pb?"Rejection Reason: ":"Admin Note: "}),e.adminNote]})})]}),e.status===fb&&(0,sx.jsx)("div",{className:"flex gap-3 mt-4 lg:ml-6 lg:mt-0 lg:flex-col lg:w-48",children:(0,sx.jsx)("button",{onClick:()=>h(e),className:"flex-1 btn-primary",disabled:c===e.id,children:"Review"})})]})},e.id))}),d&&(0,sx.jsx)("div",{className:"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50",children:(0,sx.jsx)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsx)("h3",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Review Activation Request"}),(0,sx.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:"User"}),(0,sx.jsx)("p",{className:"text-lg font-bold text-gray-900",children:d.userName}),(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:d.userEmail})]}),(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"Payment Amount"}),(0,sx.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:Ex(d.amount)})]}),(0,sx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,sx.jsx)("p",{className:"mb-1 text-sm text-gray-600",children:"UTR Number"}),(0,sx.jsx)("p",{className:"font-mono text-lg font-semibold text-gray-900",children:d.utrNumber})]}),d.hasReferrer&&(0,sx.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,sx.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,sx.jsx)("strong",{children:"Note:"})," This user was referred by"," ",(0,sx.jsx)("strong",{children:d.referrerName}),". Upon approval, referrer will receive \u20b910 bonus."]})}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Admin Note (Optional for approval, required for rejection)"}),(0,sx.jsx)("textarea",{value:f,onChange:e=>m(e.target.value),className:"input-field",rows:"3",placeholder:"Add a note..."})]})]}),(0,sx.jsxs)("div",{className:"flex gap-3",children:[(0,sx.jsx)("button",{onClick:()=>y(d),disabled:c,className:"flex-1 px-4 py-2 font-semibold text-white bg-green-600 rounded-lg transition hover:bg-green-700 disabled:opacity-50",children:c?"Processing...":"\u2713 Approve"}),(0,sx.jsx)("button",{onClick:()=>v(d),disabled:c,className:"flex-1 px-4 py-2 font-semibold text-white bg-red-600 rounded-lg transition hover:bg-red-700 disabled:opacity-50",children:"\u2717 Reject"}),(0,sx.jsx)("button",{onClick:()=>{h(null),m("")},className:"btn-secondary",children:"Cancel"})]})]})})})]})},Pb=()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)("PENDING"),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)("");(0,s.useEffect)(()=>{f()},[]),(0,s.useEffect)(()=>{m()},[i,e]);const f=async()=>{l(!0);try{const e=pv(jy(rx,"supportTickets"),bv("createdAt","desc")),n=await Ov(e),r=[];n.forEach(e=>{r.push(He({id:e.id},e.data()))}),t(r),0===r.length&&ln.info("No support tickets found")}catch(e){ln.error("Failed to load tickets")}finally{l(!1)}},m=()=>{if("ALL"===i)r(e);else{const t=e.filter(e=>e.status===i);r(t)}},p=e=>{a(e)},g=()=>{u(null),h("")},y=async e=>{if(confirm("Mark this ticket as resolved?"))try{await Mv(Sy(rx,"supportTickets",e),{status:"RESOLVED",resolvedAt:qv(),updatedAt:qv()}),ln.success("Ticket marked as resolved"),await f(),g()}catch(t){ln.error("Failed to resolve ticket")}},v=e.filter(e=>"PENDING"===e.status).length,x=e.filter(e=>"REPLIED"===e.status).length,b=e.filter(e=>"RESOLVED"===e.status).length;return o?(0,sx.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,sx.jsx)("div",{className:"w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600"})}):(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Support Tickets"}),(0,sx.jsxs)("p",{className:"mt-1 text-gray-600",children:["Total: ",e.length," tickets"]})]}),(0,sx.jsx)("button",{onClick:f,className:"btn-secondary",children:"\ud83d\udd04 Refresh"})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[(0,sx.jsx)("div",{className:"bg-yellow-50 border-yellow-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-yellow-700",children:"Pending"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-yellow-900",children:v})]}),(0,sx.jsx)(rb,{className:"w-12 h-12 text-yellow-600"})]})}),(0,sx.jsx)("div",{className:"bg-blue-50 border-blue-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-blue-700",children:"Replied"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:x})]}),(0,sx.jsx)($x,{className:"w-12 h-12 text-blue-600"})]})}),(0,sx.jsx)("div",{className:"bg-green-50 border-green-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-green-700",children:"Resolved"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-green-900",children:b})]}),(0,sx.jsx)(bx,{className:"w-12 h-12 text-green-600"})]})}),(0,sx.jsx)("div",{className:"bg-purple-50 border-purple-200 card",children:(0,sx.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("p",{className:"text-sm text-purple-700",children:"Total"}),(0,sx.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:e.length})]}),(0,sx.jsx)(Fx,{className:"w-12 h-12 text-purple-600"})]})})]}),(0,sx.jsx)("div",{className:"card",children:(0,sx.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,sx.jsxs)("button",{onClick:()=>p("PENDING"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("PENDING"===i?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Pending (",v,")"]}),(0,sx.jsxs)("button",{onClick:()=>p("REPLIED"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("REPLIED"===i?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Replied (",x,")"]}),(0,sx.jsxs)("button",{onClick:()=>p("RESOLVED"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("RESOLVED"===i?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Resolved (",b,")"]}),(0,sx.jsxs)("button",{onClick:()=>p("ALL"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("ALL"===i?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["All (",e.length,")"]})]})}),(0,sx.jsx)("div",{className:"space-y-4",children:0===n.length?(0,sx.jsxs)("div",{className:"py-12 text-center card",children:[(0,sx.jsx)(Fx,{className:"mx-auto mb-4 w-16 h-16 text-gray-300"}),(0,sx.jsxs)("p",{className:"text-gray-500",children:["No ",i.toLowerCase()," tickets found"]})]}):n.map(e=>(0,sx.jsx)("div",{className:"transition card hover:shadow-lg",children:(0,sx.jsxs)("div",{className:"flex flex-col justify-between lg:flex-row",children:[(0,sx.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,sx.jsx)("div",{className:"flex justify-between items-start",children:(0,sx.jsxs)("div",{children:[(0,sx.jsxs)("div",{className:"flex items-center mb-1 space-x-2",children:[(0,sx.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.subject}),(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"REPLIED"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.status})]}),(0,sx.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,sx.jsx)(gx,{className:"w-4 h-4"}),(0,sx.jsx)("span",{children:e.userName})]}),(0,sx.jsx)("p",{className:"text-sm text-gray-500",children:kx(e.createdAt)})]})}),(0,sx.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(hx,{className:"w-4 h-4 text-gray-500"}),(0,sx.jsx)("a",{href:"mailto:".concat(e.userEmail),className:"text-primary-600 hover:text-primary-700",children:e.userEmail})]}),e.userPhone&&(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)(yx,{className:"w-4 h-4 text-gray-500"}),(0,sx.jsx)("span",{className:"text-gray-700",children:e.userPhone})]})]}),(0,sx.jsx)("div",{className:"p-3 bg-blue-50 rounded border-l-4 border-blue-600",children:(0,sx.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.message})})]}),(0,sx.jsxs)("div",{className:"flex gap-3 mt-4 lg:mt-0 lg:ml-6 lg:flex-col lg:w-48",children:[(0,sx.jsxs)("button",{onClick:()=>(e=>{u(e),h("")})(e),className:"flex flex-1 justify-center items-center btn-primary",children:[(0,sx.jsx)(Zx,{className:"mr-2 w-4 h-4"}),"View Details"]}),"RESOLVED"!==e.status&&(0,sx.jsxs)("button",{onClick:()=>y(e.id),className:"flex flex-1 justify-center items-center btn-secondary",children:[(0,sx.jsx)(bx,{className:"mr-2 w-4 h-4"}),"Resolve"]})]})]})},e.id))}),c&&(0,sx.jsx)("div",{className:"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50",children:(0,sx.jsx)("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,sx.jsxs)("div",{className:"p-6",children:[(0,sx.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h3",{className:"mb-2 text-2xl font-bold text-gray-900",children:c.subject}),(0,sx.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("PENDING"===c.status?"bg-yellow-100 text-yellow-800":"REPLIED"===c.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:c.status}),(0,sx.jsxs)("span",{className:"text-sm text-gray-500",children:["Ticket #",c.id.substring(0,8)]})]})]}),(0,sx.jsx)("button",{onClick:g,className:"text-2xl font-bold text-gray-500 hover:text-gray-700",children:(0,sx.jsx)(_x,{className:"w-6 h-6"})})]}),(0,sx.jsxs)("div",{className:"grid grid-cols-1 gap-4 p-4 mb-6 bg-gray-50 rounded-lg sm:grid-cols-3",children:[(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Name"}),(0,sx.jsx)("p",{className:"mt-1 font-semibold text-gray-900",children:c.userName})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Email"}),(0,sx.jsx)("p",{className:"mt-1 font-semibold text-gray-900 break-all",children:(0,sx.jsx)("a",{href:"mailto:".concat(c.userEmail),className:"text-primary-600 hover:text-primary-700",children:c.userEmail})})]}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("label",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Phone"}),(0,sx.jsx)("p",{className:"mt-1 font-semibold text-gray-900",children:c.userPhone||"Not provided"})]})]}),(0,sx.jsx)("div",{className:"p-3 mb-6 bg-blue-50 rounded-lg border border-blue-200",children:(0,sx.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,sx.jsx)("strong",{children:"\ud83d\udcc5 Submitted:"})," ",kx(c.createdAt)]})}),(0,sx.jsxs)("div",{className:"mb-6",children:[(0,sx.jsx)("label",{className:"block mb-2 text-sm font-semibold text-gray-700 uppercase",children:"User's Message"}),(0,sx.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border-l-4 border-blue-600",children:(0,sx.jsx)("p",{className:"leading-relaxed text-gray-800 whitespace-pre-wrap",children:c.message})})]}),c.lastReply&&(0,sx.jsxs)("div",{className:"mb-6",children:[(0,sx.jsxs)("label",{className:"block mb-2 text-sm font-semibold text-gray-700 uppercase",children:["Your Last Reply",(0,sx.jsxs)("span",{className:"ml-2 text-xs text-gray-500 normal-case",children:["(Sent on ",kx(c.repliedAt),")"]})]}),(0,sx.jsx)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-l-4 border-green-600",children:(0,sx.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:c.lastReply})})]}),(0,sx.jsx)("div",{className:"my-6 border-t border-gray-200"}),"RESOLVED"!==c.status&&(0,sx.jsxs)("div",{className:"space-y-6",children:[(0,sx.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Reply to User"}),(0,sx.jsxs)("div",{className:"p-5 rounded-lg border border-primary-200 bg-primary-50",children:[(0,sx.jsxs)("div",{className:"flex items-start mb-3 space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 rounded-lg bg-primary-600",children:(0,sx.jsx)($x,{className:"w-5 h-5 text-white"})}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h5",{className:"font-bold text-gray-900",children:"Option 1: Quick Reply"}),(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:"Send reply directly (user sees in Support panel)"})]})]}),(0,sx.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"mb-3 w-full resize-none input-field",rows:"5",placeholder:"Type your reply here..."}),(0,sx.jsxs)("button",{onClick:async()=>{if(d.trim()){if(c)try{const e={message:d,sender:"admin",sentAt:ul.now()};await Mv(Sy(rx,"supportTickets",c.id),{status:"REPLIED",lastReply:d,repliedAt:qv(),updatedAt:qv(),replies:Wv(e)});const t=jy(rx,"notifications");await Uv(t,{userId:c.userId,type:"SUPPORT_REPLY",title:"Admin Replied to Your Ticket",message:'You have a new reply on: "'.concat(c.subject,'"'),ticketId:c.id,read:!1,createdAt:qv()}),ln.success("Reply sent! User will see it in their Support panel."),h(""),await f(),g()}catch(e){ln.error("Failed to send reply")}}else ln.error("Please enter a reply")},disabled:!d.trim(),className:"flex justify-center items-center w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,sx.jsx)($x,{className:"mr-2 w-4 h-4"}),"Send Quick Reply"]}),(0,sx.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"\u2713 Reply appears in user's Support panel"})]}),(0,sx.jsxs)("div",{className:"p-5 bg-gray-50 rounded-lg border border-gray-200",children:[(0,sx.jsxs)("div",{className:"flex items-start mb-3 space-x-3",children:[(0,sx.jsx)("div",{className:"p-2 bg-gray-600 rounded-lg",children:(0,sx.jsx)(hx,{className:"w-5 h-5 text-white"})}),(0,sx.jsxs)("div",{children:[(0,sx.jsx)("h5",{className:"font-bold text-gray-900",children:"Option 2: Use Your Email Client"}),(0,sx.jsx)("p",{className:"text-sm text-gray-600",children:"Opens Gmail/Outlook with pre-filled recipient"})]})]}),(0,sx.jsxs)("a",{href:"mailto:".concat(c.userEmail,"?subject=Re: ").concat(encodeURIComponent(c.subject),"&body=Hi ").concat(c.userName,',%0D%0A%0D%0AThank you for contacting Refer & Earn Support.%0D%0A%0D%0ARegarding your query: "').concat(c.subject,'"%0D%0A%0D%0A[Type your response here]%0D%0A%0D%0ABest regards,%0D%0ARefer & Earn Support Team'),className:"flex justify-center items-center w-full text-center btn-secondary",target:"_blank",rel:"noopener noreferrer",children:[(0,sx.jsx)(hx,{className:"mr-2 w-4 h-4"}),"Open in Email Client"]}),(0,sx.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"\u2139\ufe0f Opens your default email app"})]})]}),"RESOLVED"===c.status&&(0,sx.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,sx.jsxs)("div",{className:"flex items-center space-x-2 text-green-800",children:[(0,sx.jsx)(bx,{className:"w-5 h-5"}),(0,sx.jsx)("p",{className:"font-semibold",children:"This ticket has been resolved"})]}),c.resolvedAt&&(0,sx.jsxs)("p",{className:"mt-1 text-sm text-green-700",children:["Resolved on: ",kx(c.resolvedAt)]})]}),(0,sx.jsx)("div",{className:"my-6 border-t border-gray-200"}),(0,sx.jsx)("div",{className:"flex flex-col gap-3 sm:flex-row",children:"RESOLVED"!==c.status?(0,sx.jsxs)(sx.Fragment,{children:[(0,sx.jsxs)("button",{onClick:()=>y(c.id),className:"flex flex-1 justify-center items-center px-4 py-3 font-semibold text-white bg-green-600 rounded-lg transition hover:bg-green-700",children:[(0,sx.jsx)(bx,{className:"mr-2 w-5 h-5"}),"Mark as Resolved"]}),(0,sx.jsx)("button",{onClick:g,className:"flex flex-1 justify-center items-center px-4 py-3 font-semibold text-white bg-gray-600 rounded-lg transition hover:bg-gray-700",children:"Close"})]}):(0,sx.jsx)("button",{onClick:g,className:"flex justify-center items-center px-4 py-3 w-full font-semibold text-white rounded-lg transition bg-primary-600 hover:bg-primary-700",children:"Close"})})]})})})]})},Ob=e=>{let{fullScreen:t=!0}=e;return t?(0,sx.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,sx.jsxs)("div",{className:"text-center",children:[(0,sx.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),(0,sx.jsx)("p",{className:"text-gray-600 font-semibold",children:"Loading..."})]})}):(0,sx.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,sx.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-primary-600"})})},Lb=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(!1);return(0,sx.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,sx.jsx)(Px,{sidebarOpen:n,setSidebarOpen:r}),(0,sx.jsxs)("div",{className:"flex",children:[(0,sx.jsx)(Bx,{sidebarOpen:n,setSidebarOpen:r}),(0,sx.jsx)("main",{className:"flex-1 p-6 lg:p-8",children:t})]})]})},Mb=()=>{const{user:e,loading:t}=ox();return t?(0,sx.jsx)(Ob,{}):(0,sx.jsxs)(we,{children:[(0,sx.jsx)(xe,{path:"/login",element:e?(0,sx.jsx)(ve,{to:"/user/dashboard"}):(0,sx.jsx)(mx,{})}),(0,sx.jsx)(xe,{path:"/register",element:e?(0,sx.jsx)(ve,{to:"/user/dashboard"}):(0,sx.jsx)(jx,{})}),(0,sx.jsx)(xe,{path:"/user/dashboard",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Yx,{})})})}),(0,sx.jsx)(xe,{path:"/user/activate",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(wb,{})})})}),(0,sx.jsx)(xe,{path:"/user/withdraw",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(gb,{})})})}),(0,sx.jsx)(xe,{path:"/user/referrals",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(yb,{})})})}),(0,sx.jsx)(xe,{path:"/user/transactions",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(xb,{})})})}),(0,sx.jsx)(xe,{path:"/user/support",element:(0,sx.jsx)(Sx,{children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(tb,{})})})}),(0,sx.jsx)(xe,{path:"/admin/dashboard",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(kb,{})})})}),(0,sx.jsx)(xe,{path:"/admin/users",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Sb,{})})})}),(0,sx.jsx)(xe,{path:"/admin/withdrawals",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(_b,{})})})}),(0,sx.jsx)(xe,{path:"/admin/transactions",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Tb,{})})})}),(0,sx.jsx)(xe,{path:"/admin/stats",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Ab,{})})})}),(0,sx.jsx)(xe,{path:"/admin/earnings",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Db,{})})})}),(0,sx.jsx)(xe,{path:"/admin/activations",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Rb,{})})})}),(0,sx.jsx)(xe,{path:"/admin/support",element:(0,sx.jsx)(Sx,{adminOnly:!0,children:(0,sx.jsx)(Lb,{children:(0,sx.jsx)(Pb,{})})})}),(0,sx.jsx)(xe,{path:"/",element:(0,sx.jsx)(ve,{to:"/login"})}),(0,sx.jsx)(xe,{path:"*",element:(0,sx.jsx)(ve,{to:"/login"})})]})};const Ub=function(){return(0,s.useEffect)(()=>{0},[]),(0,s.useEffect)(()=>{(async()=>{if(!("Notification"in window))return console.log("This browser does not support notifications"),!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission)return"granted"===await Notification.requestPermission()})()},[]),(0,sx.jsx)(De,{children:(0,sx.jsxs)(ax,{children:[(0,sx.jsx)(Mb,{}),(0,sx.jsx)(on,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})},Fb=(0,$v.F3)("SplashScreen",{web:()=>n.e(484).then(n.bind(n,484)).then(e=>new e.SplashScreenWeb)});var Vb,zb;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(Vb||(Vb={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(zb||(zb={}));const Bb=(0,$v.F3)("StatusBar");a.createRoot(document.getElementById("root")).render((0,sx.jsx)(s.StrictMode,{children:(0,sx.jsx)(Ub,{})})),(async()=>{if($v.Ii.isNativePlatform())try{await Bb.setStyle({style:Vb.Dark}),"android"===$v.Ii.getPlatform()&&await Bb.setBackgroundColor({color:"#667eea"});const{App:e}=await n.e(205).then(n.bind(n,205));e.addListener("backButton",t=>{let{canGoBack:n}=t;n?window.history.back():e.exitApp()}),setTimeout(async()=>{await Fb.hide()},500)}catch(e){console.log("Capacitor initialization error:",e)}})()})();
//# sourceMappingURL=main.1f9b4f83.js.map