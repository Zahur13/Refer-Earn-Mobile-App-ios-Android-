{"ast":null,"code":"import _objectSpread from\"/Users/zahurshaikh/Documents/Refer-Earn-APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useAuth}from\"../../hooks/useAuth\";import{auth,db}from\"../../firebase/config\";import{collection,query,where,getDocs,orderBy,doc,updateDoc,serverTimestamp}from\"firebase/firestore\";import{MessageCircle,Mail,Send,CheckCircle,HelpCircle,Clock,Eye,X,User,Shield}from\"lucide-react\";import toast from\"react-hot-toast\";import{formatDate}from\"../../utils/helpers\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Support=()=>{const{userData}=useAuth();const[formData,setFormData]=useState({subject:\"\",message:\"\"});const[loading,setLoading]=useState(false);const[submitted,setSubmitted]=useState(false);const[myTickets,setMyTickets]=useState([]);const[selectedTicket,setSelectedTicket]=useState(null);const[loadingTickets,setLoadingTickets]=useState(true);const[activeTab,setActiveTab]=useState(\"new\");// \"new\" or \"history\"\nuseEffect(()=>{if(userData){fetchMyTickets();}},[userData]);const fetchMyTickets=async()=>{setLoadingTickets(true);try{const q=query(collection(db,\"supportTickets\"),where(\"userId\",\"==\",auth.currentUser.uid),orderBy(\"createdAt\",\"desc\"));const snapshot=await getDocs(q);const tickets=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMyTickets(tickets);}catch(error){console.error(\"Error fetching tickets:\",error);}finally{setLoadingTickets(false);}};const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();if(!formData.subject.trim()||!formData.message.trim()){toast.error(\"Please fill all fields\");return;}setLoading(true);try{const token=await auth.currentUser.getIdToken();const response=await fetch(\"/api/submitSupportTicket\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userName:userData.name,userEmail:userData.email,userPhone:userData.phone||\"\",subject:formData.subject,message:formData.message})});const result=await response.json();if(!response.ok){throw new Error(result.error||\"Failed to send message\");}setSubmitted(true);setFormData({subject:\"\",message:\"\"});toast.success(result.message);// Refresh tickets\nawait fetchMyTickets();setTimeout(()=>{setSubmitted(false);setActiveTab(\"history\");// Switch to history tab\n},2000);}catch(error){console.error(\"Support form error:\",error);toast.error(error.message||\"Failed to send message\");}finally{setLoading(false);}};const openTicket=ticket=>{setSelectedTicket(ticket);// Mark notification as read if unread\nif(ticket.status===\"REPLIED\"&&ticket.replies&&ticket.replies.length>0){// Update notification read status\nupdateDoc(doc(db,\"supportTickets\",ticket.id),{lastViewedByUser:serverTimestamp()}).catch(err=>console.error(\"Error updating view time:\",err));}};const closeTicket=()=>{setSelectedTicket(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto space-y-6 max-w-6xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white bg-gradient-to-r card from-primary-600 to-primary-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 rounded-full bg-white/20\",children:/*#__PURE__*/_jsx(MessageCircle,{className:\"w-8 h-8\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Support Center\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-primary-100\",children:\"Get help and view your tickets\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 border-b\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"new\"),className:\"px-6 py-3 font-semibold transition \".concat(activeTab===\"new\"?\"border-b-2 border-primary-600 text-primary-600\":\"text-gray-600 hover:text-gray-900\"),children:\"\\uD83D\\uDCDD New Ticket\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(\"history\"),className:\"px-6 py-3 font-semibold transition relative \".concat(activeTab===\"history\"?\"border-b-2 border-primary-600 text-primary-600\":\"text-gray-600 hover:text-gray-900\"),children:[\"\\uD83D\\uDCCB My Tickets (\",myTickets.length,\")\",myTickets.filter(t=>t.status===\"REPLIED\"&&!t.lastViewedByUser).length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"flex absolute -top-1 -right-1 justify-center items-center w-5 h-5 text-xs text-white bg-red-500 rounded-full\",children:myTickets.filter(t=>t.status===\"REPLIED\"&&!t.lastViewedByUser).length})]})]})}),activeTab===\"new\"?/*#__PURE__*//* NEW TICKET FORM */_jsxs(\"div\",{className:\"grid grid-cols-1 gap-6 lg:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 lg:col-span-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg bg-primary-50\",children:/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-primary-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Email Support\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 break-all\",children:\"refernearnplatform@gmail.com\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border-blue-200 card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-100 rounded-lg\",children:/*#__PURE__*/_jsx(HelpCircle,{className:\"w-5 h-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Response Time\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:\"We typically respond within 24 hours\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"Mon-Fri: 9 AM - 6 PM IST\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 border-yellow-200 card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"flex items-center mb-3 font-semibold text-gray-900\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\uD83D\\uDCA1\"}),\" Common Topics\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm text-gray-700\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Account activation issues\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Payment verification\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Withdrawal requests\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Referral code problems\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:submitted?/*#__PURE__*/_jsxs(\"div\",{className:\"py-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex justify-center items-center mb-4 w-16 h-16 bg-green-100 rounded-full\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-10 h-10 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-2 text-2xl font-bold text-gray-900\",children:\"Ticket Submitted!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 text-gray-600\",children:\"Thank you for contacting us. We've received your ticket.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4 text-sm text-gray-500\",children:[\"\\u2705 Admin will reply in the Support Center\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2705 You'll get a notification when admin replies\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSubmitted(false);setActiveTab(\"history\");},className:\"mt-4 btn-primary\",children:\"View My Tickets\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-1 text-xl font-bold text-gray-900\",children:\"Create New Ticket\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6 text-sm text-gray-600\",children:\"Fill out the form below and we'll get back to you soon\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-xs font-medium text-gray-600\",children:\"Your Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-900\",children:userData===null||userData===void 0?void 0:userData.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-xs font-medium text-gray-600\",children:\"Your Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-900 break-all\",children:userData===null||userData===void 0?void 0:userData.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block mb-2 text-sm font-medium text-gray-700\",children:[\"Subject \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"subject\",value:formData.subject,onChange:handleChange,className:\"input-field\",placeholder:\"e.g., Payment not verified, Withdrawal issue, etc.\",required:true,maxLength:\"100\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block mb-2 text-sm font-medium text-gray-700\",children:[\"Message \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",value:formData.message,onChange:handleChange,className:\"resize-none input-field\",rows:\"8\",placeholder:\"Please describe your issue or question in detail...\",required:true,maxLength:\"1000\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:[formData.message.length,\"/1000 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCAC What happens next:\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-2 space-y-1 text-sm text-blue-700\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Your ticket will be sent to admin\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Admin replies appear in \\\"My Tickets\\\" tab\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 You'll get a notification when admin replies\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Response within 24 hours\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"py-3 w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(\"span\",{className:\"flex justify-center items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"mr-3 -ml-1 w-5 h-5 text-white animate-spin\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Submitting...\"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"flex justify-center items-center\",children:[/*#__PURE__*/_jsx(Send,{className:\"mr-2 w-5 h-5\"}),\"Submit Ticket\"]})})]})]})})})]}):/*#__PURE__*//* MY TICKETS HISTORY */_jsx(\"div\",{className:\"space-y-4\",children:loadingTickets?/*#__PURE__*/_jsx(\"div\",{className:\"py-12 text-center card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600\"})}):myTickets.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"py-12 text-center card\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"mx-auto mb-4 w-16 h-16 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 text-gray-500\",children:\"No tickets yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-sm text-gray-400\",children:\"Create your first support ticket to get help\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"new\"),className:\"btn-primary\",children:\"Create New Ticket\"})]}):myTickets.map(ticket=>/*#__PURE__*/_jsx(\"div\",{className:\"transition card hover:shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between lg:flex-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-start\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1 space-x-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:ticket.subject}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(ticket.status===\"PENDING\"?\"bg-yellow-100 text-yellow-800\":ticket.status===\"REPLIED\"?\"bg-blue-100 text-blue-800\":\"bg-green-100 text-green-800\"),children:ticket.status}),ticket.status===\"REPLIED\"&&!ticket.lastViewedByUser&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs text-white bg-red-500 rounded-full animate-pulse\",children:\"New Reply!\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Created: \",formatDate(ticket.createdAt)]}),ticket.repliedAt&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[\"Last reply: \",formatDate(ticket.repliedAt)]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 line-clamp-2\",children:ticket.message})}),ticket.lastReply&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-blue-50 rounded border-l-4 border-blue-600\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-1 text-xs font-semibold text-blue-800\",children:\"Admin's Reply:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 line-clamp-2\",children:ticket.lastReply})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3 mt-4 lg:mt-0 lg:ml-6 lg:flex-col lg:w-48\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openTicket(ticket),className:\"flex flex-1 justify-center items-center btn-primary\",children:[/*#__PURE__*/_jsx(Eye,{className:\"mr-2 w-4 h-4\"}),\"View Details\"]})})]})},ticket.id))}),selectedTicket&&/*#__PURE__*/_jsx(\"div\",{className:\"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-2 text-2xl font-bold text-gray-900\",children:selectedTicket.subject}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(selectedTicket.status===\"PENDING\"?\"bg-yellow-100 text-yellow-800\":selectedTicket.status===\"REPLIED\"?\"bg-blue-100 text-blue-800\":\"bg-green-100 text-green-800\"),children:selectedTicket.status})]}),/*#__PURE__*/_jsx(\"button\",{onClick:closeTicket,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center w-10 h-10 rounded-full bg-primary-100\",children:/*#__PURE__*/_jsx(User,{className:\"w-5 h-5 text-primary-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg border-l-4 bg-primary-50 border-primary-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2 space-x-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900\",children:\"You\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:formatDate(selectedTicket.createdAt)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 whitespace-pre-wrap\",children:selectedTicket.message})]})})]}),selectedTicket.replies&&selectedTicket.replies.length>0&&selectedTicket.replies.map((reply,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center w-10 h-10 bg-green-100 rounded-full\",children:/*#__PURE__*/_jsx(Shield,{className:\"w-5 h-5 text-green-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 rounded-lg border-l-4 border-green-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2 space-x-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900\",children:\"Admin Support\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:formatDate(reply.sentAt)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 whitespace-pre-wrap\",children:reply.message})]})})]},index))]}),selectedTicket.status===\"PENDING\"&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-yellow-50 rounded-lg border border-yellow-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800\",children:[\"\\u23F3 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Waiting for admin response...\"}),\" We'll notify you when admin replies.\"]})}),selectedTicket.status===\"RESOLVED\"&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-green-50 rounded-lg border border-green-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-800\",children:[\"\\u2705 \",/*#__PURE__*/_jsx(\"strong\",{children:\"This ticket has been resolved.\"}),\" If you need further help, please create a new ticket.\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:closeTicket,className:\"btn-primary\",children:\"Close\"})})]})})})]});};export default Support;","map":{"version":3,"names":["React","useState","useEffect","useAuth","auth","db","collection","query","where","getDocs","orderBy","doc","updateDoc","serverTimestamp","MessageCircle","Mail","Send","CheckCircle","HelpCircle","Clock","Eye","X","User","Shield","toast","formatDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Support","userData","formData","setFormData","subject","message","loading","setLoading","submitted","setSubmitted","myTickets","setMyTickets","selectedTicket","setSelectedTicket","loadingTickets","setLoadingTickets","activeTab","setActiveTab","fetchMyTickets","q","currentUser","uid","snapshot","tickets","docs","map","_objectSpread","id","data","error","console","handleChange","e","target","name","value","handleSubmit","preventDefault","trim","token","getIdToken","response","fetch","method","headers","Authorization","concat","body","JSON","stringify","userName","userEmail","email","userPhone","phone","result","json","ok","Error","success","setTimeout","openTicket","ticket","status","replies","length","lastViewedByUser","catch","err","closeTicket","className","children","onClick","filter","t","onSubmit","type","onChange","placeholder","required","maxLength","rows","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","createdAt","repliedAt","lastReply","reply","index","sentAt"],"sources":["/Users/zahurshaikh/Documents/Refer-Earn-APP/src/components/user/Support.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../hooks/useAuth\";\nimport { auth, db } from \"../../firebase/config\";\nimport {\n  collection,\n  query,\n  where,\n  getDocs,\n  orderBy,\n  doc,\n  updateDoc,\n  serverTimestamp,\n} from \"firebase/firestore\";\nimport {\n  MessageCircle,\n  Mail,\n  Send,\n  CheckCircle,\n  HelpCircle,\n  Clock,\n  Eye,\n  X,\n  User,\n  Shield,\n} from \"lucide-react\";\nimport toast from \"react-hot-toast\";\nimport { formatDate } from \"../../utils/helpers\";\n\nconst Support = () => {\n  const { userData } = useAuth();\n  const [formData, setFormData] = useState({\n    subject: \"\",\n    message: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [myTickets, setMyTickets] = useState([]);\n  const [selectedTicket, setSelectedTicket] = useState(null);\n  const [loadingTickets, setLoadingTickets] = useState(true);\n  const [activeTab, setActiveTab] = useState(\"new\"); // \"new\" or \"history\"\n\n  useEffect(() => {\n    if (userData) {\n      fetchMyTickets();\n    }\n  }, [userData]);\n\n  const fetchMyTickets = async () => {\n    setLoadingTickets(true);\n    try {\n      const q = query(\n        collection(db, \"supportTickets\"),\n        where(\"userId\", \"==\", auth.currentUser.uid),\n        orderBy(\"createdAt\", \"desc\")\n      );\n\n      const snapshot = await getDocs(q);\n      const tickets = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n\n      setMyTickets(tickets);\n    } catch (error) {\n      console.error(\"Error fetching tickets:\", error);\n    } finally {\n      setLoadingTickets(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!formData.subject.trim() || !formData.message.trim()) {\n      toast.error(\"Please fill all fields\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const token = await auth.currentUser.getIdToken();\n\n      const response = await fetch(\"/api/submitSupportTicket\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          userName: userData.name,\n          userEmail: userData.email,\n          userPhone: userData.phone || \"\",\n          subject: formData.subject,\n          message: formData.message,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || \"Failed to send message\");\n      }\n\n      setSubmitted(true);\n      setFormData({ subject: \"\", message: \"\" });\n      toast.success(result.message);\n\n      // Refresh tickets\n      await fetchMyTickets();\n\n      setTimeout(() => {\n        setSubmitted(false);\n        setActiveTab(\"history\"); // Switch to history tab\n      }, 2000);\n    } catch (error) {\n      console.error(\"Support form error:\", error);\n      toast.error(error.message || \"Failed to send message\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openTicket = (ticket) => {\n    setSelectedTicket(ticket);\n\n    // Mark notification as read if unread\n    if (\n      ticket.status === \"REPLIED\" &&\n      ticket.replies &&\n      ticket.replies.length > 0\n    ) {\n      // Update notification read status\n      updateDoc(doc(db, \"supportTickets\", ticket.id), {\n        lastViewedByUser: serverTimestamp(),\n      }).catch((err) => console.error(\"Error updating view time:\", err));\n    }\n  };\n\n  const closeTicket = () => {\n    setSelectedTicket(null);\n  };\n\n  return (\n    <div className=\"mx-auto space-y-6 max-w-6xl\">\n      {/* Header */}\n      <div className=\"text-white bg-gradient-to-r card from-primary-600 to-primary-700\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"p-4 rounded-full bg-white/20\">\n            <MessageCircle className=\"w-8 h-8\" />\n          </div>\n          <div className=\"flex-1\">\n            <h2 className=\"text-2xl font-bold\">Support Center</h2>\n            <p className=\"text-primary-100\">Get help and view your tickets</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"card\">\n        <div className=\"flex space-x-2 border-b\">\n          <button\n            onClick={() => setActiveTab(\"new\")}\n            className={`px-6 py-3 font-semibold transition ${\n              activeTab === \"new\"\n                ? \"border-b-2 border-primary-600 text-primary-600\"\n                : \"text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            üìù New Ticket\n          </button>\n          <button\n            onClick={() => setActiveTab(\"history\")}\n            className={`px-6 py-3 font-semibold transition relative ${\n              activeTab === \"history\"\n                ? \"border-b-2 border-primary-600 text-primary-600\"\n                : \"text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            üìã My Tickets ({myTickets.length})\n            {myTickets.filter(\n              (t) => t.status === \"REPLIED\" && !t.lastViewedByUser\n            ).length > 0 && (\n              <span className=\"flex absolute -top-1 -right-1 justify-center items-center w-5 h-5 text-xs text-white bg-red-500 rounded-full\">\n                {\n                  myTickets.filter(\n                    (t) => t.status === \"REPLIED\" && !t.lastViewedByUser\n                  ).length\n                }\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === \"new\" ? (\n        /* NEW TICKET FORM */\n        <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-3\">\n          {/* Sidebar */}\n          <div className=\"space-y-4 lg:col-span-1\">\n            <div className=\"card\">\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"p-2 rounded-lg bg-primary-50\">\n                  <Mail className=\"w-5 h-5 text-primary-600\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">Email Support</h3>\n                  <p className=\"mt-1 text-sm text-gray-600 break-all\">\n                    refernearnplatform@gmail.com\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-50 border-blue-200 card\">\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"p-2 bg-blue-100 rounded-lg\">\n                  <HelpCircle className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">Response Time</h3>\n                  <p className=\"mt-1 text-sm text-gray-600\">\n                    We typically respond within 24 hours\n                  </p>\n                  <p className=\"mt-1 text-xs text-gray-500\">\n                    Mon-Fri: 9 AM - 6 PM IST\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-yellow-50 border-yellow-200 card\">\n              <h3 className=\"flex items-center mb-3 font-semibold text-gray-900\">\n                <span className=\"mr-2\">üí°</span> Common Topics\n              </h3>\n              <ul className=\"space-y-2 text-sm text-gray-700\">\n                <li className=\"flex items-start\">\n                  <span className=\"mr-2\">‚Ä¢</span>\n                  <span>Account activation issues</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"mr-2\">‚Ä¢</span>\n                  <span>Payment verification</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"mr-2\">‚Ä¢</span>\n                  <span>Withdrawal requests</span>\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"mr-2\">‚Ä¢</span>\n                  <span>Referral code problems</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Form */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"card\">\n              {submitted ? (\n                <div className=\"py-12 text-center\">\n                  <div className=\"inline-flex justify-center items-center mb-4 w-16 h-16 bg-green-100 rounded-full\">\n                    <CheckCircle className=\"w-10 h-10 text-green-600\" />\n                  </div>\n                  <h3 className=\"mb-2 text-2xl font-bold text-gray-900\">\n                    Ticket Submitted!\n                  </h3>\n                  <p className=\"mb-2 text-gray-600\">\n                    Thank you for contacting us. We've received your ticket.\n                  </p>\n                  <p className=\"mb-4 text-sm text-gray-500\">\n                    ‚úÖ Admin will reply in the Support Center\n                    <br />‚úÖ You'll get a notification when admin replies\n                  </p>\n                  <button\n                    onClick={() => {\n                      setSubmitted(false);\n                      setActiveTab(\"history\");\n                    }}\n                    className=\"mt-4 btn-primary\"\n                  >\n                    View My Tickets\n                  </button>\n                </div>\n              ) : (\n                <>\n                  <h3 className=\"mb-1 text-xl font-bold text-gray-900\">\n                    Create New Ticket\n                  </h3>\n                  <p className=\"mb-6 text-sm text-gray-600\">\n                    Fill out the form below and we'll get back to you soon\n                  </p>\n\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200 sm:grid-cols-2\">\n                      <div>\n                        <label className=\"block mb-1 text-xs font-medium text-gray-600\">\n                          Your Name\n                        </label>\n                        <p className=\"text-sm font-semibold text-gray-900\">\n                          {userData?.name}\n                        </p>\n                      </div>\n                      <div>\n                        <label className=\"block mb-1 text-xs font-medium text-gray-600\">\n                          Your Email\n                        </label>\n                        <p className=\"text-sm font-semibold text-gray-900 break-all\">\n                          {userData?.email}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n                        Subject <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"subject\"\n                        value={formData.subject}\n                        onChange={handleChange}\n                        className=\"input-field\"\n                        placeholder=\"e.g., Payment not verified, Withdrawal issue, etc.\"\n                        required\n                        maxLength=\"100\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n                        Message <span className=\"text-red-500\">*</span>\n                      </label>\n                      <textarea\n                        name=\"message\"\n                        value={formData.message}\n                        onChange={handleChange}\n                        className=\"resize-none input-field\"\n                        rows=\"8\"\n                        placeholder=\"Please describe your issue or question in detail...\"\n                        required\n                        maxLength=\"1000\"\n                      />\n                      <p className=\"mt-1 text-xs text-gray-500\">\n                        {formData.message.length}/1000 characters\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                      <p className=\"text-sm text-blue-800\">\n                        <strong>üí¨ What happens next:</strong>\n                      </p>\n                      <ul className=\"mt-2 space-y-1 text-sm text-blue-700\">\n                        <li>‚úì Your ticket will be sent to admin</li>\n                        <li>‚úì Admin replies appear in \"My Tickets\" tab</li>\n                        <li>‚úì You'll get a notification when admin replies</li>\n                        <li>‚úì Response within 24 hours</li>\n                      </ul>\n                    </div>\n\n                    <button\n                      type=\"submit\"\n                      disabled={loading}\n                      className=\"py-3 w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {loading ? (\n                        <span className=\"flex justify-center items-center\">\n                          <svg\n                            className=\"mr-3 -ml-1 w-5 h-5 text-white animate-spin\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <circle\n                              className=\"opacity-25\"\n                              cx=\"12\"\n                              cy=\"12\"\n                              r=\"10\"\n                              stroke=\"currentColor\"\n                              strokeWidth=\"4\"\n                            ></circle>\n                            <path\n                              className=\"opacity-75\"\n                              fill=\"currentColor\"\n                              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                            ></path>\n                          </svg>\n                          Submitting...\n                        </span>\n                      ) : (\n                        <span className=\"flex justify-center items-center\">\n                          <Send className=\"mr-2 w-5 h-5\" />\n                          Submit Ticket\n                        </span>\n                      )}\n                    </button>\n                  </form>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      ) : (\n        /* MY TICKETS HISTORY */\n        <div className=\"space-y-4\">\n          {loadingTickets ? (\n            <div className=\"py-12 text-center card\">\n              <div className=\"mx-auto w-12 h-12 rounded-full border-b-2 animate-spin border-primary-600\"></div>\n            </div>\n          ) : myTickets.length === 0 ? (\n            <div className=\"py-12 text-center card\">\n              <MessageCircle className=\"mx-auto mb-4 w-16 h-16 text-gray-300\" />\n              <p className=\"mb-2 text-gray-500\">No tickets yet</p>\n              <p className=\"mb-4 text-sm text-gray-400\">\n                Create your first support ticket to get help\n              </p>\n              <button\n                onClick={() => setActiveTab(\"new\")}\n                className=\"btn-primary\"\n              >\n                Create New Ticket\n              </button>\n            </div>\n          ) : (\n            myTickets.map((ticket) => (\n              <div key={ticket.id} className=\"transition card hover:shadow-lg\">\n                <div className=\"flex flex-col justify-between lg:flex-row\">\n                  <div className=\"flex-1 space-y-3\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <div className=\"flex items-center mb-1 space-x-2\">\n                          <h3 className=\"text-xl font-bold text-gray-900\">\n                            {ticket.subject}\n                          </h3>\n                          <span\n                            className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                              ticket.status === \"PENDING\"\n                                ? \"bg-yellow-100 text-yellow-800\"\n                                : ticket.status === \"REPLIED\"\n                                ? \"bg-blue-100 text-blue-800\"\n                                : \"bg-green-100 text-green-800\"\n                            }`}\n                          >\n                            {ticket.status}\n                          </span>\n                          {ticket.status === \"REPLIED\" &&\n                            !ticket.lastViewedByUser && (\n                              <span className=\"px-2 py-1 text-xs text-white bg-red-500 rounded-full animate-pulse\">\n                                New Reply!\n                              </span>\n                            )}\n                        </div>\n                        <p className=\"text-sm text-gray-500\">\n                          Created: {formatDate(ticket.createdAt)}\n                        </p>\n                        {ticket.repliedAt && (\n                          <p className=\"text-sm text-blue-600\">\n                            Last reply: {formatDate(ticket.repliedAt)}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"p-3 bg-gray-50 rounded-lg\">\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">\n                        {ticket.message}\n                      </p>\n                    </div>\n\n                    {ticket.lastReply && (\n                      <div className=\"p-3 bg-blue-50 rounded border-l-4 border-blue-600\">\n                        <p className=\"mb-1 text-xs font-semibold text-blue-800\">\n                          Admin's Reply:\n                        </p>\n                        <p className=\"text-sm text-gray-700 line-clamp-2\">\n                          {ticket.lastReply}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex gap-3 mt-4 lg:mt-0 lg:ml-6 lg:flex-col lg:w-48\">\n                    <button\n                      onClick={() => openTicket(ticket)}\n                      className=\"flex flex-1 justify-center items-center btn-primary\"\n                    >\n                      <Eye className=\"mr-2 w-4 h-4\" />\n                      View Details\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      )}\n\n      {/* Ticket Detail Modal */}\n      {selectedTicket && (\n        <div className=\"flex fixed inset-0 z-50 justify-center items-center p-4 bg-black bg-opacity-50\">\n          <div className=\"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-start mb-6\">\n                <div>\n                  <h3 className=\"mb-2 text-2xl font-bold text-gray-900\">\n                    {selectedTicket.subject}\n                  </h3>\n                  <span\n                    className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                      selectedTicket.status === \"PENDING\"\n                        ? \"bg-yellow-100 text-yellow-800\"\n                        : selectedTicket.status === \"REPLIED\"\n                        ? \"bg-blue-100 text-blue-800\"\n                        : \"bg-green-100 text-green-800\"\n                    }`}\n                  >\n                    {selectedTicket.status}\n                  </span>\n                </div>\n                <button\n                  onClick={closeTicket}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              {/* Conversation Thread */}\n              <div className=\"mb-6 space-y-4\">\n                {/* Original Message */}\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"flex justify-center items-center w-10 h-10 rounded-full bg-primary-100\">\n                      <User className=\"w-5 h-5 text-primary-600\" />\n                    </div>\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"p-4 rounded-lg border-l-4 bg-primary-50 border-primary-600\">\n                      <div className=\"flex items-center mb-2 space-x-2\">\n                        <p className=\"font-semibold text-gray-900\">You</p>\n                        <span className=\"text-xs text-gray-500\">\n                          {formatDate(selectedTicket.createdAt)}\n                        </span>\n                      </div>\n                      <p className=\"text-gray-800 whitespace-pre-wrap\">\n                        {selectedTicket.message}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Admin Replies */}\n                {selectedTicket.replies &&\n                  selectedTicket.replies.length > 0 &&\n                  selectedTicket.replies.map((reply, index) => (\n                    <div key={index} className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"flex justify-center items-center w-10 h-10 bg-green-100 rounded-full\">\n                          <Shield className=\"w-5 h-5 text-green-600\" />\n                        </div>\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"p-4 bg-green-50 rounded-lg border-l-4 border-green-600\">\n                          <div className=\"flex items-center mb-2 space-x-2\">\n                            <p className=\"font-semibold text-gray-900\">\n                              Admin Support\n                            </p>\n                            <span className=\"text-xs text-gray-500\">\n                              {formatDate(reply.sentAt)}\n                            </span>\n                          </div>\n                          <p className=\"text-gray-800 whitespace-pre-wrap\">\n                            {reply.message}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n\n              {selectedTicket.status === \"PENDING\" && (\n                <div className=\"p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\n                  <p className=\"text-sm text-yellow-800\">\n                    ‚è≥ <strong>Waiting for admin response...</strong> We'll\n                    notify you when admin replies.\n                  </p>\n                </div>\n              )}\n\n              {selectedTicket.status === \"RESOLVED\" && (\n                <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n                  <p className=\"text-sm text-green-800\">\n                    ‚úÖ <strong>This ticket has been resolved.</strong> If you\n                    need further help, please create a new ticket.\n                  </p>\n                </div>\n              )}\n\n              <div className=\"flex justify-end mt-6\">\n                <button onClick={closeTicket} className=\"btn-primary\">\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Support;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}